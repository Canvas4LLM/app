var Bc=Object.defineProperty;var Vs=e=>{throw TypeError(e)};var Kc=(e,t,n)=>t in e?Bc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Xs=(e,t,n)=>Kc(e,typeof t!="symbol"?t+"":t,n),co=(e,t,n)=>t.has(e)||Vs("Cannot "+n);var fe=(e,t,n)=>(co(e,t,"read from private field"),n?n.call(e):t.get(e)),Re=(e,t,n)=>t.has(e)?Vs("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),uo=(e,t,n,i)=>(co(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),kt=(e,t,n)=>(co(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const Fc=!1;var Fi=Array.isArray,$o=Array.from,Zc=Object.defineProperty,cn=Object.getOwnPropertyDescriptor,La=Object.getOwnPropertyDescriptors,Gc=Object.prototype,qc=Array.prototype,es=Object.getPrototypeOf;function li(e){return typeof e=="function"}const Jt=()=>{};function Uc(e){return e()}function wr(e){for(var t=0;t<e.length;t++)e[t]()}const Pt=2,Va=4,Zi=8,ts=16,It=32,Gi=64,ko=128,Mn=256,xr=512,ut=1024,hn=2048,jn=4096,Vt=8192,Qn=16384,Jc=32768,qi=65536,jc=1<<17,Qc=1<<19,Xa=1<<20,un=Symbol("$state"),Ya=Symbol("legacy props"),$c=Symbol("");function Wa(e){return e===this.v}function ns(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function is(e){return!ns(e,this.v)}function eu(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function tu(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function nu(e){throw new Error("https://svelte.dev/e/effect_orphan")}function iu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ru(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function ou(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function su(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function au(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function lu(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let $n=!1;function cu(){$n=!0}const rs=1,os=2,Ba=4,uu=8,du=16,fu=1,hu=2,Ka=4,gu=8,vu=16,Fa=1,mu=2,dt=Symbol(),Za="http://www.w3.org/2000/svg";function ct(e,t){var n={f:0,v:e,reactions:null,equals:Wa,version:0};return n}function Je(e){return Ga(ct(e))}function Kr(e,t=!1){var i;const n=ct(e);return t||(n.equals=is),$n&&Se!==null&&Se.l!==null&&((i=Se.l).s??(i.s=[])).push(n),n}function F(e,t=!1){return Ga(Kr(e,t))}function Ga(e){return Oe!==null&&Oe.f&Pt&&(Xt===null?ku([e]):Xt.push(e)),e}function D(e,t){return Oe!==null&&qr()&&Oe.f&(Pt|ts)&&(Xt===null||!Xt.includes(e))&&lu(),Co(e,t)}function Co(e,t){return e.equals(t)||(e.v=t,e.version=cl(),qa(e,hn),qr()&&ye!==null&&ye.f&ut&&!(ye.f&It)&&(rt!==null&&rt.includes(e)?(Tt(ye,hn),Jr(ye)):dn===null?Cu([e]):dn.push(e))),t}function qa(e,t){var n=e.reactions;if(n!==null)for(var i=qr(),r=n.length,o=0;o<r;o++){var s=n[o],a=s.f;a&hn||!i&&s===ye||(Tt(s,t),a&(ut|Mn)&&(a&Pt?qa(s,jn):Jr(s)))}}let ss=!1;function Le(e,t=null,n){if(typeof e!="object"||e===null||un in e)return e;const i=es(e);if(i!==Gc&&i!==qc)return e;var r=new Map,o=Fi(e),s=ct(0);o&&r.set("length",ct(e.length));var a;return new Proxy(e,{defineProperty(c,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&ou();var h=r.get(l);return h===void 0?(h=ct(u.value),r.set(l,h)):D(h,Le(u.value,a)),!0},deleteProperty(c,l){var u=r.get(l);if(u===void 0)l in c&&r.set(l,ct(dt));else{if(o&&typeof l=="string"){var h=r.get("length"),f=Number(l);Number.isInteger(f)&&f<h.v&&D(h,f)}D(u,dt),Ys(s)}return!0},get(c,l,u){var y;if(l===un)return e;var h=r.get(l),f=l in c;if(h===void 0&&(!f||(y=cn(c,l))!=null&&y.writable)&&(h=ct(Le(f?c[l]:dt,a)),r.set(l,h)),h!==void 0){var g=d(h);return g===dt?void 0:g}return Reflect.get(c,l,u)},getOwnPropertyDescriptor(c,l){var u=Reflect.getOwnPropertyDescriptor(c,l);if(u&&"value"in u){var h=r.get(l);h&&(u.value=d(h))}else if(u===void 0){var f=r.get(l),g=f==null?void 0:f.v;if(f!==void 0&&g!==dt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return u},has(c,l){var g;if(l===un)return!0;var u=r.get(l),h=u!==void 0&&u.v!==dt||Reflect.has(c,l);if(u!==void 0||ye!==null&&(!h||(g=cn(c,l))!=null&&g.writable)){u===void 0&&(u=ct(h?Le(c[l],a):dt),r.set(l,u));var f=d(u);if(f===dt)return!1}return h},set(c,l,u,h){var b;var f=r.get(l),g=l in c;if(o&&l==="length")for(var y=u;y<f.v;y+=1){var p=r.get(y+"");p!==void 0?D(p,dt):y in c&&(p=ct(dt),r.set(y+"",p))}f===void 0?(!g||(b=cn(c,l))!=null&&b.writable)&&(f=ct(void 0),D(f,Le(u,a)),r.set(l,f)):(g=f.v!==dt,D(f,Le(u,a)));var N=Reflect.getOwnPropertyDescriptor(c,l);if(N!=null&&N.set&&N.set.call(h,u),!g){if(o&&typeof l=="string"){var x=r.get("length"),m=Number(l);Number.isInteger(m)&&m>=x.v&&D(x,m+1)}Ys(s)}return!0},ownKeys(c){d(s);var l=Reflect.ownKeys(c).filter(f=>{var g=r.get(f);return g===void 0||g.v!==dt});for(var[u,h]of r)h.v!==dt&&!(u in c)&&l.push(u);return l},setPrototypeOf(){su()}})}function Ys(e,t=1){D(e,e.v+t)}var ft,Ua,Ja;function yu(){if(ft===void 0){ft=window;var e=Element.prototype,t=Node.prototype;Ua=cn(t,"firstChild").get,Ja=cn(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function Ui(e=""){return document.createTextNode(e)}function Lt(e){return Ua.call(e)}function Fr(e){return Ja.call(e)}function se(e,t){return Lt(e)}function ve(e,t){{var n=Lt(e);return n instanceof Comment&&n.data===""?Fr(n):n}}function ie(e,t=1,n=!1){let i=e;for(;t--;)i=Fr(i);return i}function pu(e){e.textContent=""}function At(e){var t=Pt|hn;ye===null?t|=Mn:ye.f|=Xa;var n=Oe!==null&&Oe.f&Pt?Oe:null;const i={children:null,ctx:Se,deps:null,equals:Wa,f:t,fn:e,reactions:null,v:null,version:0,parent:n??ye};return n!==null&&(n.children??(n.children=[])).push(i),i}function re(e){const t=At(e);return t.equals=is,t}function ja(e){var t=e.children;if(t!==null){e.children=null;for(var n=0;n<t.length;n+=1){var i=t[n];i.f&Pt?as(i):Bt(i)}}}function _u(e){for(var t=e.parent;t!==null;){if(!(t.f&Pt))return t;t=t.parent}return null}function Qa(e){var t,n=ye;bt(_u(e));try{ja(e),t=ul(e)}finally{bt(n)}return t}function $a(e){var t=Qa(e),n=(wn||e.f&Mn)&&e.deps!==null?jn:ut;Tt(e,n),e.equals(t)||(e.v=t,e.version=cl())}function as(e){ja(e),pi(e,0),Tt(e,Qn),e.v=e.children=e.deps=e.ctx=e.reactions=null}function el(e){ye===null&&Oe===null&&nu(),Oe!==null&&Oe.f&Mn&&tu(),cs&&eu()}function wu(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function ei(e,t,n,i=!0){var r=(e&Gi)!==0,o=ye,s={ctx:Se,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|hn,first:null,fn:t,last:null,next:null,parent:r?null:o,prev:null,teardown:null,transitions:null,version:0};if(n){var a=Rn;try{Ws(!0),Ji(s),s.f|=Jc}catch(u){throw Bt(s),u}finally{Ws(a)}}else t!==null&&Jr(s);var c=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&Xa)===0;if(!c&&!r&&i&&(o!==null&&wu(s,o),Oe!==null&&Oe.f&Pt)){var l=Oe;(l.children??(l.children=[])).push(s)}return s}function tl(e){const t=ei(Zi,null,!1);return Tt(t,ut),t.teardown=e,t}function No(e){el();var t=ye!==null&&(ye.f&It)!==0&&Se!==null&&!Se.m;if(t){var n=Se;(n.e??(n.e=[])).push({fn:e,effect:ye,reaction:Oe})}else{var i=mt(e);return i}}function xu(e){return el(),ti(e)}function bu(e){const t=ei(Gi,e,!0);return(n={})=>new Promise(i=>{n.outro?Bn(t,()=>{Bt(t),i(void 0)}):(Bt(t),i(void 0))})}function mt(e){return ei(Va,e,!1)}function G(e,t){var n=Se,i={effect:null,ran:!1};n.l.r1.push(i),i.effect=ti(()=>{e(),!i.ran&&(i.ran=!0,D(n.l.r2,!0),zt(t))})}function nt(){var e=Se;ti(()=>{if(d(e.l.r2)){for(var t of e.l.r1){var n=t.effect;n.f&ut&&Tt(n,jn),ii(n)&&Ji(n),t.ran=!1}e.l.r2.v=!1}})}function ti(e){return ei(Zi,e,!0)}function _e(e){return ni(e)}function ni(e,t=0){return ei(Zi|ts|t,e,!0)}function gn(e,t=!0){return ei(Zi|It,e,!0,t)}function nl(e){var t=e.teardown;if(t!==null){const n=cs,i=Oe;Bs(!0),Kt(null);try{t.call(null)}finally{Bs(n),Kt(i)}}}function il(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var n=0;n<t.length;n+=1)as(t[n])}}function rl(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var i=n.next;Bt(n,t),n=i}}function Eu(e){for(var t=e.first;t!==null;){var n=t.next;t.f&It||Bt(t),t=n}}function Bt(e,t=!0){var n=!1;if((t||e.f&Qc)&&e.nodes_start!==null){for(var i=e.nodes_start,r=e.nodes_end;i!==null;){var o=i===r?null:Fr(i);i.remove(),i=o}n=!0}rl(e,t&&!n),il(e),pi(e,0),Tt(e,Qn);var s=e.transitions;if(s!==null)for(const c of s)c.stop();nl(e);var a=e.parent;a!==null&&a.first!==null&&ol(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function ol(e){var t=e.parent,n=e.prev,i=e.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=n))}function Bn(e,t){var n=[];ls(e,n,!0),sl(n,()=>{Bt(e),t&&t()})}function sl(e,t){var n=e.length;if(n>0){var i=()=>--n||t();for(var r of e)r.out(i)}else t()}function ls(e,t,n){if(!(e.f&Vt)){if(e.f^=Vt,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var i=e.first;i!==null;){var r=i.next,o=(i.f&qi)!==0||(i.f&It)!==0;ls(i,t,o?n:!1),i=r}}}function yi(e){al(e,!0)}function al(e,t){if(e.f&Vt){ii(e)&&Ji(e),e.f^=Vt;for(var n=e.first;n!==null;){var i=n.next,r=(n.f&qi)!==0||(n.f&It)!==0;al(n,r?t:!1),n=i}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let Mo=!1,Po=[];function Su(){Mo=!1;const e=Po.slice();Po=[],wr(e)}function Zr(e){Mo||(Mo=!0,queueMicrotask(Su)),Po.push(e)}function Gr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let gr=!1,br=!1,Er=null,Rn=!1,cs=!1;function Ws(e){Rn=e}function Bs(e){cs=e}let Ao=[],vi=0;let Oe=null;function Kt(e){Oe=e}let ye=null;function bt(e){ye=e}let Xt=null;function ku(e){Xt=e}let rt=null,vt=0,dn=null;function Cu(e){dn=e}let ll=1,wn=!1,Se=null;function cl(){return++ll}function qr(){return!$n||Se!==null&&Se.l===null}function ii(e){var s,a;var t=e.f;if(t&hn)return!0;if(t&jn){var n=e.deps,i=(t&Mn)!==0;if(n!==null){var r;if(t&xr){for(r=0;r<n.length;r++)((s=n[r]).reactions??(s.reactions=[])).push(e);e.f^=xr}for(r=0;r<n.length;r++){var o=n[r];if(ii(o)&&$a(o),i&&ye!==null&&!wn&&!((a=o==null?void 0:o.reactions)!=null&&a.includes(e))&&(o.reactions??(o.reactions=[])).push(e),o.version>e.version)return!0}}(!i||ye!==null&&!wn)&&Tt(e,ut)}return!1}function Nu(e,t){for(var n=t;n!==null;){if(n.f&ko)try{n.fn(e);return}catch{n.f^=ko}n=n.parent}throw gr=!1,e}function Mu(e){return(e.f&Qn)===0&&(e.parent===null||(e.parent.f&ko)===0)}function Ur(e,t,n,i){if(gr){if(n===null&&(gr=!1),Mu(t))throw e;return}n!==null&&(gr=!0);{Nu(e,t);return}}function ul(e){var f;var t=rt,n=vt,i=dn,r=Oe,o=wn,s=Xt,a=Se,c=e.f;rt=null,vt=0,dn=null,Oe=c&(It|Gi)?null:e,wn=!Rn&&(c&Mn)!==0,Xt=null,Se=e.ctx;try{var l=(0,e.fn)(),u=e.deps;if(rt!==null){var h;if(pi(e,vt),u!==null&&vt>0)for(u.length=vt+rt.length,h=0;h<rt.length;h++)u[vt+h]=rt[h];else e.deps=u=rt;if(!wn)for(h=vt;h<u.length;h++)((f=u[h]).reactions??(f.reactions=[])).push(e)}else u!==null&&vt<u.length&&(pi(e,vt),u.length=vt);return l}finally{rt=t,vt=n,dn=i,Oe=r,wn=o,Xt=s,Se=a}}function Pu(e,t){let n=t.reactions;if(n!==null){var i=n.indexOf(e);if(i!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[i]=n[r],n.pop())}}n===null&&t.f&Pt&&(rt===null||!rt.includes(t))&&(Tt(t,jn),t.f&(Mn|xr)||(t.f^=xr),pi(t,0))}function pi(e,t){var n=e.deps;if(n!==null)for(var i=t;i<n.length;i++)Pu(e,n[i])}function Ji(e){var t=e.f;if(!(t&Qn)){Tt(e,ut);var n=ye,i=Se;ye=e;try{t&ts?Eu(e):rl(e),il(e),nl(e);var r=ul(e);e.teardown=typeof r=="function"?r:null,e.version=ll}catch(o){Ur(o,e,n,i||e.ctx)}finally{ye=n}}}function Au(){if(vi>1e3){vi=0;try{iu()}catch(e){if(Er!==null)Ur(e,Er,null);else throw e}}vi++}function zu(e){var t=e.length;if(t!==0){Au();var n=Rn;Rn=!0;try{for(var i=0;i<t;i++){var r=e[i];r.f&ut||(r.f^=ut);var o=[];dl(r,o),Iu(o)}}finally{Rn=n}}}function Iu(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var i=e[n];if(!(i.f&(Qn|Vt)))try{ii(i)&&(Ji(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?ol(i):i.fn=null))}catch(r){Ur(r,i,null,i.ctx)}}}function Tu(){if(br=!1,vi>1001)return;const e=Ao;Ao=[],zu(e),br||(vi=0,Er=null)}function Jr(e){br||(br=!0,queueMicrotask(Tu)),Er=e;for(var t=e;t.parent!==null;){t=t.parent;var n=t.f;if(n&(Gi|It)){if(!(n&ut))return;t.f^=ut}}Ao.push(t)}function dl(e,t){var n=e.first,i=[];e:for(;n!==null;){var r=n.f,o=(r&It)!==0,s=o&&(r&ut)!==0,a=n.next;if(!s&&!(r&Vt))if(r&Zi){if(o)n.f^=ut;else try{ii(n)&&Ji(n)}catch(h){Ur(h,n,null,n.ctx)}var c=n.first;if(c!==null){n=c;continue}}else r&Va&&i.push(n);if(a===null){let h=n.parent;for(;h!==null;){if(e===h)break e;var l=h.next;if(l!==null){n=l;continue e}h=h.parent}}n=a}for(var u=0;u<i.length;u++)c=i[u],t.push(c),dl(c,t)}function d(e){var u;var t=e.f,n=(t&Pt)!==0;if(n&&t&Qn){var i=Qa(e);return as(e),i}if(Oe!==null){Xt!==null&&Xt.includes(e)&&au();var r=Oe.deps;rt===null&&r!==null&&r[vt]===e?vt++:rt===null?rt=[e]:rt.push(e),dn!==null&&ye!==null&&ye.f&ut&&!(ye.f&It)&&dn.includes(e)&&(Tt(ye,hn),Jr(ye))}else if(n&&e.deps===null)for(var o=e,s=o.parent,a=o;s!==null;)if(s.f&Pt){var c=s;a=c,s=c.parent}else{var l=s;(u=l.deriveds)!=null&&u.includes(a)||(l.deriveds??(l.deriveds=[])).push(a);break}return n&&(o=e,ii(o)&&$a(o)),e.v}function zt(e){const t=Oe;try{return Oe=null,e()}finally{Oe=t}}const Ou=~(hn|jn|ut);function Tt(e,t){e.f=e.f&Ou|t}function Kn(e){return us().get(e)}function Sr(e,t){return us().set(e,t),t}function Hu(e){return us().has(e)}function us(e){return Se===null&&Gr(),Se.c??(Se.c=new Map(Du(Se)||void 0))}function Du(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function Ks(e,t=1){var n=d(e),i=t===1?n++:n--;return D(e,n),i}function ae(e,t=!1,n){Se={p:Se,c:null,e:null,m:!1,s:e,x:null,l:null},$n&&!t&&(Se.l={s:null,u:null,r1:[],r2:ct(!1)})}function le(e){const t=Se;if(t!==null){const s=t.e;if(s!==null){var n=ye,i=Oe;t.e=null;try{for(var r=0;r<s.length;r++){var o=s[r];bt(o.effect),Kt(o.reaction),mt(o.fn)}}finally{bt(n),Kt(i)}}Se=t.p,t.m=!0}return{}}function Y(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(un in e)zo(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&un in n&&zo(n)}}}function zo(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{zo(e[i],t)}catch{}const n=es(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=La(n);for(let r in i){const o=i[r].get;if(o)try{o.call(e)}catch{}}}}}function Ru(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Lu=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Vu(e){return Lu.includes(e)}const Xu={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function Yu(e){return e=e.toLowerCase(),Xu[e]??e}const Wu=["touchstart","touchmove"];function Bu(e){return Wu.includes(e)}function Ku(e,t){if(t){const n=document.body;e.autofocus=!0,Zr(()=>{document.activeElement===n&&e.focus()})}}let Fs=!1;function Fu(){Fs||(Fs=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function fl(e){var t=Oe,n=ye;Kt(null),bt(null);try{return e()}finally{Kt(t),bt(n)}}function Zu(e,t,n,i=n){e.addEventListener(t,()=>fl(n));const r=e.__on_r;r?e.__on_r=()=>{r(),i(!0)}:e.__on_r=()=>i(!0),Fu()}const hl=new Set,Io=new Set;function gl(e,t,n,i){function r(o){if(i.capture||di.call(t,o),!o.cancelBubble)return fl(()=>n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Zr(()=>{t.addEventListener(e,r,i)}):t.addEventListener(e,r,i),r}function Me(e,t,n,i,r){var o={capture:i,passive:r},s=gl(e,t,n,o);(t===document.body||t===window||t===document)&&tl(()=>{t.removeEventListener(e,s,o)})}function Pn(e){for(var t=0;t<e.length;t++)hl.add(e[t]);for(var n of Io)n(e)}function di(e){var m;var t=this,n=t.ownerDocument,i=e.type,r=((m=e.composedPath)==null?void 0:m.call(e))||[],o=r[0]||e.target,s=0,a=e.__root;if(a){var c=r.indexOf(a);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var l=r.indexOf(t);if(l===-1)return;c<=l&&(s=c)}if(o=r[s]||e.target,o!==t){Zc(e,"currentTarget",{configurable:!0,get(){return o||n}});var u=Oe,h=ye;Kt(null),bt(null);try{for(var f,g=[];o!==null;){var y=o.assignedSlot||o.parentNode||o.host||null;try{var p=o["__"+i];if(p!==void 0&&!o.disabled)if(Fi(p)){var[N,...x]=p;N.apply(o,[e,...x])}else p.call(o,e)}catch(b){f?g.push(b):f=b}if(e.cancelBubble||y===t||y===null)break;o=y}if(f){for(let b of g)queueMicrotask(()=>{throw b});throw f}}finally{e.__root=t,delete e.currentTarget,Kt(u),bt(h)}}}function ds(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function vn(e,t){var n=ye;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function ue(e,t){var n=(t&Fa)!==0,i=(t&mu)!==0,r,o=!e.startsWith("<!>");return()=>{r===void 0&&(r=ds(o?e:"<!>"+e),n||(r=Lt(r)));var s=i?document.importNode(r,!0):r.cloneNode(!0);if(n){var a=Lt(s),c=s.lastChild;vn(a,c)}else vn(s,s);return s}}function je(e,t,n="svg"){var i=!e.startsWith("<!>"),r=(t&Fa)!==0,o=`<${n}>${i?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=ds(o),c=Lt(a);if(r)for(s=document.createDocumentFragment();Lt(c);)s.appendChild(Lt(c));else s=Lt(c)}var l=s.cloneNode(!0);if(r){var u=Lt(l),h=l.lastChild;vn(u,h)}else vn(l,l);return l}}function To(e=""){{var t=Ui(e+"");return vn(t,t),t}}function Xe(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Ui();return e.append(t,n),vn(t,n),e}function W(e,t){e!==null&&e.before(t)}function mn(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n==null?"":n+"")}function Gu(e,t){return qu(e,t)}const On=new Map;function qu(e,{target:t,anchor:n,props:i={},events:r,context:o,intro:s=!0}){yu();var a=new Set,c=h=>{for(var f=0;f<h.length;f++){var g=h[f];if(!a.has(g)){a.add(g);var y=Bu(g);t.addEventListener(g,di,{passive:y});var p=On.get(g);p===void 0?(document.addEventListener(g,di,{passive:y}),On.set(g,1)):On.set(g,p+1)}}};c($o(hl)),Io.add(c);var l=void 0,u=bu(()=>{var h=n??t.appendChild(Ui());return gn(()=>{if(o){ae({});var f=Se;f.c=o}r&&(i.$$events=r),l=e(h,i)||{},o&&le()}),()=>{var y;for(var f of a){t.removeEventListener(f,di);var g=On.get(f);--g===0?(document.removeEventListener(f,di),On.delete(f)):On.set(f,g)}Io.delete(c),h!==n&&((y=h.parentNode)==null||y.removeChild(h))}});return Uu.set(l,u),l}let Uu=new WeakMap;function Ie(e,t,n=!1){var i=e,r=null,o=null,s=dt,a=n?qi:0,c=!1;const l=(h,f=!0)=>{c=!0,u(f,h)},u=(h,f)=>{s!==(s=h)&&(s?(r?yi(r):f&&(r=gn(()=>f(i))),o&&Bn(o,()=>{o=null})):(o?yi(o):f&&(o=gn(()=>f(i))),r&&Bn(r,()=>{r=null})))};ni(()=>{c=!1,t(l),c||u(null,null)},a)}function vr(e,t){return t}function Ju(e,t,n,i){for(var r=[],o=t.length,s=0;s<o;s++)ls(t[s].e,r,!0);var a=o>0&&r.length===0&&n!==null;if(a){var c=n.parentNode;pu(c),c.append(n),i.clear(),rn(e,t[0].prev,t[o-1].next)}sl(r,()=>{for(var l=0;l<o;l++){var u=t[l];a||(i.delete(u.k),rn(e,u.prev,u.next)),Bt(u.e,!a)}})}function Yt(e,t,n,i,r,o=null){var s=e,a={flags:t,items:new Map,first:null},c=(t&Ba)!==0;if(c){var l=e;s=l.appendChild(Ui())}var u=null,h=!1;ni(()=>{var f=n(),g=Fi(f)?f:f==null?[]:$o(f),y=g.length;if(!(h&&y===0)){h=y===0;{var p=Oe;ju(g,a,s,r,t,(p.f&Vt)!==0,i)}o!==null&&(y===0?u?yi(u):u=gn(()=>o(s)):u!==null&&Bn(u,()=>{u=null})),n()}})}function ju(e,t,n,i,r,o,s,a){var O,w,P,I;var c=(r&uu)!==0,l=(r&(rs|os))!==0,u=e.length,h=t.items,f=t.first,g=f,y,p=null,N,x=[],m=[],b,E,S,C;if(c)for(C=0;C<u;C+=1)b=e[C],E=s(b,C),S=h.get(E),S!==void 0&&((O=S.a)==null||O.measure(),(N??(N=new Set)).add(S));for(C=0;C<u;C+=1){if(b=e[C],E=s(b,C),S=h.get(E),S===void 0){var k=g?g.e.nodes_start:n;p=$u(k,t,p,p===null?t.first:p.next,b,E,C,i,r),h.set(E,p),x=[],m=[],g=p.next;continue}if(l&&Qu(S,b,C,r),S.e.f&Vt&&(yi(S.e),c&&((w=S.a)==null||w.unfix(),(N??(N=new Set)).delete(S))),S!==g){if(y!==void 0&&y.has(S)){if(x.length<m.length){var M=m[0],A;p=M.prev;var T=x[0],L=x[x.length-1];for(A=0;A<x.length;A+=1)Zs(x[A],M,n);for(A=0;A<m.length;A+=1)y.delete(m[A]);rn(t,T.prev,L.next),rn(t,p,T),rn(t,L,M),g=M,p=L,C-=1,x=[],m=[]}else y.delete(S),Zs(S,g,n),rn(t,S.prev,S.next),rn(t,S,p===null?t.first:p.next),rn(t,p,S),p=S;continue}for(x=[],m=[];g!==null&&g.k!==E;)(o||!(g.e.f&Vt))&&(y??(y=new Set)).add(g),m.push(g),g=g.next;if(g===null)continue;S=g}x.push(S),p=S,g=S.next}if(g!==null||y!==void 0){for(var V=y===void 0?[]:$o(y);g!==null;)(o||!(g.e.f&Vt))&&V.push(g),g=g.next;var H=V.length;if(H>0){var _=r&Ba&&u===0?n:null;if(c){for(C=0;C<H;C+=1)(P=V[C].a)==null||P.measure();for(C=0;C<H;C+=1)(I=V[C].a)==null||I.fix()}Ju(t,V,_,h)}}c&&Zr(()=>{var z;if(N!==void 0)for(S of N)(z=S.a)==null||z.apply()}),ye.first=t.first&&t.first.e,ye.last=p&&p.e}function Qu(e,t,n,i){i&rs&&Co(e.v,t),i&os?Co(e.i,n):e.i=n}function $u(e,t,n,i,r,o,s,a,c,l){var u=(c&rs)!==0,h=(c&du)===0,f=u?h?Kr(r):ct(r):r,g=c&os?ct(s):s,y={i:g,v:f,k:o,a:null,e:null,prev:n,next:i};try{return y.e=gn(()=>a(e,f,g),ss),y.e.prev=n&&n.e,y.e.next=i&&i.e,n===null?t.first=y:(n.next=y,n.e.next=y.e),i!==null&&(i.prev=y,i.e.prev=y.e),y}finally{}}function Zs(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==i;){var s=Fr(o);r.before(o),o=s}}function rn(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function ed(e,t,n,i,r){var o=e,s="",a;ni(()=>{s!==(s=t()??"")&&(a!==void 0&&(Bt(a),a=void 0),s!==""&&(a=gn(()=>{var c=s+"",l=ds(c);vn(Lt(l),l.lastChild),o.before(l)})))})}function Ke(e,t,n,i,r){var a;var o=(a=t.$$slots)==null?void 0:a[n],s=!1;o===!0&&(o=t[n==="default"?"children":n],s=!0),o===void 0||o(e,s?()=>i:i)}function td(e){const t={};e.children&&(t.default=!0);for(const n in e.$$slots)t[n]=!0;return t}function vl(e,t,n){var i=e,r,o;ni(()=>{r!==(r=t())&&(o&&(Bn(o),o=null),r&&(o=gn(()=>n(i,r))))},qi)}function nd(e,t,n,i,r,o){var s,a,c=null,l=e,u;ni(()=>{const h=t()||null;var f=Za;h!==s&&(u&&(h===null?Bn(u,()=>{u=null,a=null}):h===a?yi(u):Bt(u)),h&&h!==a&&(u=gn(()=>{if(c=document.createElementNS(f,h),vn(c,c),i){var g=c.appendChild(Ui());i(c,g)}ye.nodes_end=c,l.before(c)})),s=h,s&&(a=s))},qi)}function lt(e,t,n){mt(()=>{var i=zt(()=>t(e,n==null?void 0:n())||{});if(n&&(i!=null&&i.update)){var r=!1,o={};ti(()=>{var s=n();Y(s),r&&ns(o,s)&&(o=s,i.update(s))}),r=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function ml(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=ml(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function id(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=ml(e))&&(i&&(i+=" "),i+=t);return i}function Ot(e){return typeof e=="object"?id(e):e??""}function rd(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function $(e,t,n,i){var r=e.__attributes??(e.__attributes={});r[t]!==(r[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[$c]=n),n==null?e.removeAttribute(t):typeof n!="string"&&fs(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function yl(e,t,n){var i=Oe,r=ye;Kt(null),bt(null);try{(Oo.has(e.nodeName)||customElements.get(e.tagName.toLowerCase())?fs(e).includes(t):n&&typeof n=="object")?e[t]=n:$(e,t,n==null?n:String(n))}finally{Kt(i),bt(r)}}function _i(e,t,n,i,r=!1,o=!1,s=!1){var a=t||{},c=e.tagName==="OPTION";for(var l in t)l in n||(n[l]=null);n.class&&(n.class=Ot(n.class)),i!==void 0&&(n.class=n.class?n.class+" "+i:i);var u=fs(e),h=e.__attributes??(e.__attributes={});for(const m in n){let b=n[m];if(c&&m==="value"&&b==null){e.value=e.__value="",a[m]=b;continue}var f=a[m];if(b!==f){a[m]=b;var g=m[0]+m[1];if(g!=="$$"){if(g==="on"){const E={},S="$$"+m;let C=m.slice(2);var y=Vu(C);if(Ru(C)&&(C=C.slice(0,-7),E.capture=!0),!y&&f){if(b!=null)continue;e.removeEventListener(C,a[S],E),a[S]=null}if(b!=null)if(y)e[`__${C}`]=b,Pn([C]);else{let k=function(M){a[m].call(this,M)};var x=k;a[S]=gl(C,e,k,E)}else y&&(e[`__${C}`]=void 0)}else if(m==="style"&&b!=null)e.style.cssText=b+"";else if(m==="autofocus")Ku(e,!!b);else if(m==="__value"||m==="value"&&b!=null)e.value=e[m]=e.__value=b;else if(m==="selected"&&c)rd(e,b);else{var p=m;r||(p=Yu(p));var N=p==="defaultValue"||p==="defaultChecked";if(b==null&&!o&&!N)if(h[m]=null,p==="value"||p==="checked"){let E=e;if(p==="value"){let S=E.defaultValue;E.removeAttribute(p),E.defaultValue=S}else{let S=E.defaultChecked;E.removeAttribute(p),E.defaultChecked=S}}else e.removeAttribute(m);else N||u.includes(p)&&(o||typeof b!="string")?e[p]=b:typeof b!="function"&&$(e,p,b)}m==="style"&&"__styles"in e&&(e.__styles={})}}}return a}var Oo=new Map;function fs(e){var t=Oo.get(e.nodeName);if(t)return t;Oo.set(e.nodeName,t=[]);for(var n,i=e,r=Element.prototype;r!==i;){n=La(i);for(var o in n)n[o].set&&t.push(o);i=es(i)}return t}function An(e,t,n){var i=e.__className,r=pl(t,n);(i!==r||ss)&&(r===""?e.removeAttribute("class"):e.setAttribute("class",r),e.__className=r)}function hs(e,t,n){var i=e.__className,r=pl(t,n);(i!==r||ss)&&(t==null&&!n?e.removeAttribute("class"):e.className=r,e.__className=r)}function pl(e,t){return(e??"")+(t?" "+t:"")}function Be(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function Ve(e,t,n,i){var r=e.__styles??(e.__styles={});r[t]!==n&&(r[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}function Ho(e,t,n=t){var i=qr();Zu(e,"input",r=>{var o=r?e.defaultValue:e.value;if(o=fo(e)?ho(o):o,n(o),i&&o!==(o=t())){var s=e.selectionStart,a=e.selectionEnd;e.value=o??"",a!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(a,e.value.length))}}),zt(t)==null&&e.value&&n(fo(e)?ho(e.value):e.value),ti(()=>{var r=t();fo(e)&&r===ho(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function fo(e){var t=e.type;return t==="number"||t==="range"}function ho(e){return e===""?null:+e}var an,Wn,Mi,Vr,_l;const Xr=class Xr{constructor(t){Re(this,Vr);Re(this,an,new WeakMap);Re(this,Wn);Re(this,Mi);uo(this,Mi,t)}observe(t,n){var i=fe(this,an).get(t)||new Set;return i.add(n),fe(this,an).set(t,i),kt(this,Vr,_l).call(this).observe(t,fe(this,Mi)),()=>{var r=fe(this,an).get(t);r.delete(n),r.size===0&&(fe(this,an).delete(t),fe(this,Wn).unobserve(t))}}};an=new WeakMap,Wn=new WeakMap,Mi=new WeakMap,Vr=new WeakSet,_l=function(){return fe(this,Wn)??uo(this,Wn,new ResizeObserver(t=>{for(var n of t){Xr.entries.set(n.target,n);for(var i of fe(this,an).get(n.target)||[])i(n)}}))},Xs(Xr,"entries",new WeakMap);let Do=Xr;var od=new Do({box:"border-box"});function kr(e,t,n){var i=od.observe(e,()=>n(e[t]));mt(()=>(zt(()=>n(e[t])),i))}function Gs(e,t){return e===t||(e==null?void 0:e[un])===t}function ji(e={},t,n,i){return mt(()=>{var r,o;return ti(()=>{r=o,o=[],zt(()=>{e!==n(...o)&&(t(e,...o),r&&Gs(n(...r),e)&&t(null,...r))})}),()=>{Zr(()=>{o&&Gs(n(...o),e)&&t(null,...o)})}}),e}function he(e=!1){const t=Se,n=t.l.u;if(!n)return;let i=()=>Y(t.s);if(e){let r=0,o={};const s=At(()=>{let a=!1;const c=t.s;for(const l in c)c[l]!==o[l]&&(o[l]=c[l],a=!0);return a&&r++,r});i=()=>d(s)}n.b.length&&xu(()=>{qs(t,i),wr(n.b)}),No(()=>{const r=zt(()=>n.m.map(Uc));return()=>{for(const o of r)typeof o=="function"&&o()}}),n.a.length&&No(()=>{qs(t,i),wr(n.a)})}function qs(e,t){if(e.l.s)for(const n of e.l.s)d(n);t()}function sd(e){var t=ct(0);return function(){return arguments.length===1?(D(t,d(t)+1),arguments[0]):(d(t),e())}}function be(e,t){var o;var n=(o=e.$$events)==null?void 0:o[t.type],i=Fi(n)?n.slice():n==null?[]:[n];for(var r of i)r.call(this,t)}function gs(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Jt;const i=zt(()=>e.subscribe(t,n));return i.unsubscribe?()=>i.unsubscribe():i}let sr=!1;function Z(e,t,n){const i=n[t]??(n[t]={store:null,source:Kr(void 0),unsubscribe:Jt});if(i.store!==e)if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=Jt;else{var r=!0;i.unsubscribe=gs(e,o=>{r?i.source.v=o:D(i.source,o)}),r=!1}return d(i.source)}function ad(e,t,n){let i=n[t];return i&&i.store!==e&&(i.unsubscribe(),i.unsubscribe=Jt),e}function wi(e,t){return e.set(t),t}function qe(){const e={};return tl(()=>{for(var t in e)e[t].unsubscribe()}),e}function ld(e){var t=sr;try{return sr=!1,[e(),sr]}finally{sr=t}}const cd={get(e,t){if(!e.exclude.includes(t))return d(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,n){return t in e.special||(e.special[t]=v({get[t](){return e.props[t]}},t,Ka)),e.special[t](n),Ks(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),Ks(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Pe(e,t){return new Proxy({props:e,exclude:t,special:{},version:ct(0)},cd)}const ud={get(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(li(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i)return i[t]}},set(e,t,n){let i=e.props.length;for(;i--;){let r=e.props[i];li(r)&&(r=r());const o=cn(r,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(li(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i){const r=cn(i,t);return r&&!r.configurable&&(r.configurable=!0),r}}},has(e,t){if(t===un||t===Ya)return!1;for(let n of e.props)if(li(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){li(n)&&(n=n());for(const i in n)t.includes(i)||t.push(i)}return t}};function pt(...e){return new Proxy({props:e},ud)}function Us(e){for(var t=ye,n=ye;t!==null&&!(t.f&(It|Gi));)t=t.parent;try{return bt(t),e()}finally{bt(n)}}function v(e,t,n,i){var k;var r=(n&fu)!==0,o=!$n||(n&hu)!==0,s=(n&gu)!==0,a=(n&vu)!==0,c=!1,l;s?[l,c]=ld(()=>e[t]):l=e[t];var u=un in e||Ya in e,h=((k=cn(e,t))==null?void 0:k.set)??(u&&s&&t in e?M=>e[t]=M:void 0),f=i,g=!0,y=!1,p=()=>(y=!0,g&&(g=!1,a?f=zt(i):f=i),f);l===void 0&&i!==void 0&&(h&&o&&ru(),l=p(),h&&h(l));var N;if(o)N=()=>{var M=e[t];return M===void 0?p():(g=!0,y=!1,M)};else{var x=Us(()=>(r?At:re)(()=>e[t]));x.f|=jc,N=()=>{var M=d(x);return M!==void 0&&(f=void 0),M===void 0?f:M}}if(!(n&Ka))return N;if(h){var m=e.$$legacy;return function(M,A){return arguments.length>0?((!o||!A||m||c)&&h(A?N():M),M):N()}}var b=!1,E=!1,S=Kr(l),C=Us(()=>At(()=>{var M=N(),A=d(S);return b?(b=!1,E=!0,A):(E=!1,S.v=M)}));return r||(C.equals=is),function(M,A){if(arguments.length>0){const T=A?d(C):o&&s?Le(M):M;return C.equals(T)||(b=!0,D(S,T),y&&f!==void 0&&(f=T),zt(()=>d(C))),M}return d(C)}}function zn(e){Se===null&&Gr(),$n&&Se.l!==null?fd(Se).m.push(e):No(()=>{const t=zt(e);if(typeof t=="function")return t})}function wl(e){Se===null&&Gr(),zn(()=>()=>zt(e))}function dd(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}function jr(){const e=Se;return e===null&&Gr(),(t,n,i)=>{var o;const r=(o=e.s.$$events)==null?void 0:o[t];if(r){const s=Fi(r)?r.slice():[r],a=dd(t,n,i);for(const c of s)c.call(e.x,a);return!a.defaultPrevented}return!0}}function fd(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const hd="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(hd);cu();const Hn=[];function xt(e,t){return{subscribe:ne(e,t).subscribe}}function ne(e,t=Jt){let n=null;const i=new Set;function r(a){if(ns(e,a)&&(e=a,n)){const c=!Hn.length;for(const l of i)l[1](),Hn.push(l,e);if(c){for(let l=0;l<Hn.length;l+=2)Hn[l][0](Hn[l+1]);Hn.length=0}}}function o(a){r(a(e))}function s(a,c=Jt){const l=[a,c];return i.add(l),i.size===1&&(n=t(r,o)||Jt),a(e),()=>{i.delete(l),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:s}}function En(e,t,n){const i=!Array.isArray(e),r=i?[e]:e;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return xt(n,(s,a)=>{let c=!1;const l=[];let u=0,h=Jt;const f=()=>{if(u)return;h();const y=t(i?l[0]:l,s,a);o?s(y):h=typeof y=="function"?y:Jt},g=r.map((y,p)=>gs(y,N=>{l[p]=N,u&=~(1<<p),c&&f()},()=>{u|=1<<p}));return c=!0,f(),function(){wr(g),h(),c=!1}})}function R(e){let t;return gs(e,n=>t=n)(),t}function st(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=st(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var gd={value:()=>{}};function Qr(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new mr(n)}function mr(e){this._=e}function vd(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}mr.prototype=Qr.prototype={constructor:mr,on:function(e,t){var n=this._,i=vd(e+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(e=i[o]).type)&&(r=md(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=i[o]).type)n[r]=Js(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Js(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new mr(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function md(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Js(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=gd,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ro="http://www.w3.org/1999/xhtml";const js={svg:"http://www.w3.org/2000/svg",xhtml:Ro,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $r(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),js.hasOwnProperty(t)?{space:js[t],local:e}:e}function yd(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ro&&t.documentElement.namespaceURI===Ro?t.createElement(e):t.createElementNS(n,e)}}function pd(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function xl(e){var t=$r(e);return(t.local?pd:yd)(t)}function _d(){}function vs(e){return e==null?_d:function(){return this.querySelector(e)}}function wd(e){typeof e!="function"&&(e=vs(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=new Array(s),c,l,u=0;u<s;++u)(c=o[u])&&(l=e.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new _t(i,this._parents)}function xd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function bd(){return[]}function bl(e){return e==null?bd:function(){return this.querySelectorAll(e)}}function Ed(e){return function(){return xd(e.apply(this,arguments))}}function Sd(e){typeof e=="function"?e=Ed(e):e=bl(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var s=t[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(i.push(e.call(c,c.__data__,l,s)),r.push(c));return new _t(i,r)}function El(e){return function(){return this.matches(e)}}function Sl(e){return function(t){return t.matches(e)}}var kd=Array.prototype.find;function Cd(e){return function(){return kd.call(this.children,e)}}function Nd(){return this.firstElementChild}function Md(e){return this.select(e==null?Nd:Cd(typeof e=="function"?e:Sl(e)))}var Pd=Array.prototype.filter;function Ad(){return Array.from(this.children)}function zd(e){return function(){return Pd.call(this.children,e)}}function Id(e){return this.selectAll(e==null?Ad:zd(typeof e=="function"?e:Sl(e)))}function Td(e){typeof e!="function"&&(e=El(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],c,l=0;l<s;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&a.push(c);return new _t(i,this._parents)}function kl(e){return new Array(e.length)}function Od(){return new _t(this._enter||this._groups.map(kl),this._parents)}function Cr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Cr.prototype={constructor:Cr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Hd(e){return function(){return e}}function Dd(e,t,n,i,r,o){for(var s=0,a,c=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):n[s]=new Cr(e,o[s]);for(;s<c;++s)(a=t[s])&&(r[s]=a)}function Rd(e,t,n,i,r,o,s){var a,c,l=new Map,u=t.length,h=o.length,f=new Array(u),g;for(a=0;a<u;++a)(c=t[a])&&(f[a]=g=s.call(c,c.__data__,a,t)+"",l.has(g)?r[a]=c:l.set(g,c));for(a=0;a<h;++a)g=s.call(e,o[a],a,o)+"",(c=l.get(g))?(i[a]=c,c.__data__=o[a],l.delete(g)):n[a]=new Cr(e,o[a]);for(a=0;a<u;++a)(c=t[a])&&l.get(f[a])===c&&(r[a]=c)}function Ld(e){return e.__data__}function Vd(e,t){if(!arguments.length)return Array.from(this,Ld);var n=t?Rd:Dd,i=this._parents,r=this._groups;typeof e!="function"&&(e=Hd(e));for(var o=r.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=i[l],h=r[l],f=h.length,g=Xd(e.call(u,u&&u.__data__,l,i)),y=g.length,p=a[l]=new Array(y),N=s[l]=new Array(y),x=c[l]=new Array(f);n(u,h,p,N,x,g,t);for(var m=0,b=0,E,S;m<y;++m)if(E=p[m]){for(m>=b&&(b=m+1);!(S=N[b])&&++b<y;);E._next=S||null}}return s=new _t(s,i),s._enter=a,s._exit=c,s}function Xd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Yd(){return new _t(this._exit||this._groups.map(kl),this._parents)}function Wd(e,t,n){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function Bd(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),c=0;c<s;++c)for(var l=n[c],u=i[c],h=l.length,f=a[c]=new Array(h),g,y=0;y<h;++y)(g=l[y]||u[y])&&(f[y]=g);for(;c<r;++c)a[c]=n[c];return new _t(a,this._parents)}function Kd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Fd(e){e||(e=Zd);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,c=r[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(t)}return new _t(r,this._parents).order()}function Zd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Gd(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function qd(){return Array.from(this)}function Ud(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function Jd(){let e=0;for(const t of this)++e;return e}function jd(){return!this.node()}function Qd(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&e.call(a,a.__data__,o,r);return this}function $d(e){return function(){this.removeAttribute(e)}}function ef(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tf(e,t){return function(){this.setAttribute(e,t)}}function nf(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function rf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function of(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function sf(e,t){var n=$r(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?ef:$d:typeof t=="function"?n.local?of:rf:n.local?nf:tf)(n,t))}function Cl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function af(e){return function(){this.style.removeProperty(e)}}function lf(e,t,n){return function(){this.style.setProperty(e,t,n)}}function cf(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function uf(e,t,n){return arguments.length>1?this.each((t==null?af:typeof t=="function"?cf:lf)(e,t,n??"")):Fn(this.node(),e)}function Fn(e,t){return e.style.getPropertyValue(t)||Cl(e).getComputedStyle(e,null).getPropertyValue(t)}function df(e){return function(){delete this[e]}}function ff(e,t){return function(){this[e]=t}}function hf(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function gf(e,t){return arguments.length>1?this.each((t==null?df:typeof t=="function"?hf:ff)(e,t)):this.node()[e]}function Nl(e){return e.trim().split(/^|\s+/)}function ms(e){return e.classList||new Ml(e)}function Ml(e){this._node=e,this._names=Nl(e.getAttribute("class")||"")}Ml.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Pl(e,t){for(var n=ms(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Al(e,t){for(var n=ms(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function vf(e){return function(){Pl(this,e)}}function mf(e){return function(){Al(this,e)}}function yf(e,t){return function(){(t.apply(this,arguments)?Pl:Al)(this,e)}}function pf(e,t){var n=Nl(e+"");if(arguments.length<2){for(var i=ms(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?yf:t?vf:mf)(n,t))}function _f(){this.textContent=""}function wf(e){return function(){this.textContent=e}}function xf(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function bf(e){return arguments.length?this.each(e==null?_f:(typeof e=="function"?xf:wf)(e)):this.node().textContent}function Ef(){this.innerHTML=""}function Sf(e){return function(){this.innerHTML=e}}function kf(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Cf(e){return arguments.length?this.each(e==null?Ef:(typeof e=="function"?kf:Sf)(e)):this.node().innerHTML}function Nf(){this.nextSibling&&this.parentNode.appendChild(this)}function Mf(){return this.each(Nf)}function Pf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Af(){return this.each(Pf)}function zf(e){var t=typeof e=="function"?e:xl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function If(){return null}function Tf(e,t){var n=typeof e=="function"?e:xl(e),i=t==null?If:typeof t=="function"?t:vs(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Of(){var e=this.parentNode;e&&e.removeChild(this)}function Hf(){return this.each(Of)}function Df(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Lf(e){return this.select(e?Rf:Df)}function Vf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Xf(e){return function(t){e.call(this,t,this.__data__)}}function Yf(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function Wf(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function Bf(e,t,n){return function(){var i=this.__on,r,o=Xf(t);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Kf(e,t,n){var i=Yf(e+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(r=0,u=a[c];r<o;++r)if((s=i[r]).type===u.type&&s.name===u.name)return u.value}return}for(a=t?Bf:Wf,r=0;r<o;++r)this.each(a(i[r],t,n));return this}function zl(e,t,n){var i=Cl(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Ff(e,t){return function(){return zl(this,e,t)}}function Zf(e,t){return function(){return zl(this,e,t.apply(this,arguments))}}function Gf(e,t){return this.each((typeof t=="function"?Zf:Ff)(e,t))}function*qf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var Il=[null];function _t(e,t){this._groups=e,this._parents=t}function Qi(){return new _t([[document.documentElement]],Il)}function Uf(){return this}_t.prototype=Qi.prototype={constructor:_t,select:wd,selectAll:Sd,selectChild:Md,selectChildren:Id,filter:Td,data:Vd,enter:Od,exit:Yd,join:Wd,merge:Bd,selection:Uf,order:Kd,sort:Fd,call:Gd,nodes:qd,node:Ud,size:Jd,empty:jd,each:Qd,attr:sf,style:uf,property:gf,classed:pf,text:bf,html:Cf,raise:Mf,lower:Af,append:zf,insert:Tf,remove:Hf,clone:Lf,datum:Vf,on:Kf,dispatch:Gf,[Symbol.iterator]:qf};function yt(e){return typeof e=="string"?new _t([[document.querySelector(e)]],[document.documentElement]):new _t([[e]],Il)}function Jf(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ct(e,t){if(e=Jf(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const jf={passive:!1},xi={capture:!0,passive:!1};function go(e){e.stopImmediatePropagation()}function Ln(e){e.preventDefault(),e.stopImmediatePropagation()}function Tl(e){var t=e.document.documentElement,n=yt(e).on("dragstart.drag",Ln,xi);"onselectstart"in t?n.on("selectstart.drag",Ln,xi):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ol(e,t){var n=e.document.documentElement,i=yt(e).on("dragstart.drag",null);t&&(i.on("click.drag",Ln,xi),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ar=e=>()=>e;function Lo(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Lo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Qf(e){return!e.ctrlKey&&!e.button}function $f(){return this.parentNode}function eh(e,t){return t??{x:e.x,y:e.y}}function th(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hl(){var e=Qf,t=$f,n=eh,i=th,r={},o=Qr("start","drag","end"),s=0,a,c,l,u,h=0;function f(E){E.on("mousedown.drag",g).filter(i).on("touchstart.drag",N).on("touchmove.drag",x,jf).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(E,S){if(!(u||!e.call(this,E,S))){var C=b(this,t.call(this,E,S),E,S,"mouse");C&&(yt(E.view).on("mousemove.drag",y,xi).on("mouseup.drag",p,xi),Tl(E.view),go(E),l=!1,a=E.clientX,c=E.clientY,C("start",E))}}function y(E){if(Ln(E),!l){var S=E.clientX-a,C=E.clientY-c;l=S*S+C*C>h}r.mouse("drag",E)}function p(E){yt(E.view).on("mousemove.drag mouseup.drag",null),Ol(E.view,l),Ln(E),r.mouse("end",E)}function N(E,S){if(e.call(this,E,S)){var C=E.changedTouches,k=t.call(this,E,S),M=C.length,A,T;for(A=0;A<M;++A)(T=b(this,k,E,S,C[A].identifier,C[A]))&&(go(E),T("start",E,C[A]))}}function x(E){var S=E.changedTouches,C=S.length,k,M;for(k=0;k<C;++k)(M=r[S[k].identifier])&&(Ln(E),M("drag",E,S[k]))}function m(E){var S=E.changedTouches,C=S.length,k,M;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),k=0;k<C;++k)(M=r[S[k].identifier])&&(go(E),M("end",E,S[k]))}function b(E,S,C,k,M,A){var T=o.copy(),L=Ct(A||C,S),V,H,_;if((_=n.call(E,new Lo("beforestart",{sourceEvent:C,target:f,identifier:M,active:s,x:L[0],y:L[1],dx:0,dy:0,dispatch:T}),k))!=null)return V=_.x-L[0]||0,H=_.y-L[1]||0,function O(w,P,I){var z=L,X;switch(w){case"start":r[M]=O,X=s++;break;case"end":delete r[M],--s;case"drag":L=Ct(I||P,S),X=s;break}T.call(w,E,new Lo(w,{sourceEvent:P,subject:_,target:f,identifier:M,active:X,x:L[0]+V,y:L[1]+H,dx:L[0]-z[0],dy:L[1]-z[1],dispatch:T}),k)}}return f.filter=function(E){return arguments.length?(e=typeof E=="function"?E:ar(!!E),f):e},f.container=function(E){return arguments.length?(t=typeof E=="function"?E:ar(E),f):t},f.subject=function(E){return arguments.length?(n=typeof E=="function"?E:ar(E),f):n},f.touchable=function(E){return arguments.length?(i=typeof E=="function"?E:ar(!!E),f):i},f.on=function(){var E=o.on.apply(o,arguments);return E===o?f:E},f.clickDistance=function(E){return arguments.length?(h=(E=+E)*E,f):Math.sqrt(h)},f}function ys(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Dl(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function $i(){}var bi=.7,Nr=1/bi,Vn="\\s*([+-]?\\d+)\\s*",Ei="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nh=/^#([0-9a-f]{3,8})$/,ih=new RegExp(`^rgb\\(${Vn},${Vn},${Vn}\\)$`),rh=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),oh=new RegExp(`^rgba\\(${Vn},${Vn},${Vn},${Ei}\\)$`),sh=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${Ei}\\)$`),ah=new RegExp(`^hsl\\(${Ei},${Wt},${Wt}\\)$`),lh=new RegExp(`^hsla\\(${Ei},${Wt},${Wt},${Ei}\\)$`),Qs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ys($i,Si,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$s,formatHex:$s,formatHex8:ch,formatHsl:uh,formatRgb:ea,toString:ea});function $s(){return this.rgb().formatHex()}function ch(){return this.rgb().formatHex8()}function uh(){return Rl(this).formatHsl()}function ea(){return this.rgb().formatRgb()}function Si(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ta(t):n===3?new ht(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?lr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?lr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ih.exec(e))?new ht(t[1],t[2],t[3],1):(t=rh.exec(e))?new ht(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=oh.exec(e))?lr(t[1],t[2],t[3],t[4]):(t=sh.exec(e))?lr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ah.exec(e))?ra(t[1],t[2]/100,t[3]/100,1):(t=lh.exec(e))?ra(t[1],t[2]/100,t[3]/100,t[4]):Qs.hasOwnProperty(e)?ta(Qs[e]):e==="transparent"?new ht(NaN,NaN,NaN,0):null}function ta(e){return new ht(e>>16&255,e>>8&255,e&255,1)}function lr(e,t,n,i){return i<=0&&(e=t=n=NaN),new ht(e,t,n,i)}function dh(e){return e instanceof $i||(e=Si(e)),e?(e=e.rgb(),new ht(e.r,e.g,e.b,e.opacity)):new ht}function Vo(e,t,n,i){return arguments.length===1?dh(e):new ht(e,t,n,i??1)}function ht(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}ys(ht,Vo,Dl($i,{brighter(e){return e=e==null?Nr:Math.pow(Nr,e),new ht(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?bi:Math.pow(bi,e),new ht(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ht(Sn(this.r),Sn(this.g),Sn(this.b),Mr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:na,formatHex:na,formatHex8:fh,formatRgb:ia,toString:ia}));function na(){return`#${xn(this.r)}${xn(this.g)}${xn(this.b)}`}function fh(){return`#${xn(this.r)}${xn(this.g)}${xn(this.b)}${xn((isNaN(this.opacity)?1:this.opacity)*255)}`}function ia(){const e=Mr(this.opacity);return`${e===1?"rgb(":"rgba("}${Sn(this.r)}, ${Sn(this.g)}, ${Sn(this.b)}${e===1?")":`, ${e})`}`}function Mr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Sn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xn(e){return e=Sn(e),(e<16?"0":"")+e.toString(16)}function ra(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Nt(e,t,n,i)}function Rl(e){if(e instanceof Nt)return new Nt(e.h,e.s,e.l,e.opacity);if(e instanceof $i||(e=Si(e)),!e)return new Nt;if(e instanceof Nt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,c=(o+r)/2;return a?(t===o?s=(n-i)/a+(n<i)*6:n===o?s=(i-t)/a+2:s=(t-n)/a+4,a/=c<.5?o+r:2-o-r,s*=60):a=c>0&&c<1?0:s,new Nt(s,a,c,e.opacity)}function hh(e,t,n,i){return arguments.length===1?Rl(e):new Nt(e,t,n,i??1)}function Nt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}ys(Nt,hh,Dl($i,{brighter(e){return e=e==null?Nr:Math.pow(Nr,e),new Nt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?bi:Math.pow(bi,e),new Nt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new ht(vo(e>=240?e-240:e+120,r,i),vo(e,r,i),vo(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Nt(oa(this.h),cr(this.s),cr(this.l),Mr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mr(this.opacity);return`${e===1?"hsl(":"hsla("}${oa(this.h)}, ${cr(this.s)*100}%, ${cr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function oa(e){return e=(e||0)%360,e<0?e+360:e}function cr(e){return Math.max(0,Math.min(1,e||0))}function vo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ll=e=>()=>e;function gh(e,t){return function(n){return e+n*t}}function vh(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function mh(e){return(e=+e)==1?Vl:function(t,n){return n-t?vh(t,n,e):Ll(isNaN(t)?n:t)}}function Vl(e,t){var n=t-e;return n?gh(e,n):Ll(isNaN(e)?t:e)}const sa=function e(t){var n=mh(t);function i(r,o){var s=n((r=Vo(r)).r,(o=Vo(o)).r),a=n(r.g,o.g),c=n(r.b,o.b),l=Vl(r.opacity,o.opacity);return function(u){return r.r=s(u),r.g=a(u),r.b=c(u),r.opacity=l(u),r+""}}return i.gamma=e,i}(1);function on(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Xo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mo=new RegExp(Xo.source,"g");function yh(e){return function(){return e}}function ph(e){return function(t){return e(t)+""}}function _h(e,t){var n=Xo.lastIndex=mo.lastIndex=0,i,r,o,s=-1,a=[],c=[];for(e=e+"",t=t+"";(i=Xo.exec(e))&&(r=mo.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,c.push({i:s,x:on(i,r)})),n=mo.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?ph(c[0].x):yh(t):(t=c.length,function(l){for(var u=0,h;u<t;++u)a[(h=c[u]).i]=h.x(l);return a.join("")})}var aa=180/Math.PI,Yo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xl(e,t,n,i,r,o){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,c/=a),e*i<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*aa,skewX:Math.atan(c)*aa,scaleX:s,scaleY:a}}var ur;function wh(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Yo:Xl(t.a,t.b,t.c,t.d,t.e,t.f)}function xh(e){return e==null||(ur||(ur=document.createElementNS("http://www.w3.org/2000/svg","g")),ur.setAttribute("transform",e),!(e=ur.transform.baseVal.consolidate()))?Yo:(e=e.matrix,Xl(e.a,e.b,e.c,e.d,e.e,e.f))}function Yl(e,t,n,i){function r(l){return l.length?l.pop()+" ":""}function o(l,u,h,f,g,y){if(l!==h||u!==f){var p=g.push("translate(",null,t,null,n);y.push({i:p-4,x:on(l,h)},{i:p-2,x:on(u,f)})}else(h||f)&&g.push("translate("+h+t+f+n)}function s(l,u,h,f){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),f.push({i:h.push(r(h)+"rotate(",null,i)-2,x:on(l,u)})):u&&h.push(r(h)+"rotate("+u+i)}function a(l,u,h,f){l!==u?f.push({i:h.push(r(h)+"skewX(",null,i)-2,x:on(l,u)}):u&&h.push(r(h)+"skewX("+u+i)}function c(l,u,h,f,g,y){if(l!==h||u!==f){var p=g.push(r(g)+"scale(",null,",",null,")");y.push({i:p-4,x:on(l,h)},{i:p-2,x:on(u,f)})}else(h!==1||f!==1)&&g.push(r(g)+"scale("+h+","+f+")")}return function(l,u){var h=[],f=[];return l=e(l),u=e(u),o(l.translateX,l.translateY,u.translateX,u.translateY,h,f),s(l.rotate,u.rotate,h,f),a(l.skewX,u.skewX,h,f),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,h,f),l=u=null,function(g){for(var y=-1,p=f.length,N;++y<p;)h[(N=f[y]).i]=N.x(g);return h.join("")}}}var bh=Yl(wh,"px, ","px)","deg)"),Eh=Yl(xh,", ",")",")"),Sh=1e-12;function la(e){return((e=Math.exp(e))+1/e)/2}function kh(e){return((e=Math.exp(e))-1/e)/2}function Ch(e){return((e=Math.exp(2*e))-1)/(e+1)}const Nh=function e(t,n,i){function r(o,s){var a=o[0],c=o[1],l=o[2],u=s[0],h=s[1],f=s[2],g=u-a,y=h-c,p=g*g+y*y,N,x;if(p<Sh)x=Math.log(f/l)/t,N=function(k){return[a+k*g,c+k*y,l*Math.exp(t*k*x)]};else{var m=Math.sqrt(p),b=(f*f-l*l+i*p)/(2*l*n*m),E=(f*f-l*l-i*p)/(2*f*n*m),S=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(E*E+1)-E);x=(C-S)/t,N=function(k){var M=k*x,A=la(S),T=l/(n*m)*(A*Ch(t*M+S)-kh(S));return[a+T*g,c+T*y,l*A/la(t*M+S)]}}return N.duration=x*1e3*t/Math.SQRT2,N}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s,c=a*a;return e(s,a,c)},r}(Math.SQRT2,2,4);var Zn=0,fi=0,ci=0,Wl=1e3,Pr,hi,Ar=0,kn=0,eo=0,ki=typeof performance=="object"&&performance.now?performance:Date,Bl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ps(){return kn||(Bl(Mh),kn=ki.now()+eo)}function Mh(){kn=0}function zr(){this._call=this._time=this._next=null}zr.prototype=Kl.prototype={constructor:zr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ps():+n)+(t==null?0:+t),!this._next&&hi!==this&&(hi?hi._next=this:Pr=this,hi=this),this._call=e,this._time=n,Wo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wo())}};function Kl(e,t,n){var i=new zr;return i.restart(e,t,n),i}function Ph(){ps(),++Zn;for(var e=Pr,t;e;)(t=kn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Zn}function ca(){kn=(Ar=ki.now())+eo,Zn=fi=0;try{Ph()}finally{Zn=0,zh(),kn=0}}function Ah(){var e=ki.now(),t=e-Ar;t>Wl&&(eo-=t,Ar=e)}function zh(){for(var e,t=Pr,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Pr=n);hi=e,Wo(i)}function Wo(e){if(!Zn){fi&&(fi=clearTimeout(fi));var t=e-kn;t>24?(e<1/0&&(fi=setTimeout(ca,e-ki.now()-eo)),ci&&(ci=clearInterval(ci))):(ci||(Ar=ki.now(),ci=setInterval(Ah,Wl)),Zn=1,Bl(ca))}}function ua(e,t,n){var i=new zr;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var Ih=Qr("start","end","cancel","interrupt"),Th=[],Fl=0,da=1,Bo=2,yr=3,fa=4,Ko=5,pr=6;function to(e,t,n,i,r,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Oh(e,n,{name:t,index:i,group:r,on:Ih,tween:Th,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Fl})}function _s(e,t){var n=Ht(e,t);if(n.state>Fl)throw new Error("too late; already scheduled");return n}function Ft(e,t){var n=Ht(e,t);if(n.state>yr)throw new Error("too late; already running");return n}function Ht(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Oh(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Kl(o,0,n.time);function o(l){n.state=da,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var u,h,f,g;if(n.state!==da)return c();for(u in i)if(g=i[u],g.name===n.name){if(g.state===yr)return ua(s);g.state===fa?(g.state=pr,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[u]):+u<t&&(g.state=pr,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[u])}if(ua(function(){n.state===yr&&(n.state=fa,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Bo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Bo){for(n.state=yr,r=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(g=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++h]=g);r.length=h+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Ko,1),h=-1,f=r.length;++h<f;)r[h].call(e,u);n.state===Ko&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=pr,n.timer.stop(),delete i[t];for(var l in i)return;delete e.__transition}}function _r(e,t){var n=e.__transition,i,r,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((i=n[s]).name!==t){o=!1;continue}r=i.state>Bo&&i.state<Ko,i.state=pr,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]}o&&delete e.__transition}}function Hh(e){return this.each(function(){_r(this,e)})}function Dh(e,t){var n,i;return function(){var r=Ft(this,e),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function Rh(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=Ft(this,e),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:t,value:n},c=0,l=r.length;c<l;++c)if(r[c].name===t){r[c]=a;break}c===l&&r.push(a)}o.tween=r}}function Lh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Ht(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===e)return s.value;return null}return this.each((t==null?Dh:Rh)(n,e,t))}function ws(e,t,n){var i=e._id;return e.each(function(){var r=Ft(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Ht(r,i).value[t]}}function Zl(e,t){var n;return(typeof t=="number"?on:t instanceof Si?sa:(n=Si(t))?(t=n,sa):_h)(e,t)}function Vh(e){return function(){this.removeAttribute(e)}}function Xh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Yh(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttribute(e);return s===r?null:s===i?o:o=t(i=s,n)}}function Wh(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===i?o:o=t(i=s,n)}}function Bh(e,t,n){var i,r,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===i&&c===r?o:(r=c,o=t(i=s,a)))}}function Kh(e,t,n){var i,r,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===i&&c===r?o:(r=c,o=t(i=s,a)))}}function Fh(e,t){var n=$r(e),i=n==="transform"?Eh:Zl;return this.attrTween(e,typeof t=="function"?(n.local?Kh:Bh)(n,i,ws(this,"attr."+e,t)):t==null?(n.local?Xh:Vh)(n):(n.local?Wh:Yh)(n,i,t))}function Zh(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Gh(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function qh(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&Gh(e,o)),n}return r._value=t,r}function Uh(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&Zh(e,o)),n}return r._value=t,r}function Jh(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=$r(e);return this.tween(n,(i.local?qh:Uh)(i,t))}function jh(e,t){return function(){_s(this,e).delay=+t.apply(this,arguments)}}function Qh(e,t){return t=+t,function(){_s(this,e).delay=t}}function $h(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jh:Qh)(t,e)):Ht(this.node(),t).delay}function eg(e,t){return function(){Ft(this,e).duration=+t.apply(this,arguments)}}function tg(e,t){return t=+t,function(){Ft(this,e).duration=t}}function ng(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eg:tg)(t,e)):Ht(this.node(),t).duration}function ig(e,t){if(typeof t!="function")throw new Error;return function(){Ft(this,e).ease=t}}function rg(e){var t=this._id;return arguments.length?this.each(ig(t,e)):Ht(this.node(),t).ease}function og(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ft(this,e).ease=n}}function sg(e){if(typeof e!="function")throw new Error;return this.each(og(this._id,e))}function ag(e){typeof e!="function"&&(e=El(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],c,l=0;l<s;++l)(c=o[l])&&e.call(c,c.__data__,l,o)&&a.push(c);return new $t(i,this._parents,this._name,this._id)}function lg(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var c=t[a],l=n[a],u=c.length,h=s[a]=new Array(u),f,g=0;g<u;++g)(f=c[g]||l[g])&&(h[g]=f);for(;a<i;++a)s[a]=t[a];return new $t(s,this._parents,this._name,this._id)}function cg(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ug(e,t,n){var i,r,o=cg(t)?_s:Ft;return function(){var s=o(this,e),a=s.on;a!==i&&(r=(i=a).copy()).on(t,n),s.on=r}}function dg(e,t){var n=this._id;return arguments.length<2?Ht(this.node(),n).on.on(e):this.each(ug(n,e,t))}function fg(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function hg(){return this.on("end.remove",fg(this._id))}function gg(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vs(e));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],c=a.length,l=o[s]=new Array(c),u,h,f=0;f<c;++f)(u=a[f])&&(h=e.call(u,u.__data__,f,a))&&("__data__"in u&&(h.__data__=u.__data__),l[f]=h,to(l[f],t,n,f,l,Ht(u,n)));return new $t(o,this._parents,t,n)}function vg(e){var t=this._name,n=this._id;typeof e!="function"&&(e=bl(e));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var c=i[a],l=c.length,u,h=0;h<l;++h)if(u=c[h]){for(var f=e.call(u,u.__data__,h,c),g,y=Ht(u,n),p=0,N=f.length;p<N;++p)(g=f[p])&&to(g,t,n,p,f,y);o.push(f),s.push(u)}return new $t(o,s,t,n)}var mg=Qi.prototype.constructor;function yg(){return new mg(this._groups,this._parents)}function pg(e,t){var n,i,r;return function(){var o=Fn(this,e),s=(this.style.removeProperty(e),Fn(this,e));return o===s?null:o===n&&s===i?r:r=t(n=o,i=s)}}function Gl(e){return function(){this.style.removeProperty(e)}}function _g(e,t,n){var i,r=n+"",o;return function(){var s=Fn(this,e);return s===r?null:s===i?o:o=t(i=s,n)}}function wg(e,t,n){var i,r,o;return function(){var s=Fn(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Fn(this,e))),s===c?null:s===i&&c===r?o:(r=c,o=t(i=s,a))}}function xg(e,t){var n,i,r,o="style."+t,s="end."+o,a;return function(){var c=Ft(this,e),l=c.on,u=c.value[o]==null?a||(a=Gl(t)):void 0;(l!==n||r!==u)&&(i=(n=l).copy()).on(s,r=u),c.on=i}}function bg(e,t,n){var i=(e+="")=="transform"?bh:Zl;return t==null?this.styleTween(e,pg(e,i)).on("end.style."+e,Gl(e)):typeof t=="function"?this.styleTween(e,wg(e,i,ws(this,"style."+e,t))).each(xg(this._id,e)):this.styleTween(e,_g(e,i,t),n).on("end.style."+e,null)}function Eg(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Sg(e,t,n){var i,r;function o(){var s=t.apply(this,arguments);return s!==r&&(i=(r=s)&&Eg(e,s,n)),i}return o._value=t,o}function kg(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Sg(e,t,n??""))}function Cg(e){return function(){this.textContent=e}}function Ng(e){return function(){var t=e(this);this.textContent=t??""}}function Mg(e){return this.tween("text",typeof e=="function"?Ng(ws(this,"text",e)):Cg(e==null?"":e+""))}function Pg(e){return function(t){this.textContent=e.call(this,t)}}function Ag(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Pg(r)),t}return i._value=e,i}function zg(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ag(e))}function Ig(){for(var e=this._name,t=this._id,n=ql(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var u=Ht(c,t);to(c,e,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new $t(i,this._parents,e,n)}function Tg(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--r===0&&o()}};n.each(function(){var l=Ft(this,i),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),l.on=t}),r===0&&o()})}var Og=0;function $t(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function ql(){return++Og}var Zt=Qi.prototype;$t.prototype={constructor:$t,select:gg,selectAll:vg,selectChild:Zt.selectChild,selectChildren:Zt.selectChildren,filter:ag,merge:lg,selection:yg,transition:Ig,call:Zt.call,nodes:Zt.nodes,node:Zt.node,size:Zt.size,empty:Zt.empty,each:Zt.each,on:dg,attr:Fh,attrTween:Jh,style:bg,styleTween:kg,text:Mg,textTween:zg,remove:hg,tween:Lh,delay:$h,duration:ng,ease:rg,easeVarying:sg,end:Tg,[Symbol.iterator]:Zt[Symbol.iterator]};function Hg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Dg={time:null,delay:0,duration:250,ease:Hg};function Rg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Lg(e){var t,n;e instanceof $t?(t=e._id,e=e._name):(t=ql(),(n=Dg).time=ps(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&to(c,e,t,l,s,n||Rg(c,t));return new $t(i,this._parents,e,t)}Qi.prototype.interrupt=Hh;Qi.prototype.transition=Lg;const dr=e=>()=>e;function Vg(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function qt(e,t,n){this.k=e,this.x=t,this.y=n}qt.prototype={constructor:qt,scale:function(e){return e===1?this:new qt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new qt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var no=new qt(1,0,0);Ul.prototype=qt.prototype;function Ul(e){for(;!e.__zoom;)if(!(e=e.parentNode))return no;return e.__zoom}function yo(e){e.stopImmediatePropagation()}function ui(e){e.preventDefault(),e.stopImmediatePropagation()}function Xg(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Yg(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ha(){return this.__zoom||no}function Wg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Bg(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kg(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Jl(){var e=Xg,t=Yg,n=Kg,i=Wg,r=Bg,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Nh,l=Qr("start","zoom","end"),u,h,f,g=500,y=150,p=0,N=10;function x(_){_.property("__zoom",ha).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",T).filter(r).on("touchstart.zoom",L).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(_,O,w,P){var I=_.selection?_.selection():_;I.property("__zoom",ha),_!==I?S(_,O,w,P):I.interrupt().each(function(){C(this,arguments).event(P).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},x.scaleBy=function(_,O,w,P){x.scaleTo(_,function(){var I=this.__zoom.k,z=typeof O=="function"?O.apply(this,arguments):O;return I*z},w,P)},x.scaleTo=function(_,O,w,P){x.transform(_,function(){var I=t.apply(this,arguments),z=this.__zoom,X=w==null?E(I):typeof w=="function"?w.apply(this,arguments):w,K=z.invert(X),U=typeof O=="function"?O.apply(this,arguments):O;return n(b(m(z,U),X,K),I,s)},w,P)},x.translateBy=function(_,O,w,P){x.transform(_,function(){return n(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof w=="function"?w.apply(this,arguments):w),t.apply(this,arguments),s)},null,P)},x.translateTo=function(_,O,w,P,I){x.transform(_,function(){var z=t.apply(this,arguments),X=this.__zoom,K=P==null?E(z):typeof P=="function"?P.apply(this,arguments):P;return n(no.translate(K[0],K[1]).scale(X.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof w=="function"?-w.apply(this,arguments):-w),z,s)},P,I)};function m(_,O){return O=Math.max(o[0],Math.min(o[1],O)),O===_.k?_:new qt(O,_.x,_.y)}function b(_,O,w){var P=O[0]-w[0]*_.k,I=O[1]-w[1]*_.k;return P===_.x&&I===_.y?_:new qt(_.k,P,I)}function E(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function S(_,O,w,P){_.on("start.zoom",function(){C(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(P).end()}).tween("zoom",function(){var I=this,z=arguments,X=C(I,z).event(P),K=t.apply(I,z),U=w==null?E(K):typeof w=="function"?w.apply(I,z):w,ee=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),B=I.__zoom,j=typeof O=="function"?O.apply(I,z):O,te=c(B.invert(U).concat(ee/B.k),j.invert(U).concat(ee/j.k));return function(oe){if(oe===1)oe=j;else{var ce=te(oe),q=ee/ce[2];oe=new qt(q,U[0]-ce[0]*q,U[1]-ce[1]*q)}X.zoom(null,oe)}})}function C(_,O,w){return!w&&_.__zooming||new k(_,O)}function k(_,O){this.that=_,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,O),this.taps=0}k.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,O){return this.mouse&&_!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var O=yt(this.that).datum();l.call(_,this.that,new Vg(_,{sourceEvent:this.sourceEvent,target:x,type:_,transform:this.that.__zoom,dispatch:l}),O)}};function M(_,...O){if(!e.apply(this,arguments))return;var w=C(this,O).event(_),P=this.__zoom,I=Math.max(o[0],Math.min(o[1],P.k*Math.pow(2,i.apply(this,arguments)))),z=Ct(_);if(w.wheel)(w.mouse[0][0]!==z[0]||w.mouse[0][1]!==z[1])&&(w.mouse[1]=P.invert(w.mouse[0]=z)),clearTimeout(w.wheel);else{if(P.k===I)return;w.mouse=[z,P.invert(z)],_r(this),w.start()}ui(_),w.wheel=setTimeout(X,y),w.zoom("mouse",n(b(m(P,I),w.mouse[0],w.mouse[1]),w.extent,s));function X(){w.wheel=null,w.end()}}function A(_,...O){if(f||!e.apply(this,arguments))return;var w=_.currentTarget,P=C(this,O,!0).event(_),I=yt(_.view).on("mousemove.zoom",U,!0).on("mouseup.zoom",ee,!0),z=Ct(_,w),X=_.clientX,K=_.clientY;Tl(_.view),yo(_),P.mouse=[z,this.__zoom.invert(z)],_r(this),P.start();function U(B){if(ui(B),!P.moved){var j=B.clientX-X,te=B.clientY-K;P.moved=j*j+te*te>p}P.event(B).zoom("mouse",n(b(P.that.__zoom,P.mouse[0]=Ct(B,w),P.mouse[1]),P.extent,s))}function ee(B){I.on("mousemove.zoom mouseup.zoom",null),Ol(B.view,P.moved),ui(B),P.event(B).end()}}function T(_,...O){if(e.apply(this,arguments)){var w=this.__zoom,P=Ct(_.changedTouches?_.changedTouches[0]:_,this),I=w.invert(P),z=w.k*(_.shiftKey?.5:2),X=n(b(m(w,z),P,I),t.apply(this,O),s);ui(_),a>0?yt(this).transition().duration(a).call(S,X,P,_):yt(this).call(x.transform,X,P,_)}}function L(_,...O){if(e.apply(this,arguments)){var w=_.touches,P=w.length,I=C(this,O,_.changedTouches.length===P).event(_),z,X,K,U;for(yo(_),X=0;X<P;++X)K=w[X],U=Ct(K,this),U=[U,this.__zoom.invert(U),K.identifier],I.touch0?!I.touch1&&I.touch0[2]!==U[2]&&(I.touch1=U,I.taps=0):(I.touch0=U,z=!0,I.taps=1+!!u);u&&(u=clearTimeout(u)),z&&(I.taps<2&&(h=U[0],u=setTimeout(function(){u=null},g)),_r(this),I.start())}}function V(_,...O){if(this.__zooming){var w=C(this,O).event(_),P=_.changedTouches,I=P.length,z,X,K,U;for(ui(_),z=0;z<I;++z)X=P[z],K=Ct(X,this),w.touch0&&w.touch0[2]===X.identifier?w.touch0[0]=K:w.touch1&&w.touch1[2]===X.identifier&&(w.touch1[0]=K);if(X=w.that.__zoom,w.touch1){var ee=w.touch0[0],B=w.touch0[1],j=w.touch1[0],te=w.touch1[1],oe=(oe=j[0]-ee[0])*oe+(oe=j[1]-ee[1])*oe,ce=(ce=te[0]-B[0])*ce+(ce=te[1]-B[1])*ce;X=m(X,Math.sqrt(oe/ce)),K=[(ee[0]+j[0])/2,(ee[1]+j[1])/2],U=[(B[0]+te[0])/2,(B[1]+te[1])/2]}else if(w.touch0)K=w.touch0[0],U=w.touch0[1];else return;w.zoom("touch",n(b(X,K,U),w.extent,s))}}function H(_,...O){if(this.__zooming){var w=C(this,O).event(_),P=_.changedTouches,I=P.length,z,X;for(yo(_),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),z=0;z<I;++z)X=P[z],w.touch0&&w.touch0[2]===X.identifier?delete w.touch0:w.touch1&&w.touch1[2]===X.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(X=Ct(X,this),Math.hypot(h[0]-X[0],h[1]-X[1])<N)){var K=yt(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return x.wheelDelta=function(_){return arguments.length?(i=typeof _=="function"?_:dr(+_),x):i},x.filter=function(_){return arguments.length?(e=typeof _=="function"?_:dr(!!_),x):e},x.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:dr(!!_),x):r},x.extent=function(_){return arguments.length?(t=typeof _=="function"?_:dr([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),x):t},x.scaleExtent=function(_){return arguments.length?(o[0]=+_[0],o[1]=+_[1],x):[o[0],o[1]]},x.translateExtent=function(_){return arguments.length?(s[0][0]=+_[0][0],s[1][0]=+_[1][0],s[0][1]=+_[0][1],s[1][1]=+_[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(_){return arguments.length?(n=_,x):n},x.duration=function(_){return arguments.length?(a=+_,x):a},x.interpolate=function(_){return arguments.length?(c=_,x):c},x.on=function(){var _=l.on.apply(l,arguments);return _===l?x:_},x.clickDistance=function(_){return arguments.length?(p=(_=+_)*_,x):Math.sqrt(p)},x.tapDistance=function(_){return arguments.length?(N=+_,x):N},x}const er={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},Ir=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Cn;(function(e){e.Strict="strict",e.Loose="loose"})(Cn||(Cn={}));var fn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(fn||(fn={}));var Tr;(function(e){e.Partial="partial",e.Full="full"})(Tr||(Tr={}));const Fo={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Xn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Xn||(Xn={}));var Or;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Or||(Or={}));var de;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(de||(de={}));const ga={[de.Left]:de.Right,[de.Right]:de.Left,[de.Top]:de.Bottom,[de.Bottom]:de.Top};function jl(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function va(e,t,n){if(!n)return;const i=[];e.forEach((r,o)=>{t!=null&&t.has(o)||i.push(r)}),i.length&&n(i)}function Fg(e){return e===null?null:e?"valid":"invalid"}const Zg=e=>"id"in e&&"source"in e&&"target"in e,Gg=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),xs=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),tr=(e,t=[0,0])=>{const{width:n,height:i}=pn(e),r=e.origin??t,o=n*r[0],s=i*r[1];return{x:e.position.x-o,y:e.position.y-s}},qg=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,r)=>{const o=typeof r=="string";let s=!t.nodeLookup&&!o?r:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(r):xs(r)?r:t.nodeLookup.get(r.id));const a=s?Hr(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return io(i,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ro(n)},nr=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(i=>{if(t.filter===void 0||t.filter(i)){const r=Hr(i);n=io(n,r)}}),ro(n)},Ql=(e,t,[n,i,r]=[0,0,1],o=!1,s=!1)=>{const a={...ir(t,[n,i,r]),width:t.width/r,height:t.height/r},c=[];for(const l of e.values()){const{measured:u,selectable:h=!0,hidden:f=!1}=l;if(s&&!h||f)continue;const g=u.width??l.width??l.initialWidth??null,y=u.height??l.height??l.initialHeight??null,p=Ci(a,qn(l)),N=(g??0)*(y??0),x=o&&p>0;(!l.internals.handleBounds||x||p>=N||l.dragging)&&c.push(l)}return c},Zo=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function ma(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!r.hidden)&&(!i||i.has(r.id))&&n.set(r.id,r)}),n}async function ya({nodes:e,width:t,height:n,panZoom:i,minZoom:r,maxZoom:o},s){if(e.size===0)return Promise.resolve(!1);const a=nr(e),c=Es(a,t,n,(s==null?void 0:s.minZoom)??r,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await i.setViewport(c,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function Ug({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:c,y:l}=a?a.internals.positionAbsolute:{x:0,y:0},u=s.origin??i;let h=r;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",er.error005());else{const g=a.measured.width,y=a.measured.height;g&&y&&(h=[[c,l],[c+g,l+y]])}else a&&Un(s.extent)&&(h=[[s.extent[0][0]+c,s.extent[0][1]+l],[s.extent[1][0]+c,s.extent[1][1]+l]]);const f=Un(h)?Nn(t,h,s.measured):t;return{position:{x:f.x-c+s.measured.width*u[0],y:f.y-l+s.measured.height*u[1]},positionAbsolute:f}}async function $l({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:r}){const o=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const g=o.has(f.id),y=!g&&f.parentId&&s.find(p=>p.id===f.parentId);(g||y)&&s.push(f)}const a=new Set(t.map(f=>f.id)),c=i.filter(f=>f.deletable!==!1),u=Zo(s,c);for(const f of c)a.has(f.id)&&!u.find(y=>y.id===f.id)&&u.push(f);if(!r)return{edges:u,nodes:s};const h=await r({nodes:s,edges:u});return typeof h=="boolean"?h?{edges:u,nodes:s}:{edges:[],nodes:[]}:h}const Gn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Nn=(e={x:0,y:0},t,n)=>({x:Gn(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Gn(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function ec(e,t,n){const{width:i,height:r}=pn(n),{x:o,y:s}=n.internals.positionAbsolute;return Nn(e,[[o,s],[o+i,s+r]],t)}const pa=(e,t,n)=>e<t?Gn(Math.abs(e-t),1,t)/t:e>n?-Gn(Math.abs(e-n),1,t)/t:0,tc=(e,t,n=15,i=40)=>{const r=pa(e.x,i,t.width-i)*n,o=pa(e.y,i,t.height-i)*n;return[r,o]},io=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Go=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),ro=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),qn=(e,t=[0,0])=>{var r,o;const{x:n,y:i}=xs(e)?e.internals.positionAbsolute:tr(e,t);return{x:n,y:i,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},Hr=(e,t=[0,0])=>{var r,o;const{x:n,y:i}=xs(e)?e.internals.positionAbsolute:tr(e,t);return{x:n,y:i,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:i+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},nc=(e,t)=>ro(io(Go(e),Go(t))),Ci=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},_a=e=>Ut(e.width)&&Ut(e.height)&&Ut(e.x)&&Ut(e.y),Ut=e=>!isNaN(e)&&isFinite(e),Jg=(e,t)=>{},bs=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),ir=({x:e,y:t},[n,i,r],o=!1,s=[1,1])=>{const a={x:(e-n)/r,y:(t-i)/r};return o?bs(a,s):a},ic=({x:e,y:t},[n,i,r])=>({x:e*r+n,y:t*r+i}),Es=(e,t,n,i,r,o)=>{const s=t/(e.width*(1+o)),a=n/(e.height*(1+o)),c=Math.min(s,a),l=Gn(c,i,r),u=e.x+e.width/2,h=e.y+e.height/2,f=t/2-u*l,g=n/2-h*l;return{x:f,y:g,zoom:l}},Dr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Un(e){return e!==void 0&&e!=="parent"}function pn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function rc(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function jg(e,t={width:0,height:0},n,i,r){const o={...e},s=i.get(n);if(s){const a=s.origin||r;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function mi(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:r}){const{x:o,y:s}=jt(e),a=ir({x:o-((r==null?void 0:r.left)??0),y:s-((r==null?void 0:r.top)??0)},i),{x:c,y:l}=n?bs(a,t):a;return{xSnapped:c,ySnapped:l,...a}}const Ss=e=>({width:e.offsetWidth,height:e.offsetHeight}),Qg=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},$g=["INPUT","SELECT","TEXTAREA"];function ev(e){var i,r,o;const t=((r=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:r[0])||e.target;return $g.includes(t==null?void 0:t.nodeName)||((o=t==null?void 0:t.hasAttribute)==null?void 0:o.call(t,"contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const oc=e=>"clientX"in e,jt=(e,t)=>{var o,s;const n=oc(e),i=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,r=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},wa=(e,t,n,i,r)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/i,y:(a.top-n.top)/i,...Ss(s)}})};function tv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:r,sourceControlY:o,targetControlX:s,targetControlY:a}){const c=e*.125+r*.375+s*.375+n*.125,l=t*.125+o*.375+a*.375+i*.125,u=Math.abs(c-e),h=Math.abs(l-t);return[c,l,u,h]}function fr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function xa({pos:e,x1:t,y1:n,x2:i,y2:r,c:o}){switch(e){case de.Left:return[t-fr(t-i,o),n];case de.Right:return[t+fr(i-t,o),n];case de.Top:return[t,n-fr(n-r,o)];case de.Bottom:return[t,n+fr(r-n,o)]}}function sc({sourceX:e,sourceY:t,sourcePosition:n=de.Bottom,targetX:i,targetY:r,targetPosition:o=de.Top,curvature:s=.25}){const[a,c]=xa({pos:n,x1:e,y1:t,x2:i,y2:r,c:s}),[l,u]=xa({pos:o,x1:i,y1:r,x2:e,y2:t,c:s}),[h,f,g,y]=tv({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${a},${c} ${l},${u} ${i},${r}`,h,f,g,y]}function ac({sourceX:e,sourceY:t,targetX:n,targetY:i}){const r=Math.abs(n-e)/2,o=n<e?n+r:n-r,s=Math.abs(i-t)/2,a=i<t?i+s:i-s;return[o,a,r,s]}function nv({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const o=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return i+(o?s:0)}function iv({sourceNode:e,targetNode:t,width:n,height:i,transform:r}){const o=io(Hr(e),Hr(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return Ci(s,ro(o))>0}const rv=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,ov=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),sv=(e,t)=>{if(!e.source||!e.target)return t;let n;return Zg(e)?n={...e}:n={...e,id:rv(e)},ov(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function qo({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[r,o,s,a]=ac({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,r,o,s,a]}const ba={[de.Left]:{x:-1,y:0},[de.Right]:{x:1,y:0},[de.Top]:{x:0,y:-1},[de.Bottom]:{x:0,y:1}},av=({source:e,sourcePosition:t=de.Bottom,target:n})=>t===de.Left||t===de.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ea=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function lv({source:e,sourcePosition:t=de.Bottom,target:n,targetPosition:i=de.Top,center:r,offset:o}){const s=ba[t],a=ba[i],c={x:e.x+s.x*o,y:e.y+s.y*o},l={x:n.x+a.x*o,y:n.y+a.y*o},u=av({source:c,sourcePosition:t,target:l}),h=u.x!==0?"x":"y",f=u[h];let g=[],y,p;const N={x:0,y:0},x={x:0,y:0},[m,b,E,S]=ac({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[h]*a[h]===-1){y=r.x??m,p=r.y??b;const k=[{x:y,y:c.y},{x:y,y:l.y}],M=[{x:c.x,y:p},{x:l.x,y:p}];s[h]===f?g=h==="x"?k:M:g=h==="x"?M:k}else{const k=[{x:c.x,y:l.y}],M=[{x:l.x,y:c.y}];if(h==="x"?g=s.x===f?M:k:g=s.y===f?k:M,t===i){const H=Math.abs(e[h]-n[h]);if(H<=o){const _=Math.min(o-1,o-H);s[h]===f?N[h]=(c[h]>e[h]?-1:1)*_:x[h]=(l[h]>n[h]?-1:1)*_}}if(t!==i){const H=h==="x"?"y":"x",_=s[h]===a[H],O=c[H]>l[H],w=c[H]<l[H];(s[h]===1&&(!_&&O||_&&w)||s[h]!==1&&(!_&&w||_&&O))&&(g=h==="x"?k:M)}const A={x:c.x+N.x,y:c.y+N.y},T={x:l.x+x.x,y:l.y+x.y},L=Math.max(Math.abs(A.x-g[0].x),Math.abs(T.x-g[0].x)),V=Math.max(Math.abs(A.y-g[0].y),Math.abs(T.y-g[0].y));L>=V?(y=(A.x+T.x)/2,p=g[0].y):(y=g[0].x,p=(A.y+T.y)/2)}return[[e,{x:c.x+N.x,y:c.y+N.y},...g,{x:l.x+x.x,y:l.y+x.y},n],y,p,E,S]}function cv(e,t,n,i){const r=Math.min(Ea(e,t)/2,Ea(t,n)/2,i),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${o+r*l},${s}Q ${o},${s} ${o},${s+r*u}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${o},${s+r*c}Q ${o},${s} ${o+r*a},${s}`}function Rr({sourceX:e,sourceY:t,sourcePosition:n=de.Bottom,targetX:i,targetY:r,targetPosition:o=de.Top,borderRadius:s=5,centerX:a,centerY:c,offset:l=20}){const[u,h,f,g,y]=lv({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:r},targetPosition:o,center:{x:a,y:c},offset:l});return[u.reduce((N,x,m)=>{let b="";return m>0&&m<u.length-1?b=cv(u[m-1],x,u[m+1],s):b=`${m===0?"M":"L"}${x.x} ${x.y}`,N+=b,N},""),h,f,g,y]}function Sa(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function uv(e){var h;const{sourceNode:t,targetNode:n}=e;if(!Sa(t)||!Sa(n))return null;const i=t.internals.handleBounds||ka(t.handles),r=n.internals.handleBounds||ka(n.handles),o=Ca((i==null?void 0:i.source)??[],e.sourceHandle),s=Ca(e.connectionMode===Cn.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!o||!s)return(h=e.onError)==null||h.call(e,"008",er.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||de.Bottom,c=(s==null?void 0:s.position)||de.Top,l=Ni(t,o,a),u=Ni(n,s,c);return{sourceX:l.x,sourceY:l.y,targetX:u.x,targetY:u.y,sourcePosition:a,targetPosition:c}}function ka(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function Ni(e,t,n=de.Left,i=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??pn(e);if(i)return{x:r+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case de.Top:return{x:r+s/2,y:o};case de.Right:return{x:r+s,y:o+a/2};case de.Bottom:return{x:r+s/2,y:o+a};case de.Left:return{x:r,y:o+a/2}}}function Ca(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Uo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function dv(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||i,a.markerEnd||r].forEach(c=>{if(c&&typeof c=="object"){const l=Uo(c,t);o.has(l)||(s.push({id:l,color:c.color||n,...c}),o.add(l))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const ks={nodeOrigin:[0,0],nodeExtent:Ir,elevateNodesOnSelect:!0,defaults:{}},fv={...ks,checkEquality:!0};function Cs(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function hv(e,t,n){const i=Cs(ks,n);for(const r of e.values())if(r.parentId)Ns(r,e,t,i);else{const o=tr(r,i.nodeOrigin),s=Un(r.extent)?r.extent:i.nodeExtent,a=Nn(o,s,pn(r));r.internals.positionAbsolute=a}}function lc(e,t,n,i){var a,c;const r=Cs(fv,i),o=new Map(t),s=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let u=o.get(l.id);if(r.checkEquality&&l===(u==null?void 0:u.internals.userNode))t.set(l.id,u);else{const h=tr(l,r.nodeOrigin),f=Un(l.extent)?l.extent:r.nodeExtent,g=Nn(h,f,pn(l));u={...r.defaults,...l,measured:{width:(a=l.measured)==null?void 0:a.width,height:(c=l.measured)==null?void 0:c.height},internals:{positionAbsolute:g,handleBounds:l.measured?u==null?void 0:u.internals.handleBounds:void 0,z:cc(l,s),userNode:l}},t.set(l.id,u)}l.parentId&&Ns(u,t,n,i)}}function gv(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Ns(e,t,n,i){const{elevateNodesOnSelect:r,nodeOrigin:o,nodeExtent:s}=Cs(ks,i),a=e.parentId,c=t.get(a);if(!c){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}gv(e,n);const l=r?1e3:0,{x:u,y:h,z:f}=vv(e,c,o,s,l),{positionAbsolute:g}=e.internals,y=u!==g.x||h!==g.y;(y||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:y?{x:u,y:h}:g,z:f})}function cc(e,t){return(Ut(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function vv(e,t,n,i,r){const{x:o,y:s}=t.internals.positionAbsolute,a=pn(e),c=tr(e,n),l=Un(e.extent)?Nn(c,e.extent,a):c;let u=Nn({x:o+l.x,y:s+l.y},i,a);e.extent==="parent"&&(u=ec(u,a,t));const h=cc(e,r),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>h?f:h}}function mv(e,t,n,i=[0,0]){var s;const r=[],o=new Map;for(const a of e){const c=t.get(a.parentId);if(!c)continue;const l=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??qn(c),u=nc(l,a.rect);o.set(a.parentId,{expandedRect:u,parent:c})}return o.size>0&&o.forEach(({expandedRect:a,parent:c},l)=>{var b;const u=c.internals.positionAbsolute,h=pn(c),f=c.origin??i,g=a.x<u.x?Math.round(Math.abs(u.x-a.x)):0,y=a.y<u.y?Math.round(Math.abs(u.y-a.y)):0,p=Math.max(h.width,Math.round(a.width)),N=Math.max(h.height,Math.round(a.height)),x=(p-h.width)*f[0],m=(N-h.height)*f[1];(g>0||y>0||x||m)&&(r.push({id:l,type:"position",position:{x:c.position.x-g+x,y:c.position.y-y+m}}),(b=n.get(l))==null||b.forEach(E=>{e.some(S=>S.id===E.id)||r.push({id:E.id,type:"position",position:{x:E.position.x+g,y:E.position.y+y}})})),(h.width<a.width||h.height<a.height||g||y)&&r.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:p+(g?f[0]*g-x:0),height:N+(y?f[1]*y-m:0)}})}),r}function yv(e,t,n,i,r,o){const s=i==null?void 0:i.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const c=[],l=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(l.transform),h=[];for(const f of e.values()){const g=t.get(f.id);if(g)if(g.hidden)g.internals={...g.internals,handleBounds:void 0},a=!0;else{const y=Ss(f.nodeElement),p=g.measured.width!==y.width||g.measured.height!==y.height;if(!!(y.width&&y.height&&(p||!g.internals.handleBounds||f.force))){const x=f.nodeElement.getBoundingClientRect(),m=Un(g.extent)?g.extent:o;let{positionAbsolute:b}=g.internals;g.parentId&&g.extent==="parent"?b=ec(b,y,t.get(g.parentId)):m&&(b=Nn(b,m,y)),g.measured=y,g.internals={...g.internals,positionAbsolute:b,handleBounds:{source:wa("source",f.nodeElement,x,u,g.id),target:wa("target",f.nodeElement,x,u,g.id)}},g.parentId&&Ns(g,t,n,{nodeOrigin:r}),a=!0,p&&(c.push({id:g.id,type:"dimensions",dimensions:y}),g.expandParent&&g.parentId&&h.push({id:g.id,parentId:g.parentId,rect:qn(g,r)}))}}}if(h.length>0){const f=mv(h,t,n,r);c.push(...f)}return{changes:c,updatedInternals:a}}async function pv({delta:e,panZoom:t,transform:n,translateExtent:i,width:r,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,o]],i),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function uc(e,t,n){e.clear(),t.clear();for(const i of n){const{source:r,target:o,sourceHandle:s=null,targetHandle:a=null}=i,c=`${r}-source-${s}`,l=`${o}-target-${a}`,u=e.get(c)||new Map,h=e.get(l)||new Map,f={edgeId:i.id,source:r,target:o,sourceHandle:s,targetHandle:a};t.set(i.id,i),e.set(c,u.set(`${o}-${a}`,f)),e.set(l,h.set(`${r}-${s}`,f))}}function dc(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:dc(n,t):!1}function Na(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function _v(e,t,n,i){const r=new Map;for(const[o,s]of e)if((s.selected||s.id===i)&&(!s.parentId||!dc(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&r.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return r}function po({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var s,a,c;const r=[];for(const[l,u]of t){const h=(s=n.get(l))==null?void 0:s.internals.userNode;h&&r.push({...h,position:u.position,dragging:i})}if(!e)return[r[0],r];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((c=t.get(e))==null?void 0:c.position)||o.position,dragging:i}:r[0],r]}function wv({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:r}){let o={x:null,y:null},s=0,a=new Map,c=!1,l={x:0,y:0},u=null,h=!1,f=null,g=!1;function y({noDragClassName:N,handleSelector:x,domNode:m,isSelectable:b,nodeId:E,nodeClickDistance:S=0}){f=yt(m);function C({x:T,y:L},V){const{nodeLookup:H,nodeExtent:_,snapGrid:O,snapToGrid:w,nodeOrigin:P,onNodeDrag:I,onSelectionDrag:z,onError:X,updateNodePositions:K}=t();o={x:T,y:L};let U=!1,ee={x:0,y:0,x2:0,y2:0};if(a.size>1&&_){const B=nr(a);ee=Go(B)}for(const[B,j]of a){if(!H.has(B))continue;let te={x:T-j.distance.x,y:L-j.distance.y};w&&(te=bs(te,O));let oe=[[_[0][0],_[0][1]],[_[1][0],_[1][1]]];if(a.size>1&&_&&!j.extent){const{positionAbsolute:J}=j.internals,Q=J.x-ee.x+_[0][0],ge=J.x+j.measured.width-ee.x2+_[1][0],we=J.y-ee.y+_[0][1],me=J.y+j.measured.height-ee.y2+_[1][1];oe=[[Q,we],[ge,me]]}const{position:ce,positionAbsolute:q}=Ug({nodeId:B,nextPosition:te,nodeLookup:H,nodeExtent:oe,nodeOrigin:P,onError:X});U=U||j.position.x!==ce.x||j.position.y!==ce.y,j.position=ce,j.internals.positionAbsolute=q}if(U&&(K(a,!0),V&&(i||I||!E&&z))){const[B,j]=po({nodeId:E,dragItems:a,nodeLookup:H});i==null||i(V,a,B,j),I==null||I(V,B,j),E||z==null||z(V,j)}}async function k(){if(!u)return;const{transform:T,panBy:L,autoPanSpeed:V}=t(),[H,_]=tc(l,u,V);(H!==0||_!==0)&&(o.x=(o.x??0)-H/T[2],o.y=(o.y??0)-_/T[2],await L({x:H,y:_})&&C(o,null)),s=requestAnimationFrame(k)}function M(T){var U;const{nodeLookup:L,multiSelectionActive:V,nodesDraggable:H,transform:_,snapGrid:O,snapToGrid:w,selectNodesOnDrag:P,onNodeDragStart:I,onSelectionDragStart:z,unselectNodesAndEdges:X}=t();h=!0,(!P||!b)&&!V&&E&&((U=L.get(E))!=null&&U.selected||X()),b&&P&&E&&(e==null||e(E));const K=mi(T.sourceEvent,{transform:_,snapGrid:O,snapToGrid:w,containerBounds:u});if(o=K,a=_v(L,H,K,E),a.size>0&&(n||I||!E&&z)){const[ee,B]=po({nodeId:E,dragItems:a,nodeLookup:L});n==null||n(T.sourceEvent,a,ee,B),I==null||I(T.sourceEvent,ee,B),E||z==null||z(T.sourceEvent,B)}}const A=Hl().clickDistance(S).on("start",T=>{const{domNode:L,nodeDragThreshold:V,transform:H,snapGrid:_,snapToGrid:O}=t();u=(L==null?void 0:L.getBoundingClientRect())||null,g=!1,V===0&&M(T),o=mi(T.sourceEvent,{transform:H,snapGrid:_,snapToGrid:O,containerBounds:u}),l=jt(T.sourceEvent,u)}).on("drag",T=>{const{autoPanOnNodeDrag:L,transform:V,snapGrid:H,snapToGrid:_,nodeDragThreshold:O,nodeLookup:w}=t(),P=mi(T.sourceEvent,{transform:V,snapGrid:H,snapToGrid:_,containerBounds:u});if((T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1||E&&!w.has(E))&&(g=!0),!g){if(!c&&L&&h&&(c=!0,k()),!h){const I=P.xSnapped-(o.x??0),z=P.ySnapped-(o.y??0);Math.sqrt(I*I+z*z)>O&&M(T)}(o.x!==P.xSnapped||o.y!==P.ySnapped)&&a&&h&&(l=jt(T.sourceEvent,u),C(P,T.sourceEvent))}}).on("end",T=>{if(!(!h||g)&&(c=!1,h=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:L,updateNodePositions:V,onNodeDragStop:H,onSelectionDragStop:_}=t();if(V(a,!1),r||H||!E&&_){const[O,w]=po({nodeId:E,dragItems:a,nodeLookup:L,dragging:!1});r==null||r(T.sourceEvent,a,O,w),H==null||H(T.sourceEvent,O,w),E||_==null||_(T.sourceEvent,w)}}}).filter(T=>{const L=T.target;return!T.button&&(!N||!Na(L,`.${N}`,m))&&(!x||Na(L,x,m))});f.call(A)}function p(){f==null||f.on(".drag",null)}return{update:y,destroy:p}}function xv(e,t,n){const i=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())Ci(r,qn(o))>0&&i.push(o);return i}const bv=250;function Ev(e,t,n,i){var a,c;let r=[],o=1/0;const s=xv(e,n,t+bv);for(const l of s){const u=[...((a=l.internals.handleBounds)==null?void 0:a.source)??[],...((c=l.internals.handleBounds)==null?void 0:c.target)??[]];for(const h of u){if(i.nodeId===h.nodeId&&i.type===h.type&&i.id===h.id)continue;const{x:f,y:g}=Ni(l,h,h.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(g-e.y,2));y>t||(y<o?(r=[{...h,x:f,y:g}],o=y):y===o&&r.push({...h,x:f,y:g}))}}if(!r.length)return null;if(r.length>1){const l=i.type==="source"?"target":"source";return r.find(u=>u.type===l)??r[0]}return r[0]}function fc(e,t,n,i,r,o=!1){var l,u,h;const s=i.get(e);if(!s)return null;const a=r==="strict"?(l=s.internals.handleBounds)==null?void 0:l[t]:[...((u=s.internals.handleBounds)==null?void 0:u.source)??[],...((h=s.internals.handleBounds)==null?void 0:h.target)??[]],c=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return c&&o?{...c,...Ni(s,c,c.position,!0)}:c}function hc(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Sv(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const gc=()=>!0;function kv(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:c,lib:l,autoPanOnConnect:u,flowId:h,panBy:f,cancelConnection:g,onConnectStart:y,onConnect:p,onConnectEnd:N,isValidConnection:x=gc,onReconnectEnd:m,updateConnection:b,getTransform:E,getFromHandle:S,autoPanSpeed:C}){const k=Qg(e.target);let M=0,A;const{x:T,y:L}=jt(e),V=k==null?void 0:k.elementFromPoint(T,L),H=hc(o,V),_=a==null?void 0:a.getBoundingClientRect();if(!_||!H)return;const O=fc(r,H,i,c,t);if(!O)return;let w=jt(e,_),P=!1,I=null,z=!1,X=null;function K(){if(!u||!_)return;const[q,J]=tc(w,_,C);f({x:q,y:J}),M=requestAnimationFrame(K)}const U={...O,nodeId:r,type:H,position:O.position},ee=c.get(r),j={inProgress:!0,isValid:null,from:Ni(ee,U,de.Left,!0),fromHandle:U,fromPosition:U.position,fromNode:ee,to:w,toHandle:null,toPosition:ga[U.position],toNode:null};b(j);let te=j;y==null||y(e,{nodeId:r,handleId:i,handleType:H});function oe(q){if(!S()||!U){ce(q);return}const J=E();w=jt(q,_),A=Ev(ir(w,J,!1,[1,1]),n,c,U),P||(K(),P=!0);const Q=vc(q,{handle:A,connectionMode:t,fromNodeId:r,fromHandleId:i,fromType:s?"target":"source",isValidConnection:x,doc:k,lib:l,flowId:h,nodeLookup:c});X=Q.handleDomNode,I=Q.connection,z=Sv(!!A,Q.isValid);const ge={...te,isValid:z,to:A&&z?ic({x:A.x,y:A.y},J):w,toHandle:Q.toHandle,toPosition:z&&Q.toHandle?Q.toHandle.position:ga[U.position],toNode:Q.toHandle?c.get(Q.toHandle.nodeId):null};z&&A&&te.toHandle&&ge.toHandle&&te.toHandle.type===ge.toHandle.type&&te.toHandle.nodeId===ge.toHandle.nodeId&&te.toHandle.id===ge.toHandle.id&&te.to.x===ge.to.x&&te.to.y===ge.to.y||(b(ge),te=ge)}function ce(q){(A||X)&&I&&z&&(p==null||p(I));const{inProgress:J,...Q}=te,ge={...Q,toPosition:te.toHandle?te.toPosition:null};N==null||N(q,ge),o&&(m==null||m(q,ge)),g(),cancelAnimationFrame(M),P=!1,z=!1,I=null,X=null,k.removeEventListener("mousemove",oe),k.removeEventListener("mouseup",ce),k.removeEventListener("touchmove",oe),k.removeEventListener("touchend",ce)}k.addEventListener("mousemove",oe),k.addEventListener("mouseup",ce),k.addEventListener("touchmove",oe),k.addEventListener("touchend",ce)}function vc(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:o,doc:s,lib:a,flowId:c,isValidConnection:l=gc,nodeLookup:u}){const h=o==="target",f=t?s.querySelector(`.${a}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y}=jt(e),p=s.elementFromPoint(g,y),N=p!=null&&p.classList.contains(`${a}-flow__handle`)?p:f,x={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const m=hc(void 0,N),b=N.getAttribute("data-nodeid"),E=N.getAttribute("data-handleid"),S=N.classList.contains("connectable"),C=N.classList.contains("connectableend");if(!b||!m)return x;const k={source:h?b:i,sourceHandle:h?E:r,target:h?i:b,targetHandle:h?r:E};x.connection=k;const A=S&&C&&(n===Cn.Strict?h&&m==="source"||!h&&m==="target":b!==i||E!==r);x.isValid=A&&l(k),x.toHandle=fc(b,m,E,u,n,!1)}return x}const Cv={onPointerDown:kv,isValid:vc};function Nv({domNode:e,panZoom:t,getTransform:n,getViewScale:i}){const r=yt(e);function o({translateExtent:a,width:c,height:l,zoomStep:u=10,pannable:h=!0,zoomable:f=!0,inversePan:g=!1}){const y=b=>{const E=n();if(b.sourceEvent.type!=="wheel"||!t)return;const S=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*u,C=E[2]*Math.pow(2,S);t.scaleTo(C)};let p=[0,0];const N=b=>{(b.sourceEvent.type==="mousedown"||b.sourceEvent.type==="touchstart")&&(p=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},x=b=>{const E=n();if(b.sourceEvent.type!=="mousemove"&&b.sourceEvent.type!=="touchmove"||!t)return;const S=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],C=[S[0]-p[0],S[1]-p[1]];p=S;const k=i()*Math.max(E[2],Math.log(E[2]))*(g?-1:1),M={x:E[0]-C[0]*k,y:E[1]-C[1]*k},A=[[0,0],[c,l]];t.setViewportConstrained({x:M.x,y:M.y,zoom:E[2]},A,a)},m=Jl().on("start",N).on("zoom",h?x:null).on("zoom.wheel",f?y:null);r.call(m,{})}function s(){r.on("zoom",null)}return{update:o,destroy:s,pointer:Ct}}const Mv=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,oo=e=>({x:e.x,y:e.y,zoom:e.k}),_o=({x:e,y:t,zoom:n})=>no.translate(e,t).scale(n),Dn=(e,t)=>e.target.closest(`.${t}`),mc=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),wo=(e,t=0,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).on("end",n):e},yc=e=>{const t=e.ctrlKey&&Dr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Pv({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:l}){return u=>{if(Dn(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(u.ctrlKey&&s){const N=Ct(u),x=yc(u),m=h*Math.pow(2,x);i.scaleTo(n,m,N,u);return}const f=u.deltaMode===1?20:1;let g=r===fn.Vertical?0:u.deltaX*f,y=r===fn.Horizontal?0:u.deltaY*f;!Dr()&&u.shiftKey&&r!==fn.Vertical&&(g=u.deltaY*f,y=0),i.translateBy(n,-(g/h)*o,-(y/h)*o,{internal:!0});const p=oo(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(u,p)),e.isPanScrolling&&(c==null||c(u,p),e.panScrollTimeout=setTimeout(()=>{l==null||l(u,p),e.isPanScrolling=!1},150))}}function Av({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,r){if(!t&&i.type==="wheel"&&!i.ctrlKey||Dn(i,e))return null;i.preventDefault(),n.call(this,i,r)}}function zv({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var o,s,a;if((o=i.sourceEvent)!=null&&o.internal)return;const r=oo(i.transform);e.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((a=i.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,r))}}function Iv({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&mc(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||i([o.transform.x,o.transform.y,o.transform.k]),r&&!((a=o.sourceEvent)!=null&&a.internal)&&(r==null||r(o.sourceEvent,oo(o.transform)))}}function Tv({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&mc(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,i(!1),r&&Mv(e.prevViewport,s.transform))){const c=oo(s.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(s.sourceEvent,c)},n?150:0)}}}function Ov({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:c,lib:l}){return u=>{var y;const h=e||t,f=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Dn(u,`${l}-flow__node`)||Dn(u,`${l}-flow__edge`)))return!0;if(!i&&!h&&!r&&!o&&!n||s||Dn(u,a)&&u.type==="wheel"||Dn(u,c)&&(u.type!=="wheel"||r&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((y=u.touches)==null?void 0:y.length)>1)return u.preventDefault(),!1;if(!h&&!r&&!f&&u.type==="wheel"||!i&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(i)&&!i.includes(u.button)&&u.type==="mousedown")return!1;const g=Array.isArray(i)&&i.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&g}}function Hv({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:i,translateExtent:r,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:l}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},h=e.getBoundingClientRect(),f=Jl().clickDistance(!Ut(i)||i<0?0:i).scaleExtent([t,n]).translateExtent(r),g=yt(e).call(f);b({x:o.x,y:o.y,zoom:Gn(o.zoom,t,n)},[[0,0],[h.width,h.height]],r);const y=g.on("wheel.zoom"),p=g.on("dblclick.zoom");f.wheelDelta(yc);function N(V,H){return g?new Promise(_=>{f==null||f.transform(wo(g,H==null?void 0:H.duration,()=>_(!0)),V)}):Promise.resolve(!1)}function x({noWheelClassName:V,noPanClassName:H,onPaneContextMenu:_,userSelectionActive:O,panOnScroll:w,panOnDrag:P,panOnScrollMode:I,panOnScrollSpeed:z,preventScrolling:X,zoomOnPinch:K,zoomOnScroll:U,zoomOnDoubleClick:ee,zoomActivationKeyPressed:B,lib:j,onTransformChange:te}){O&&!u.isZoomingOrPanning&&m();const ce=w&&!B&&!O?Pv({zoomPanValues:u,noWheelClassName:V,d3Selection:g,d3Zoom:f,panOnScrollMode:I,panOnScrollSpeed:z,zoomOnPinch:K,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:c}):Av({noWheelClassName:V,preventScrolling:X,d3ZoomHandler:y});if(g.on("wheel.zoom",ce,{passive:!1}),!O){const J=zv({zoomPanValues:u,onDraggingChange:l,onPanZoomStart:a});f.on("start",J);const Q=Iv({zoomPanValues:u,panOnDrag:P,onPaneContextMenu:!!_,onPanZoom:s,onTransformChange:te});f.on("zoom",Q);const ge=Tv({zoomPanValues:u,panOnDrag:P,panOnScroll:w,onPaneContextMenu:_,onPanZoomEnd:c,onDraggingChange:l});f.on("end",ge)}const q=Ov({zoomActivationKeyPressed:B,panOnDrag:P,zoomOnScroll:U,panOnScroll:w,zoomOnDoubleClick:ee,zoomOnPinch:K,userSelectionActive:O,noPanClassName:H,noWheelClassName:V,lib:j});f.filter(q),ee?g.on("dblclick.zoom",p):g.on("dblclick.zoom",null)}function m(){f.on("zoom",null)}async function b(V,H,_){const O=_o(V),w=f==null?void 0:f.constrain()(O,H,_);return w&&await N(w),new Promise(P=>P(w))}async function E(V,H){const _=_o(V);return await N(_,H),new Promise(O=>O(_))}function S(V){if(g){const H=_o(V),_=g.property("__zoom");(_.k!==V.zoom||_.x!==V.x||_.y!==V.y)&&(f==null||f.transform(g,H,null,{sync:!0}))}}function C(){const V=g?Ul(g.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function k(V,H){return g?new Promise(_=>{f==null||f.scaleTo(wo(g,H==null?void 0:H.duration,()=>_(!0)),V)}):Promise.resolve(!1)}function M(V,H){return g?new Promise(_=>{f==null||f.scaleBy(wo(g,H==null?void 0:H.duration,()=>_(!0)),V)}):Promise.resolve(!1)}function A(V){f==null||f.scaleExtent(V)}function T(V){f==null||f.translateExtent(V)}function L(V){const H=!Ut(V)||V<0?0:V;f==null||f.clickDistance(H)}return{update:x,destroy:m,setViewport:E,setViewportConstrained:b,getViewport:C,scaleTo:k,scaleBy:M,setScaleExtent:A,setTranslateExtent:T,syncViewport:S,setClickDistance:L}}var sn;(function(e){e.Line="line",e.Handle="handle"})(sn||(sn={}));const Dv=["top-left","top-right","bottom-left","bottom-right"],Rv=["top","right","bottom","left"];function Lv({width:e,prevWidth:t,height:n,prevHeight:i,affectsX:r,affectsY:o}){const s=e-t,a=n-i,c=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&r&&(c[0]=c[0]*-1),a&&o&&(c[1]=c[1]*-1),c}function Vv(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),i=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:i,affectsY:r}}function tn(e,t){return Math.max(0,t-e)}function nn(e,t){return Math.max(0,e-t)}function hr(e,t,n){return Math.max(0,t-e,e-n)}function Ma(e,t){return e?!t:t}function Xv(e,t,n,i,r,o,s,a){let{affectsX:c,affectsY:l}=t;const{isHorizontal:u,isVertical:h}=t,f=u&&h,{xSnapped:g,ySnapped:y}=n,{minWidth:p,maxWidth:N,minHeight:x,maxHeight:m}=i,{x:b,y:E,width:S,height:C,aspectRatio:k}=e;let M=Math.floor(u?g-e.pointerX:0),A=Math.floor(h?y-e.pointerY:0);const T=S+(c?-M:M),L=C+(l?-A:A),V=-o[0]*S,H=-o[1]*C;let _=hr(T,p,N),O=hr(L,x,m);if(s){let I=0,z=0;c&&M<0?I=tn(b+M+V,s[0][0]):!c&&M>0&&(I=nn(b+T+V,s[1][0])),l&&A<0?z=tn(E+A+H,s[0][1]):!l&&A>0&&(z=nn(E+L+H,s[1][1])),_=Math.max(_,I),O=Math.max(O,z)}if(a){let I=0,z=0;c&&M>0?I=nn(b+M,a[0][0]):!c&&M<0&&(I=tn(b+T,a[1][0])),l&&A>0?z=nn(E+A,a[0][1]):!l&&A<0&&(z=tn(E+L,a[1][1])),_=Math.max(_,I),O=Math.max(O,z)}if(r){if(u){const I=hr(T/k,x,m)*k;if(_=Math.max(_,I),s){let z=0;!c&&!l||c&&!l&&f?z=nn(E+H+T/k,s[1][1])*k:z=tn(E+H+(c?M:-M)/k,s[0][1])*k,_=Math.max(_,z)}if(a){let z=0;!c&&!l||c&&!l&&f?z=tn(E+T/k,a[1][1])*k:z=nn(E+(c?M:-M)/k,a[0][1])*k,_=Math.max(_,z)}}if(h){const I=hr(L*k,p,N)/k;if(O=Math.max(O,I),s){let z=0;!c&&!l||l&&!c&&f?z=nn(b+L*k+V,s[1][0])/k:z=tn(b+(l?A:-A)*k+V,s[0][0])/k,O=Math.max(O,z)}if(a){let z=0;!c&&!l||l&&!c&&f?z=tn(b+L*k,a[1][0])/k:z=nn(b+(l?A:-A)*k,a[0][0])/k,O=Math.max(O,z)}}}A=A+(A<0?O:-O),M=M+(M<0?_:-_),r&&(f?T>L*k?A=(Ma(c,l)?-M:M)/k:M=(Ma(c,l)?-A:A)*k:u?(A=M/k,l=c):(M=A*k,c=l));const w=c?b+M:b,P=l?E+A:E;return{width:S+(c?-M:M),height:C+(l?-A:A),x:o[0]*M*(c?-1:1)+w,y:o[1]*A*(l?-1:1)+P}}const pc={width:0,height:0,x:0,y:0},Yv={...pc,pointerX:0,pointerY:0,aspectRatio:1};function Wv(e){return[[0,0],[e.measured.width,e.measured.height]]}function Bv(e,t,n){const i=t.position.x+e.position.x,r=t.position.y+e.position.y,o=e.measured.width??0,s=e.measured.height??0,a=n[0]*o,c=n[1]*s;return[[i-a,r-c],[i+o-a,r+s-c]]}function Kv({domNode:e,nodeId:t,getStoreItems:n,onChange:i,onEnd:r}){const o=yt(e);function s({controlPosition:c,boundaries:l,keepAspectRatio:u,onResizeStart:h,onResize:f,onResizeEnd:g,shouldResize:y}){let p={...pc},N={...Yv};const x=Vv(c);let m,b=null,E=[],S,C,k;const M=Hl().on("start",A=>{const{nodeLookup:T,transform:L,snapGrid:V,snapToGrid:H,nodeOrigin:_,paneDomNode:O}=n();if(m=T.get(t),!m)return;b=(O==null?void 0:O.getBoundingClientRect())??null;const{xSnapped:w,ySnapped:P}=mi(A.sourceEvent,{transform:L,snapGrid:V,snapToGrid:H,containerBounds:b});p={width:m.measured.width??0,height:m.measured.height??0,x:m.position.x??0,y:m.position.y??0},N={...p,pointerX:w,pointerY:P,aspectRatio:p.width/p.height},S=void 0,m.parentId&&(m.extent==="parent"||m.expandParent)&&(S=T.get(m.parentId),C=S&&m.extent==="parent"?Wv(S):void 0),E=[],k=void 0;for(const[I,z]of T)if(z.parentId===t&&(E.push({id:I,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const X=Bv(z,m,z.origin??_);k?k=[[Math.min(X[0][0],k[0][0]),Math.min(X[0][1],k[0][1])],[Math.max(X[1][0],k[1][0]),Math.max(X[1][1],k[1][1])]]:k=X}h==null||h(A,{...p})}).on("drag",A=>{const{transform:T,snapGrid:L,snapToGrid:V,nodeOrigin:H}=n(),_=mi(A.sourceEvent,{transform:T,snapGrid:L,snapToGrid:V,containerBounds:b}),O=[];if(!m)return;const{x:w,y:P,width:I,height:z}=p,X={},K=m.origin??H,{width:U,height:ee,x:B,y:j}=Xv(N,x,_,l,u,K,C,k),te=U!==I,oe=ee!==z,ce=B!==w&&te,q=j!==P&&oe;if(!ce&&!q&&!te&&!oe)return;if((ce||q||K[0]===1||K[1]===1)&&(X.x=ce?B:p.x,X.y=q?j:p.y,p.x=X.x,p.y=X.y,E.length>0)){const we=B-w,me=j-P;for(const Ee of E)Ee.position={x:Ee.position.x-we+K[0]*(U-I),y:Ee.position.y-me+K[1]*(ee-z)},O.push(Ee)}if((te||oe)&&(X.width=te?U:p.width,X.height=oe?ee:p.height,p.width=X.width,p.height=X.height),S&&m.expandParent){const we=K[0]*(X.width??0);X.x&&X.x<we&&(p.x=we,N.x=N.x-(X.x-we));const me=K[1]*(X.height??0);X.y&&X.y<me&&(p.y=me,N.y=N.y-(X.y-me))}const J=Lv({width:p.width,prevWidth:I,height:p.height,prevHeight:z,affectsX:x.affectsX,affectsY:x.affectsY}),Q={...p,direction:J};(y==null?void 0:y(A,Q))!==!1&&(f==null||f(A,Q),i(X,O))}).on("end",A=>{g==null||g(A,{...p}),r==null||r()});o.call(M)}function a(){o.on(".drag",null)}return{update:s,destroy:a}}var Fv=ue('<div role="button" tabindex="-1"><!></div>');function yn(e,t){ae(t,!1);const n=qe(),i=()=>Z(U,"$connectable",n),r=()=>Z(oe,"$connectionRadius",n),o=()=>Z(j,"$domNode",n),s=()=>Z(te,"$nodeLookup",n),a=()=>Z(B,"$connectionMode",n),c=()=>Z(J,"$lib",n),l=()=>Z(ke,"$autoPanOnConnect",n),u=()=>Z(Ge,"$flowId",n),h=()=>Z(q,"$isValidConnectionStore",n),f=()=>Z(ge,"$onedgecreate",n),g=()=>Z(Ze,"$onConnectAction",n),y=()=>Z(Ce,"$onConnectStartAction",n),p=()=>Z(pe,"$onConnectEndAction",n),N=()=>Z(ce,"$viewport",n),x=()=>Z(gt,"$connection",n),m=()=>Z(Ye,"$edges",n),b=()=>Z(He,"$connectionLookup",n),E=F(),S=F(),C=F(),k=F(),M=F(),A=F(),T=F(),L=F();let V=v(t,"id",8,void 0),H=v(t,"type",8,"source"),_=v(t,"position",24,()=>de.Top),O=v(t,"style",8,void 0),w=v(t,"isValidConnection",8,void 0),P=v(t,"onconnect",8,void 0),I=v(t,"ondisconnect",8,void 0),z=v(t,"isConnectable",8,void 0),X=v(t,"class",8,void 0);const K=Kn("svelteflow__node_id"),U=Kn("svelteflow__node_connectable"),ee=Fe(),{connectionMode:B,domNode:j,nodeLookup:te,connectionRadius:oe,viewport:ce,isValidConnection:q,lib:J,addEdge:Q,onedgecreate:ge,panBy:we,cancelConnection:me,updateConnection:Ee,autoPanOnConnect:ke,edges:Ye,connectionLookup:He,onconnect:Ze,onconnectstart:Ce,onconnectend:pe,flowId:Ge,connection:gt}=ee;function Ae(Ue){const $e=oc(Ue);($e&&Ue.button===0||!$e)&&Cv.onPointerDown(Ue,{handleId:d(C),nodeId:K,isTarget:d(E),connectionRadius:r(),domNode:o(),nodeLookup:s(),connectionMode:a(),lib:c(),autoPanOnConnect:l(),flowId:u(),isValidConnection:w()??h(),updateConnection:Ee,cancelConnection:me,panBy:we,onConnect:Ne=>{var wt;const et=f()?f()(Ne):Ne;et&&(Q(et),(wt=g())==null||wt(Ne))},onConnectStart:(Ne,et)=>{var wt;(wt=y())==null||wt(Ne,{nodeId:et.nodeId,handleId:et.handleId,handleType:et.handleType})},onConnectEnd:(Ne,et)=>{var wt;(wt=p())==null||wt(Ne,et)},getTransform:()=>[N().x,N().y,N().zoom],getFromHandle:()=>x().fromHandle})}let Qe=F(null),We=F();G(()=>Y(H()),()=>{D(E,H()==="target")}),G(()=>(Y(z()),i()),()=>{D(S,z()!==void 0?z():i())}),G(()=>Y(V()),()=>{D(C,V()||null)}),G(()=>(Y(P()),Y(I()),m(),b(),Y(H()),Y(V())),()=>{(P()||I())&&(m(),D(We,b().get(`${K}-${H()}-${V()||null}`)))}),G(()=>(d(Qe),d(We),Y(I()),Y(P())),()=>{if(d(Qe)&&!jl(d(We),d(Qe))){const Ue=d(We)??new Map;va(d(Qe),Ue,I()),va(Ue,d(Qe),P())}D(Qe,d(We)??new Map)}),G(()=>x(),()=>{D(k,!!x().fromHandle)}),G(()=>(x(),Y(H()),d(C)),()=>{var Ue,$e,Ne;D(M,((Ue=x().fromHandle)==null?void 0:Ue.nodeId)===K&&(($e=x().fromHandle)==null?void 0:$e.type)===H()&&((Ne=x().fromHandle)==null?void 0:Ne.id)===d(C))}),G(()=>(x(),Y(H()),d(C)),()=>{var Ue,$e,Ne;D(A,((Ue=x().toHandle)==null?void 0:Ue.nodeId)===K&&(($e=x().toHandle)==null?void 0:$e.type)===H()&&((Ne=x().toHandle)==null?void 0:Ne.id)===d(C))}),G(()=>(a(),x(),Y(H()),d(C)),()=>{var Ue,$e,Ne;D(T,a()===Cn.Strict?((Ue=x().fromHandle)==null?void 0:Ue.type)!==H():K!==(($e=x().fromHandle)==null?void 0:$e.nodeId)||d(C)!==((Ne=x().fromHandle)==null?void 0:Ne.id))}),G(()=>(d(A),x()),()=>{D(L,d(A)&&x().isValid)}),nt(),he();var Te=Fv();$(Te,"data-nodeid",K);const _n=re(()=>Ot(st(["svelte-flow__handle",`svelte-flow__handle-${_()}`,"nodrag","nopan",_(),X()])));var Tn=se(Te);Ke(Tn,t,"default",{}),_e(()=>{$(Te,"data-handleid",d(C)),$(Te,"data-handlepos",_()),$(Te,"data-id",`${u()??""}-${K??""}-${(V()||null)??""}-${H()??""}`),hs(Te,d(_n),""),$(Te,"style",O()),Be(Te,"valid",d(L)),Be(Te,"connectingto",d(A)),Be(Te,"connectingfrom",d(M)),Be(Te,"source",!d(E)),Be(Te,"target",d(E)),Be(Te,"connectablestart",d(S)),Be(Te,"connectableend",d(S)),Be(Te,"connectable",d(S)),Be(Te,"connectionindicator",d(S)&&(!d(k)||d(T)))}),Me("mousedown",Te,Ae),Me("touchstart",Te,Ae),W(e,Te),le()}var Zv=ue("<!> <!>",1);function Jo(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["data","targetPosition","sourcePosition"]),ae(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"targetPosition",8,void 0),o=v(t,"sourcePosition",8,void 0);he();var s=Zv(),a=ve(s),c=re(()=>r()??de.Top);yn(a,{type:"target",get position(){return d(c)}});var l=ie(a),u=ie(l),h=re(()=>o()??de.Bottom);yn(u,{type:"source",get position(){return d(h)}}),_e(()=>{var f;return mn(l,` ${((f=i())==null?void 0:f.label)??""} `)}),W(e,s),le()}var Gv=ue(" <!>",1);function qv(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["data","sourcePosition"]),ae(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"sourcePosition",8,void 0);he();var o=Gv(),s=ve(o),a=ie(s),c=re(()=>r()??de.Bottom);yn(a,{type:"source",get position(){return d(c)}}),_e(()=>{var l;return mn(s,`${((l=i())==null?void 0:l.label)??""} `)}),W(e,o),le()}var Uv=ue(" <!>",1);function Jv(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["data","targetPosition"]),ae(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"targetPosition",8,void 0);he();var o=Uv(),s=ve(o),a=ie(s),c=re(()=>r()??de.Top);yn(a,{type:"target",get position(){return d(c)}}),_e(()=>{var l;return mn(s,`${((l=i())==null?void 0:l.label)??""} `)}),W(e,o),le()}function jv(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,[])}function Pa(e,t,n){if(!t)return;const i=n?t.querySelector(n):t;i&&i.appendChild(e)}function xo(e,{target:t,domNode:n}){return Pa(e,n,t),{async update({target:i,domNode:r}){Pa(e,r,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}var Qv=ue("<div><!></div>");function $v(e,t){ae(t,!1);const n=qe(),i=()=>Z(r,"$domNode",n),{domNode:r}=Fe();he();var o=Qv(),s=se(o);Ke(s,t,"default",{}),lt(o,(a,c)=>xo==null?void 0:xo(a,c),()=>({target:".svelte-flow__edgelabel-renderer",domNode:i()})),W(e,o),le()}function _c(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:r,unselectNodesAndEdges:o,elementsSelectable:s}=Fe();return a=>{const c=R(e).get(a);if(!c){console.warn("012",er.error012(a));return}(c.selectable||R(s)&&typeof c.selectable>"u")&&(t.set(null),n.set(null),c.selected?c.selected&&R(i)&&o({nodes:[],edges:[c]}):r([a]))}}var e0=ue('<div class="svelte-flow__edge-label" role="button" tabindex="-1"><!></div>');function t0(e,t){ae(t,!1);let n=v(t,"style",8,void 0),i=v(t,"x",8,void 0),r=v(t,"y",8,void 0);const o=_c(),s=Kn("svelteflow__edge_id");he(),$v(e,{children:(a,c)=>{var l=e0(),u=se(l);Ke(u,t,"default",{}),_e(()=>{$(l,"style","pointer-events: all;"+n()),Ve(l,"transform",`translate(-50%, -50%) translate(${i()??""}px,${r()??""}px)`)}),Me("keyup",l,()=>{}),Me("click",l,()=>{s&&o(s)}),W(a,l)},$$slots:{default:!0}}),le()}var n0=je('<path fill="none" class="svelte-flow__edge-interaction"></path>'),i0=je('<path fill="none"></path><!><!>',1);function so(e,t){ae(t,!1);let n=v(t,"id",8,void 0),i=v(t,"path",8),r=v(t,"label",8,void 0),o=v(t,"labelX",8,void 0),s=v(t,"labelY",8,void 0),a=v(t,"labelStyle",8,void 0),c=v(t,"markerStart",8,void 0),l=v(t,"markerEnd",8,void 0),u=v(t,"style",8,void 0),h=v(t,"interactionWidth",8,20),f=v(t,"class",8,void 0),g=h()===void 0?20:h();he();var y=i0(),p=ve(y);const N=re(()=>Ot(st(["svelte-flow__edge-path",f()])));var x=ie(p);{var m=S=>{var C=n0();$(C,"stroke-opacity",0),$(C,"stroke-width",g),_e(()=>$(C,"d",i())),W(S,C)};Ie(x,S=>{g&&S(m)})}var b=ie(x);{var E=S=>{t0(S,{get x(){return o()},get y(){return s()},get style(){return a()},children:(C,k)=>{var M=To();_e(()=>mn(M,r())),W(C,M)},$$slots:{default:!0}})};Ie(b,S=>{r()&&S(E)})}_e(()=>{$(p,"id",n()),$(p,"d",i()),An(p,d(N),""),$(p,"marker-start",c()),$(p,"marker-end",l()),$(p,"style",u())}),W(e,y),le()}function jo(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ae(t,!1);const i=F(),r=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),c=v(t,"style",8,void 0),l=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),h=v(t,"interactionWidth",8,void 0),f=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"sourcePosition",8),p=v(t,"targetX",8),N=v(t,"targetY",8),x=v(t,"targetPosition",8);G(()=>(d(i),d(r),d(o),Y(f()),Y(g()),Y(p()),Y(N()),Y(y()),Y(x())),()=>{(m=>(D(i,m[0]),D(r,m[1]),D(o,m[2])))(sc({sourceX:f(),sourceY:g(),targetX:p(),targetY:N(),sourcePosition:y(),targetPosition:x()}))}),nt(),he(),so(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return l()},get markerEnd(){return u()},get interactionWidth(){return h()},get style(){return c()}}),le()}function r0(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ae(t,!1);const i=F(),r=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),c=v(t,"style",8,void 0),l=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),h=v(t,"interactionWidth",8,void 0),f=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"sourcePosition",8),p=v(t,"targetX",8),N=v(t,"targetY",8),x=v(t,"targetPosition",8);G(()=>(d(i),d(r),d(o),Y(f()),Y(g()),Y(p()),Y(N()),Y(y()),Y(x())),()=>{(m=>(D(i,m[0]),D(r,m[1]),D(o,m[2])))(Rr({sourceX:f(),sourceY:g(),targetX:p(),targetY:N(),sourcePosition:y(),targetPosition:x()}))}),nt(),he(),so(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return l()},get markerEnd(){return u()},get interactionWidth(){return h()},get style(){return c()}}),le()}function o0(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"]),ae(t,!1);const i=F(),r=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),c=v(t,"style",8,void 0),l=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),h=v(t,"interactionWidth",8,void 0),f=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"targetX",8),p=v(t,"targetY",8);G(()=>(d(i),d(r),d(o),Y(f()),Y(g()),Y(y()),Y(p())),()=>{(N=>(D(i,N[0]),D(r,N[1]),D(o,N[2])))(qo({sourceX:f(),sourceY:g(),targetX:y(),targetY:p()}))}),nt(),he(),so(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return l()},get markerEnd(){return u()},get interactionWidth(){return h()},get style(){return c()}}),le()}function s0(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),ae(t,!1);const i=F(),r=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),c=v(t,"style",8,void 0),l=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),h=v(t,"interactionWidth",8,void 0),f=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"sourcePosition",8),p=v(t,"targetX",8),N=v(t,"targetY",8),x=v(t,"targetPosition",8);G(()=>(d(i),d(r),d(o),Y(f()),Y(g()),Y(p()),Y(N()),Y(y()),Y(x())),()=>{(m=>(D(i,m[0]),D(r,m[1]),D(o,m[2])))(Rr({sourceX:f(),sourceY:g(),targetX:p(),targetY:N(),sourcePosition:y(),targetPosition:x(),borderRadius:0}))}),nt(),he(),so(e,{get path(){return d(i)},get labelX(){return d(r)},get labelY(){return d(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return l()},get markerEnd(){return u()},get interactionWidth(){return h()},get style(){return c()}}),le()}function a0(e,t){const n=e.set,i=t.set,r=R(e),o=R(t);let a=r.length===0&&o.length>0?o:r;e.set(a);const c=l=>{const u=n(l);return a=u,i(a),u};e.set=t.set=c,e.update=t.update=l=>c(l(a))}function l0(e,t){const n=e.set,i=t.set;let r=R(t);e.set(r);const o=s=>{n(s),i(s),r=s};e.set=t.set=o,e.update=t.update=s=>o(s(r))}const c0=(e,t,n)=>{if(!n)return;const i=R(e),r=t.set,o=n.set;let s=n?R(n):{x:0,y:0,zoom:1};t.set(s),t.set=a=>(r(a),o(a),s=a,a),n.set=a=>(i==null||i.syncViewport(a),r(a),o(a),s=a,a),t.update=a=>{t.set(a(s))},n.update=a=>{n.set(a(s))}},u0=(e,t,n,i=[0,0],r=Ir)=>{const{subscribe:o,set:s,update:a}=ne([]);let c=e,l={},u=!0;const h=p=>(lc(p,t,n,{elevateNodesOnSelect:u,nodeOrigin:i,nodeExtent:r,defaults:l,checkEquality:!1}),c=p,s(c),c),f=p=>h(p(c)),g=p=>{l=p},y=p=>{u=p.elevateNodesOnSelect??u};return h(c),{subscribe:o,set:h,update:f,setDefaultOptions:g,setOptions:y}},d0=(e,t,n,i)=>{const{subscribe:r,set:o,update:s}=ne([]);let a=e,c={};const l=f=>{const g=c?f.map(y=>({...c,...y})):f;uc(t,n,g),a=g,o(a)},u=f=>l(f(a)),h=f=>{c=f};return l(a),{subscribe:r,set:l,update:u,setDefaultOptions:h}},wc={input:qv,output:Jv,default:Jo,group:jv},xc={straight:o0,smoothstep:r0,default:jo,step:s0},f0=({nodes:e=[],edges:t=[],width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s})=>{const a=new Map,c=new Map,l=new Map,u=new Map,h=o??[0,0],f=s??Ir;lc(e,a,c,{nodeExtent:f,nodeOrigin:h,elevateNodesOnSelect:!1,checkEquality:!1}),uc(l,u,t);let g={x:0,y:0,zoom:1};if(r&&n&&i){const y=nr(a,{filter:p=>!!((p.width||p.initialWidth)&&(p.height||p.initialHeight))});g=Es(y,n,i,.5,2,.1)}return{flowId:ne(null),nodes:u0(e,a,c,h,f),nodeLookup:xt(a),parentLookup:xt(c),edgeLookup:xt(u),visibleNodes:xt([]),edges:d0(t,l,u),visibleEdges:xt([]),connectionLookup:xt(l),height:ne(500),width:ne(500),minZoom:ne(.5),maxZoom:ne(2),nodeOrigin:ne(h),nodeDragThreshold:ne(1),nodeExtent:ne(f),translateExtent:ne(Ir),autoPanOnNodeDrag:ne(!0),autoPanOnConnect:ne(!0),fitViewOnInit:ne(!1),fitViewOnInitDone:ne(!1),fitViewOptions:ne(void 0),panZoom:ne(null),snapGrid:ne(null),dragging:ne(!1),selectionRect:ne(null),selectionKeyPressed:ne(!1),multiselectionKeyPressed:ne(!1),deleteKeyPressed:ne(!1),panActivationKeyPressed:ne(!1),zoomActivationKeyPressed:ne(!1),selectionRectMode:ne(null),selectionMode:ne(Tr.Partial),nodeTypes:ne(wc),edgeTypes:ne(xc),viewport:ne(g),connectionMode:ne(Cn.Strict),domNode:ne(null),connection:xt(Fo),connectionLineType:ne(Xn.Bezier),connectionRadius:ne(20),isValidConnection:ne(()=>!0),nodesDraggable:ne(!0),nodesConnectable:ne(!0),elementsSelectable:ne(!0),selectNodesOnDrag:ne(!0),markers:xt([]),defaultMarkerColor:ne("#b1b1b7"),lib:xt("svelte"),onlyRenderVisibleElements:ne(!1),onerror:ne(Jg),ondelete:ne(void 0),onedgecreate:ne(void 0),onconnect:ne(void 0),onconnectstart:ne(void 0),onconnectend:ne(void 0),onbeforedelete:ne(void 0),nodesInitialized:ne(!1),edgesInitialized:ne(!1),viewportInitialized:ne(!1),initialized:xt(!1)}};function h0(e){const t=En([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,i,r,o,s,a])=>r&&s&&a?n.filter(l=>{const u=i.get(l.source),h=i.get(l.target);return u&&h&&iv({sourceNode:u,targetNode:h,width:s,height:a,transform:[o.x,o.y,o.zoom]})}):n);return En([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,i,r,o])=>n.reduce((a,c)=>{const l=i.get(c.source),u=i.get(c.target);if(!l||!u)return a;const h=uv({id:c.id,sourceNode:l,targetNode:u,sourceHandle:c.sourceHandle||null,targetHandle:c.targetHandle||null,connectionMode:r,onError:o});return h&&a.push({...c,zIndex:nv({selected:c.selected,zIndex:c.zIndex,sourceNode:l,targetNode:u,elevateOnSelect:!1}),...h}),a},[]))}function g0(e){return En([e.nodeLookup,e.onlyRenderVisibleElements,e.width,e.height,e.viewport,e.nodes],([t,n,i,r,o])=>{const s=[o.x,o.y,o.zoom];return n?Ql(t,{x:0,y:0,width:i,height:r},s,!0):Array.from(t.values())})}const Ms=Symbol();function v0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s}){const a=f0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s});function c(w){a.nodeTypes.set({...wc,...w})}function l(w){a.edgeTypes.set({...xc,...w})}function u(w){const P=R(a.edges);a.edges.set(sv(w,P))}const h=(w,P=!1)=>{var z;const I=R(a.nodeLookup);for(const[X,K]of w){const U=(z=I.get(X))==null?void 0:z.internals.userNode;U&&(U.position=K.position,U.dragging=P)}a.nodes.update(X=>X)};function f(w){var K,U,ee;const P=R(a.nodeLookup),I=R(a.parentLookup),{changes:z,updatedInternals:X}=yv(w,P,R(a.parentLookup),R(a.domNode),R(a.nodeOrigin));if(X){if(hv(P,I,{nodeOrigin:o,nodeExtent:s}),!R(a.fitViewOnInitDone)&&R(a.fitViewOnInit)){const B=R(a.fitViewOptions),j=y({...B,nodes:B==null?void 0:B.nodes});a.fitViewOnInitDone.set(j)}for(const B of z){const j=(K=P.get(B.id))==null?void 0:K.internals.userNode;if(j)switch(B.type){case"dimensions":{const te={...j.measured,...B.dimensions};B.setAttributes&&(j.width=((U=B.dimensions)==null?void 0:U.width)??j.width,j.height=((ee=B.dimensions)==null?void 0:ee.height)??j.height),j.measured=te;break}case"position":j.position=B.position??j.position;break}}a.nodes.update(B=>B),R(a.nodesInitialized)||a.nodesInitialized.set(!0)}}function g(w){const P=R(a.panZoom),I=R(a.domNode);if(!P||!I)return Promise.resolve(!1);const{width:z,height:X}=Ss(I),K=ma(R(a.nodeLookup),w);return ya({nodes:K,width:z,height:X,minZoom:R(a.minZoom),maxZoom:R(a.maxZoom),panZoom:P},w)}function y(w){const P=R(a.panZoom);if(!P)return!1;const I=ma(R(a.nodeLookup),w);return ya({nodes:I,width:R(a.width),height:R(a.height),minZoom:R(a.minZoom),maxZoom:R(a.maxZoom),panZoom:P},w),I.size>0}function p(w,P){const I=R(a.panZoom);return I?I.scaleBy(w,P):Promise.resolve(!1)}function N(w){return p(1.2,w)}function x(w){return p(1/1.2,w)}function m(w){const P=R(a.panZoom);P&&(P.setScaleExtent([w,R(a.maxZoom)]),a.minZoom.set(w))}function b(w){const P=R(a.panZoom);P&&(P.setScaleExtent([R(a.minZoom),w]),a.maxZoom.set(w))}function E(w){const P=R(a.panZoom);P&&(P.setTranslateExtent(w),a.translateExtent.set(w))}function S(w){let P=!1;return w.forEach(I=>{I.selected&&(I.selected=!1,P=!0)}),P}function C(w){var P;(P=R(a.panZoom))==null||P.setClickDistance(w)}function k(w){S((w==null?void 0:w.nodes)||R(a.nodes))&&a.nodes.set(R(a.nodes)),S((w==null?void 0:w.edges)||R(a.edges))&&a.edges.set(R(a.edges))}a.deleteKeyPressed.subscribe(async w=>{var P;if(w){const I=R(a.nodes),z=R(a.edges),X=I.filter(B=>B.selected),K=z.filter(B=>B.selected),{nodes:U,edges:ee}=await $l({nodesToRemove:X,edgesToRemove:K,nodes:I,edges:z,onBeforeDelete:R(a.onbeforedelete)});(U.length||ee.length)&&(a.nodes.update(B=>B.filter(j=>!U.some(te=>te.id===j.id))),a.edges.update(B=>B.filter(j=>!ee.some(te=>te.id===j.id))),(P=R(a.ondelete))==null||P({nodes:U,edges:ee}))}});function M(w){const P=R(a.multiselectionKeyPressed);a.nodes.update(I=>I.map(z=>{const X=w.includes(z.id),K=P&&z.selected||X;return z.selected=K,z})),P||a.edges.update(I=>I.map(z=>(z.selected=!1,z)))}function A(w){const P=R(a.multiselectionKeyPressed);a.edges.update(I=>I.map(z=>{const X=w.includes(z.id),K=P&&z.selected||X;return z.selected=K,z})),P||a.nodes.update(I=>I.map(z=>(z.selected=!1,z)))}function T(w){var I;const P=(I=R(a.nodes))==null?void 0:I.find(z=>z.id===w);if(!P){console.warn("012",er.error012(w));return}a.selectionRect.set(null),a.selectionRectMode.set(null),P.selected?P.selected&&R(a.multiselectionKeyPressed)&&k({nodes:[P],edges:[]}):M([w])}function L(w){const P=R(a.viewport);return pv({delta:w,panZoom:R(a.panZoom),transform:[P.x,P.y,P.zoom],translateExtent:R(a.translateExtent),width:R(a.width),height:R(a.height)})}const V=ne(Fo),H=w=>{V.set({...w})};function _(){V.set(Fo)}function O(){a.fitViewOnInitDone.set(!1),a.selectionRect.set(null),a.selectionRectMode.set(null),a.snapGrid.set(null),a.isValidConnection.set(()=>!0),k(),_()}return{...a,visibleEdges:h0(a),visibleNodes:g0(a),connection:En([V,a.viewport],([w,P])=>w.inProgress?{...w,to:ir(w.to,[P.x,P.y,P.zoom])}:{...w}),markers:En([a.edges,a.defaultMarkerColor,a.flowId],([w,P,I])=>dv(w,{defaultColor:P,id:I})),initialized:(()=>{let w=!1;const P=R(a.nodes).length,I=R(a.edges).length;return En([a.nodesInitialized,a.edgesInitialized,a.viewportInitialized],([z,X,K])=>w||(P===0?w=K:I===0?w=K&&z:w=K&&z&&X,w))})(),syncNodeStores:w=>a0(a.nodes,w),syncEdgeStores:w=>l0(a.edges,w),syncViewport:w=>c0(a.panZoom,a.viewport,w),setNodeTypes:c,setEdgeTypes:l,addEdge:u,updateNodePositions:h,updateNodeInternals:f,zoomIn:N,zoomOut:x,fitView:w=>g(w),setMinZoom:m,setMaxZoom:b,setTranslateExtent:E,setPaneClickDistance:C,unselectNodesAndEdges:k,addSelectedNodes:M,addSelectedEdges:A,handleNodeSelection:T,panBy:L,updateConnection:H,cancelConnection:_,reset:O}}function Fe(){const e=Kn(Ms);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function m0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s}){const a=v0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s});return Sr(Ms,{getStore:()=>a}),a}function bo(e,t){const{panZoom:n,minZoom:i,maxZoom:r,initialViewport:o,viewport:s,dragging:a,translateExtent:c,paneClickDistance:l}=t,u=Hv({domNode:e,minZoom:i,maxZoom:r,translateExtent:c,viewport:o,paneClickDistance:l,onDraggingChange:a.set}),h=u.getViewport();return s.set(h),n.set(u),u.update(t),{update(f){u.update(f)}}}var y0=ue('<div class="svelte-flow__zoom svelte-4xkw84"><!></div>');function p0(e,t){ae(t,!1);const n=qe(),i=()=>Z(P,"$panActivationKeyPressed",n),r=()=>Z(V,"$minZoom",n),o=()=>Z(H,"$maxZoom",n),s=()=>Z(I,"$zoomActivationKeyPressed",n),a=()=>Z(L,"$selectionRect",n),c=()=>Z(O,"$translateExtent",n),l=()=>Z(w,"$lib",n),u=F(),h=F(),f=F();let g=v(t,"initialViewport",8,void 0),y=v(t,"onMoveStart",8,void 0),p=v(t,"onMove",8,void 0),N=v(t,"onMoveEnd",8,void 0),x=v(t,"panOnScrollMode",8),m=v(t,"preventScrolling",8),b=v(t,"zoomOnScroll",8),E=v(t,"zoomOnDoubleClick",8),S=v(t,"zoomOnPinch",8),C=v(t,"panOnDrag",8),k=v(t,"panOnScroll",8),M=v(t,"paneClickDistance",8);const{viewport:A,panZoom:T,selectionRect:L,minZoom:V,maxZoom:H,dragging:_,translateExtent:O,lib:w,panActivationKeyPressed:P,zoomActivationKeyPressed:I,viewportInitialized:z}=Fe(),X=ee=>A.set({x:ee[0],y:ee[1],zoom:ee[2]});zn(()=>{wi(z,!0)}),G(()=>Y(g()),()=>{D(u,g()||{x:0,y:0,zoom:1})}),G(()=>(i(),Y(C())),()=>{D(h,i()||C())}),G(()=>(i(),Y(k())),()=>{D(f,i()||k())}),nt(),he();var K=y0(),U=se(K);Ke(U,t,"default",{}),lt(K,(ee,B)=>bo==null?void 0:bo(ee,B),()=>({viewport:A,minZoom:r(),maxZoom:o(),initialViewport:d(u),dragging:_,panZoom:T,onPanZoomStart:y(),onPanZoom:p(),onPanZoomEnd:N(),zoomOnScroll:b(),zoomOnDoubleClick:E(),zoomOnPinch:S(),panOnScroll:d(f),panOnDrag:d(h),panOnScrollSpeed:.5,panOnScrollMode:x()||fn.Free,zoomActivationKeyPressed:s(),preventScrolling:typeof m()=="boolean"?m():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a(),translateExtent:c(),lib:l(),paneClickDistance:M(),onTransformChange:X})),W(e,K),le()}function Aa(e,t){return n=>{n.target===t&&(e==null||e(n))}}function za(e){return t=>{const n=e.includes(t.id);return t.selected!==n&&(t.selected=n),t}}var _0=ue('<div class="svelte-flow__pane svelte-1esy7hx"><!></div>');function w0(e,t){ae(t,!1);const n=qe(),i=()=>Z(H,"$panActivationKeyPressed",n),r=()=>Z(L,"$selectionKeyPressed",n),o=()=>Z(A,"$selectionRect",n),s=()=>Z(M,"$elementsSelectable",n),a=()=>Z(T,"$selectionRectMode",n),c=()=>Z(S,"$edges",n),l=()=>Z(E,"$nodeLookup",n),u=()=>Z(C,"$viewport",n),h=()=>Z(V,"$selectionMode",n),f=()=>Z(k,"$dragging",n),g=F(),y=F(),p=F();let N=v(t,"panOnDrag",8,void 0),x=v(t,"selectionOnDrag",8,void 0);const m=jr(),{nodes:b,nodeLookup:E,edges:S,viewport:C,dragging:k,elementsSelectable:M,selectionRect:A,selectionRectMode:T,selectionKeyPressed:L,selectionMode:V,panActivationKeyPressed:H,unselectNodesAndEdges:_}=Fe();let O=F(),w=null,P=[],I=!1;function z(q){if(I){I=!1;return}m("paneclick",{event:q}),_(),T.set(null)}function X(q){var ge,we;if(w=d(O).getBoundingClientRect(),!M||!d(y)||q.button!==0||q.target!==d(O)||!w)return;(we=(ge=q.target)==null?void 0:ge.setPointerCapture)==null||we.call(ge,q.pointerId);const{x:J,y:Q}=jt(q,w);_(),A.set({width:0,height:0,startX:J,startY:Q,x:J,y:Q})}function K(q){if(!d(y)||!w||!o())return;I=!0;const J=jt(q,w),Q=o().startX??0,ge=o().startY??0,we={...o(),x:J.x<Q?J.x:Q,y:J.y<ge?J.y:ge,width:Math.abs(J.x-Q),height:Math.abs(J.y-ge)},me=P.map(He=>He.id),Ee=Zo(P,c()).map(He=>He.id);P=Ql(l(),we,[u().x,u().y,u().zoom],h()===Tr.Partial,!0);const ke=Zo(P,c()).map(He=>He.id),Ye=P.map(He=>He.id);(me.length!==Ye.length||Ye.some(He=>!me.includes(He)))&&b.update(He=>He.map(za(Ye))),(Ee.length!==ke.length||ke.some(He=>!Ee.includes(He)))&&S.update(He=>He.map(za(ke))),T.set("user"),A.set(we)}function U(q){var J,Q;q.button===0&&((Q=(J=q.target)==null?void 0:J.releasePointerCapture)==null||Q.call(J,q.pointerId),!d(y)&&a()==="user"&&q.target===d(O)&&(z==null||z(q)),A.set(null),P.length>0&&wi(T,"nodes"),r()&&(I=!1))}const ee=q=>{var J;if(Array.isArray(d(g))&&((J=d(g))!=null&&J.includes(2))){q.preventDefault();return}m("panecontextmenu",{event:q})};G(()=>(i(),Y(N())),()=>{D(g,i()||N())}),G(()=>(r(),o(),Y(x()),d(g)),()=>{D(y,r()||o()||x()&&d(g)!==!0)}),G(()=>(s(),d(y),a()),()=>{D(p,s()&&(d(y)||a()==="user"))}),nt(),he();var B=_0(),j=At(()=>d(p)?void 0:Aa(z,d(O))),te=At(()=>Aa(ee,d(O)));const oe=re(()=>N()===!0||Array.isArray(N())&&N().includes(0));_e(()=>Be(B,"draggable",d(oe)));var ce=se(B);Ke(ce,t,"default",{}),ji(B,q=>D(O,q),()=>d(O)),_e(()=>{Be(B,"dragging",f()),Be(B,"selection",d(y))}),Me("click",B,function(...q){var J;(J=d(j))==null||J.apply(this,q)}),Me("pointerdown",B,function(...q){var J;(J=d(p)?X:void 0)==null||J.apply(this,q)}),Me("pointermove",B,function(...q){var J;(J=d(p)?K:void 0)==null||J.apply(this,q)}),Me("pointerup",B,function(...q){var J;(J=d(p)?U:void 0)==null||J.apply(this,q)}),Me("contextmenu",B,function(...q){var J;(J=d(te))==null||J.apply(this,q)}),W(e,B),le()}var x0=ue('<div class="svelte-flow__viewport xyflow__viewport svelte-1floaup"><!></div>');function b0(e,t){ae(t,!1);const n=qe(),i=()=>Z(r,"$viewport",n),{viewport:r}=Fe();he();var o=x0(),s=se(o);Ke(s,t,"default",{}),_e(()=>$(o,"style",`transform: translate(${i().x??""}px, ${i().y??""}px) scale(${i().zoom??""})`)),W(e,o),le()}function Yn(e,t){const{store:n,onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:s}=t,a=wv({onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const l=R(n.snapGrid),u=R(n.viewport);return{nodes:R(n.nodes),nodeLookup:R(n.nodeLookup),edges:R(n.edges),nodeExtent:R(n.nodeExtent),snapGrid:l||[0,0],snapToGrid:!!l,nodeOrigin:R(n.nodeOrigin),multiSelectionActive:R(n.multiselectionKeyPressed),domNode:R(n.domNode),transform:[u.x,u.y,u.zoom],autoPanOnNodeDrag:R(n.autoPanOnNodeDrag),nodesDraggable:R(n.nodesDraggable),selectNodesOnDrag:R(n.selectNodesOnDrag),nodeDragThreshold:R(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function c(l,u){if(u.disabled){a.destroy();return}a.update({domNode:l,noDragClassName:u.noDragClass,handleSelector:u.handleSelector,nodeId:u.nodeId,isSelectable:u.isSelectable,nodeClickDistance:u.nodeClickDistance})}return c(e,t),{update(l){c(e,l)},destroy(){a.destroy()}}}function E0({width:e,height:t,initialWidth:n,initialHeight:i,measuredWidth:r,measuredHeight:o}){if(r===void 0&&o===void 0){const s=e??n,a=t??i;return{width:s?`width:${s}px;`:"",height:a?`height:${a}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}var S0=ue("<div><!></div>");function k0(e,t){ae(t,!1);const n=qe(),i=()=>Z(B,"$nodeTypes",n),r=()=>Z(ge,"$connectableStore",n),o=F(void 0,!0),s=F(void 0,!0),a=F(void 0,!0),c=F(void 0,!0);let l=v(t,"node",9),u=v(t,"id",9),h=v(t,"data",25,()=>({})),f=v(t,"selected",9,!1),g=v(t,"draggable",9,void 0),y=v(t,"selectable",9,void 0),p=v(t,"connectable",9,!0),N=v(t,"deletable",9,!0),x=v(t,"hidden",9,!1),m=v(t,"dragging",9,!1),b=v(t,"resizeObserver",9,null),E=v(t,"style",9,void 0),S=v(t,"type",9,"default"),C=v(t,"isParent",9,!1),k=v(t,"positionX",9),M=v(t,"positionY",9),A=v(t,"sourcePosition",9,void 0),T=v(t,"targetPosition",9,void 0),L=v(t,"zIndex",9),V=v(t,"measuredWidth",9,void 0),H=v(t,"measuredHeight",9,void 0),_=v(t,"initialWidth",9,void 0),O=v(t,"initialHeight",9,void 0),w=v(t,"width",9,void 0),P=v(t,"height",9,void 0),I=v(t,"dragHandle",9,void 0),z=v(t,"initialized",9,!1),X=v(t,"parentId",9,void 0),K=v(t,"nodeClickDistance",9,void 0),U=v(t,"class",9,"");const ee=Fe(),{nodeTypes:B,nodeDragThreshold:j,selectNodesOnDrag:te,handleNodeSelection:oe,updateNodeInternals:ce}=ee;let q=F(void 0,!0),J=F(null,!0);const Q=jr(),ge=ne(p());let we=F(void 0,!0),me=F(void 0,!0),Ee=F(void 0,!0);Sr("svelteflow__node_id",u()),Sr("svelteflow__node_connectable",ge),wl(()=>{var Ce;d(J)&&((Ce=b())==null||Ce.unobserve(d(J)))});function ke(Ce){y()&&(!R(te)||!g()||R(j)>0)&&oe(u()),Q("nodeclick",{node:l().internals.userNode,event:Ce})}G(()=>Y(S()),()=>{D(o,S()||"default")}),G(()=>(i(),d(o)),()=>{D(s,!!i()[d(o)])}),G(()=>(i(),d(o),Jo),()=>{D(a,i()[d(o)]||Jo)}),G(()=>(d(s),Y(S())),()=>{d(s)||console.warn("003",er.error003(S()))}),G(()=>(Y(w()),Y(P()),Y(_()),Y(O()),Y(V()),Y(H())),()=>{D(c,E0({width:w(),height:P(),initialWidth:_(),initialHeight:O(),measuredWidth:V(),measuredHeight:H()}))}),G(()=>Y(p()),()=>{ge.set(!!p())}),G(()=>(d(we),d(o),d(me),Y(A()),d(Ee),Y(T()),Y(u()),d(q)),()=>{(d(we)&&d(o)!==d(we)||d(me)&&A()!==d(me)||d(Ee)&&T()!==d(Ee))&&requestAnimationFrame(()=>ce(new Map([[u(),{id:u(),nodeElement:d(q),force:!0}]]))),D(we,d(o)),D(me,A()),D(Ee,T())}),G(()=>(Y(b()),d(q),d(J),Y(z())),()=>{b()&&(d(q)!==d(J)||!z())&&(d(J)&&b().unobserve(d(J)),d(q)&&b().observe(d(q)),D(J,d(q)))}),nt(),he(!0);var Ye=Xe(),He=ve(Ye);{var Ze=Ce=>{var pe=S0();const Ge=re(()=>Ot(st(["svelte-flow__node",`svelte-flow__node-${d(o)}`,U()])));var gt=se(pe);vl(gt,()=>d(a),(Ae,Qe)=>{Qe(Ae,{get data(){return h()},get id(){return u()},get selected(){return f()},get selectable(){return y()},get deletable(){return N()},get sourcePosition(){return A()},get targetPosition(){return T()},get zIndex(){return L()},get dragging(){return m()},get draggable(){return g()},get dragHandle(){return I()},get parentId(){return X()},get type(){return d(o)},get isConnectable(){return r()},get positionAbsoluteX(){return k()},get positionAbsoluteY(){return M()},get width(){return w()},get height(){return P()}})}),lt(pe,(Ae,Qe)=>Yn==null?void 0:Yn(Ae,Qe),()=>({nodeId:u(),isSelectable:y(),disabled:!1,handleSelector:I(),noDragClass:"nodrag",nodeClickDistance:K(),onNodeMouseDown:oe,onDrag:(Ae,Qe,We,Te)=>{Q("nodedrag",{event:Ae,targetNode:We,nodes:Te})},onDragStart:(Ae,Qe,We,Te)=>{Q("nodedragstart",{event:Ae,targetNode:We,nodes:Te})},onDragStop:(Ae,Qe,We,Te)=>{Q("nodedragstop",{event:Ae,targetNode:We,nodes:Te})},store:ee})),ji(pe,Ae=>D(q,Ae),()=>d(q)),mt(()=>Me("click",pe,ke)),mt(()=>Me("mouseenter",pe,Ae=>Q("nodemouseenter",{node:l(),event:Ae}))),mt(()=>Me("mouseleave",pe,Ae=>Q("nodemouseleave",{node:l(),event:Ae}))),mt(()=>Me("mousemove",pe,Ae=>Q("nodemousemove",{node:l(),event:Ae}))),mt(()=>Me("contextmenu",pe,Ae=>Q("nodecontextmenu",{node:l(),event:Ae}))),_e(()=>{$(pe,"data-id",u()),hs(pe,d(Ge),""),$(pe,"style",`${E()??""??""};${d(c).width??""}${d(c).height??""}`),Be(pe,"dragging",m()),Be(pe,"selected",f()),Be(pe,"draggable",g()),Be(pe,"connectable",p()),Be(pe,"selectable",y()),Be(pe,"nopan",g()),Be(pe,"parent",C()),Ve(pe,"z-index",L()),Ve(pe,"transform",`translate(${k()??""}px, ${M()??""}px)`),Ve(pe,"visibility",z()?"visible":"hidden")}),W(Ce,pe)};Ie(He,Ce=>{x()||Ce(Ze)})}W(e,Ye),le()}var C0=ue('<div class="svelte-flow__nodes svelte-tf4uy4"></div>');function N0(e,t){ae(t,!1);const n=qe(),i=()=>Z(l,"$visibleNodes",n),r=()=>Z(u,"$nodesDraggable",n),o=()=>Z(f,"$elementsSelectable",n),s=()=>Z(h,"$nodesConnectable",n),a=()=>Z(y,"$parentLookup",n);let c=v(t,"nodeClickDistance",8,0);const{visibleNodes:l,nodesDraggable:u,nodesConnectable:h,elementsSelectable:f,updateNodeInternals:g,parentLookup:y}=Fe(),p=typeof ResizeObserver>"u"?null:new ResizeObserver(x=>{const m=new Map;x.forEach(b=>{const E=b.target.getAttribute("data-id");m.set(E,{id:E,nodeElement:b.target,force:!0})}),g(m)});wl(()=>{p==null||p.disconnect()}),he();var N=C0();Yt(N,5,i,x=>x.id,(x,m)=>{var b=re(()=>!!d(m).selected),E=re(()=>!!d(m).hidden),S=re(()=>!!(d(m).draggable||r()&&typeof d(m).draggable>"u")),C=re(()=>!!(d(m).selectable||o()&&typeof d(m).selectable>"u")),k=re(()=>!!(d(m).connectable||s()&&typeof d(m).connectable>"u")),M=re(()=>d(m).deletable??!0),A=re(()=>a().has(d(m).id)),T=re(()=>d(m).type??"default"),L=re(()=>d(m).internals.z??0),V=re(()=>rc(d(m)));k0(x,{get node(){return d(m)},get id(){return d(m).id},get data(){return d(m).data},get selected(){return d(b)},get hidden(){return d(E)},get draggable(){return d(S)},get selectable(){return d(C)},get connectable(){return d(k)},get deletable(){return d(M)},get positionX(){return d(m).internals.positionAbsolute.x},get positionY(){return d(m).internals.positionAbsolute.y},get isParent(){return d(A)},get style(){return d(m).style},get class(){return d(m).class},get type(){return d(T)},get sourcePosition(){return d(m).sourcePosition},get targetPosition(){return d(m).targetPosition},get dragging(){return d(m).dragging},get zIndex(){return d(L)},get dragHandle(){return d(m).dragHandle},get initialized(){return d(V)},get width(){return d(m).width},get height(){return d(m).height},get initialWidth(){return d(m).initialWidth},get initialHeight(){return d(m).initialHeight},get measuredWidth(){return d(m).measured.width},get measuredHeight(){return d(m).measured.height},get parentId(){return d(m).parentId},resizeObserver:p,get nodeClickDistance(){return c()},$$events:{nodeclick(H){be.call(this,t,H)},nodemouseenter(H){be.call(this,t,H)},nodemousemove(H){be.call(this,t,H)},nodemouseleave(H){be.call(this,t,H)},nodedrag(H){be.call(this,t,H)},nodedragstart(H){be.call(this,t,H)},nodedragstop(H){be.call(this,t,H)},nodecontextmenu(H){be.call(this,t,H)}}})}),W(e,N),le()}var M0=je('<svg><g role="img"><!></g></svg>');function P0(e,t){ae(t,!1);const n=qe(),i=()=>Z(B,"$edgeTypes",n),r=()=>Z(j,"$flowId",n),o=()=>Z(te,"$elementsSelectable",n),s=()=>Z(ee,"$edgeLookup",n),a=F(void 0,!0),c=F(void 0,!0),l=F(void 0,!0),u=F(void 0,!0),h=F(void 0,!0);let f=v(t,"id",9),g=v(t,"type",9,"default"),y=v(t,"source",9,""),p=v(t,"target",9,""),N=v(t,"data",25,()=>({})),x=v(t,"style",9,void 0),m=v(t,"zIndex",9,void 0),b=v(t,"animated",9,!1),E=v(t,"selected",9,!1),S=v(t,"selectable",9,void 0),C=v(t,"deletable",9,void 0),k=v(t,"hidden",9,!1),M=v(t,"label",9,void 0),A=v(t,"labelStyle",9,void 0),T=v(t,"markerStart",9,void 0),L=v(t,"markerEnd",9,void 0),V=v(t,"sourceHandle",9,void 0),H=v(t,"targetHandle",9,void 0),_=v(t,"sourceX",9),O=v(t,"sourceY",9),w=v(t,"targetX",9),P=v(t,"targetY",9),I=v(t,"sourcePosition",9),z=v(t,"targetPosition",9),X=v(t,"ariaLabel",9,void 0),K=v(t,"interactionWidth",9,void 0),U=v(t,"class",9,"");Sr("svelteflow__edge_id",f());const{edgeLookup:ee,edgeTypes:B,flowId:j,elementsSelectable:te}=Fe(),oe=jr(),ce=_c();function q(me){const Ee=s().get(f());Ee&&(ce(f()),oe("edgeclick",{event:me,edge:Ee}))}function J(me,Ee){const ke=s().get(f());ke&&oe(Ee,{event:me,edge:ke})}G(()=>Y(g()),()=>{D(a,g()||"default")}),G(()=>(i(),d(a),jo),()=>{D(c,i()[d(a)]||jo)}),G(()=>(Y(T()),r()),()=>{D(l,T()?`url('#${Uo(T(),r())}')`:void 0)}),G(()=>(Y(L()),r()),()=>{D(u,L()?`url('#${Uo(L(),r())}')`:void 0)}),G(()=>(Y(S()),o()),()=>{D(h,S()??o())}),nt(),he(!0);var Q=Xe(),ge=ve(Q);{var we=me=>{var Ee=M0(),ke=se(Ee);const Ye=re(()=>Ot(st(["svelte-flow__edge",U()])));var He=se(ke),Ze=re(()=>C()??!0);vl(He,()=>d(c),(Ce,pe)=>{pe(Ce,{get id(){return f()},get source(){return y()},get target(){return p()},get sourceX(){return _()},get sourceY(){return O()},get targetX(){return w()},get targetY(){return P()},get sourcePosition(){return I()},get targetPosition(){return z()},get animated(){return b()},get selected(){return E()},get label(){return M()},get labelStyle(){return A()},get data(){return N()},get style(){return x()},get interactionWidth(){return K()},get selectable(){return d(h)},get deletable(){return d(Ze)},get type(){return d(a)},get sourceHandleId(){return V()},get targetHandleId(){return H()},get markerStart(){return d(l)},get markerEnd(){return d(u)}})}),_e(()=>{Ve(Ee,"z-index",m()),An(ke,d(Ye),""),$(ke,"data-id",f()),$(ke,"aria-label",X()===null?void 0:X()?X():`Edge from ${y()} to ${p()}`),Be(ke,"animated",b()),Be(ke,"selected",E()),Be(ke,"selectable",d(h))}),Me("click",ke,q),Me("contextmenu",ke,Ce=>{J(Ce,"edgecontextmenu")}),Me("mouseenter",ke,Ce=>{J(Ce,"edgemouseenter")}),Me("mouseleave",ke,Ce=>{J(Ce,"edgemouseleave")}),W(me,Ee)};Ie(ge,me=>{k()||me(we)})}W(e,Q),le()}function A0(e,t){ae(t,!1);let n=v(t,"onMount",8,void 0),i=v(t,"onDestroy",8,void 0);zn(()=>{var r;return(r=n())==null||r(),i()}),he(),le()}var z0=je("<defs></defs>");function I0(e,t){ae(t,!1);const n=qe(),i=()=>Z(r,"$markers",n),{markers:r}=Fe();he();var o=z0();Yt(o,5,i,s=>s.id,(s,a)=>{D0(s,pt(()=>d(a)))}),W(e,o),le()}var T0=je('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),O0=je('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),H0=je('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function D0(e,t){ae(t,!1);let n=v(t,"id",8),i=v(t,"type",8),r=v(t,"width",8,12.5),o=v(t,"height",8,12.5),s=v(t,"markerUnits",8,"strokeWidth"),a=v(t,"orient",8,"auto-start-reverse"),c=v(t,"color",8,void 0),l=v(t,"strokeWidth",8,void 0);he();var u=H0(),h=se(u);{var f=y=>{var p=T0();_e(()=>{$(p,"stroke",c()),$(p,"stroke-width",l())}),W(y,p)},g=y=>{var p=Xe(),N=ve(p);{var x=m=>{var b=O0();_e(()=>{$(b,"stroke",c()),$(b,"stroke-width",l()),$(b,"fill",c())}),W(m,b)};Ie(N,m=>{i()===Or.ArrowClosed&&m(x)},!0)}W(y,p)};Ie(h,y=>{i()===Or.Arrow?y(f):y(g,!1)})}_e(()=>{$(u,"id",n()),$(u,"markerWidth",`${r()}`),$(u,"markerHeight",`${o()}`),$(u,"markerUnits",s()),$(u,"orient",a())}),W(e,u),le()}var R0=ue('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function L0(e,t){ae(t,!1);const n=qe(),i=()=>Z(s,"$visibleEdges",n),r=()=>Z(l,"$elementsSelectable",n);let o=v(t,"defaultEdgeOptions",8);const{visibleEdges:s,edgesInitialized:a,edges:{setDefaultOptions:c},elementsSelectable:l}=Fe();zn(()=>{o()&&c(o())}),he();var u=R0(),h=se(u),f=se(h);I0(f,{});var g=ie(h,2);Yt(g,1,i,N=>N.id,(N,x)=>{var m=re(()=>d(x).selectable??r()),b=re(()=>d(x).type||"default");P0(N,{get id(){return d(x).id},get source(){return d(x).source},get target(){return d(x).target},get data(){return d(x).data},get style(){return d(x).style},get animated(){return d(x).animated},get selected(){return d(x).selected},get selectable(){return d(m)},get deletable(){return d(x).deletable},get hidden(){return d(x).hidden},get label(){return d(x).label},get labelStyle(){return d(x).labelStyle},get markerStart(){return d(x).markerStart},get markerEnd(){return d(x).markerEnd},get sourceHandle(){return d(x).sourceHandle},get targetHandle(){return d(x).targetHandle},get sourceX(){return d(x).sourceX},get sourceY(){return d(x).sourceY},get targetX(){return d(x).targetX},get targetY(){return d(x).targetY},get sourcePosition(){return d(x).sourcePosition},get targetPosition(){return d(x).targetPosition},get ariaLabel(){return d(x).ariaLabel},get interactionWidth(){return d(x).interactionWidth},get class(){return d(x).class},get type(){return d(b)},get zIndex(){return d(x).zIndex},$$events:{edgeclick(E){be.call(this,t,E)},edgecontextmenu(E){be.call(this,t,E)},edgemouseenter(E){be.call(this,t,E)},edgemouseleave(E){be.call(this,t,E)}}})});var y=ie(g,2);{var p=N=>{A0(N,{onMount:()=>{wi(a,!0)},onDestroy:()=>{wi(a,!1)}})};Ie(y,N=>{i().length>0&&N(p)})}W(e,u),le()}var V0=ue('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function bc(e,t){let n=v(t,"x",8,0),i=v(t,"y",8,0),r=v(t,"width",8,0),o=v(t,"height",8,0),s=v(t,"isVisible",8,!0);var a=Xe(),c=ve(a);{var l=u=>{var h=V0();_e(()=>{Ve(h,"width",typeof r()=="string"?r():`${r()}px`),Ve(h,"height",typeof o()=="string"?o():`${o()}px`),Ve(h,"transform",`translate(${n()}px, ${i()}px)`)}),W(u,h)};Ie(c,u=>{s()&&u(l)})}W(e,a)}function X0(e,t){ae(t,!1);const n=qe(),i=()=>Z(o,"$selectionRect",n),r=()=>Z(s,"$selectionRectMode",n),{selectionRect:o,selectionRectMode:s}=Fe();he();var a=re(()=>!!(i()&&r()==="user")),c=re(()=>{var f;return(f=i())==null?void 0:f.width}),l=re(()=>{var f;return(f=i())==null?void 0:f.height}),u=re(()=>{var f;return(f=i())==null?void 0:f.x}),h=re(()=>{var f;return(f=i())==null?void 0:f.y});bc(e,{get isVisible(){return d(a)},get width(){return d(c)},get height(){return d(l)},get x(){return d(u)},get y(){return d(h)}}),le()}var Y0=ue('<div class="selection-wrapper nopan svelte-5pxri" role="button" tabindex="-1"><!></div>');function W0(e,t){ae(t,!1);const n=qe(),i=()=>Z(a,"$selectionRectMode",n),r=()=>Z(l,"$nodeLookup",n),o=()=>Z(c,"$nodes",n),s=Fe(),{selectionRectMode:a,nodes:c,nodeLookup:l}=s,u=jr();let h=F(null);function f(x){const m=o().filter(b=>b.selected);u("selectioncontextmenu",{nodes:m,event:x})}function g(x){const m=o().filter(b=>b.selected);u("selectionclick",{nodes:m,event:x})}G(()=>(i(),r(),o()),()=>{i()==="nodes"&&(D(h,nr(r(),{filter:x=>!!x.selected})),o())}),nt(),he();var y=Xe(),p=ve(y);{var N=x=>{var m=Y0(),b=se(m);bc(b,{width:"100%",height:"100%",x:0,y:0}),lt(m,(E,S)=>Yn==null?void 0:Yn(E,S),()=>({disabled:!1,store:s,onDrag:(E,S,C,k)=>{u("nodedrag",{event:E,targetNode:null,nodes:k})},onDragStart:(E,S,C,k)=>{u("nodedragstart",{event:E,targetNode:null,nodes:k})},onDragStop:(E,S,C,k)=>{u("nodedragstop",{event:E,targetNode:null,nodes:k})}})),mt(()=>Me("contextmenu",m,f)),mt(()=>Me("click",m,g)),mt(()=>Me("keyup",m,()=>{})),_e(()=>$(m,"style",`width: ${d(h).width??""}px; height: ${d(h).height??""}px; transform: translate(${d(h).x??""}px, ${d(h).y??""}px)`)),W(x,m)};Ie(p,x=>{i()==="nodes"&&d(h)&&Ut(d(h).x)&&Ut(d(h).y)&&x(N)})}W(e,y),le()}function ze(e,t){let{enabled:n=!0,trigger:i,type:r="keydown"}=t;function o(s){const a=Array.isArray(i)?i:[i],c={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const l of a){const u={modifier:[],preventDefault:!1,enabled:!0,...l},{modifier:h,key:f,callback:g,preventDefault:y,enabled:p}=u;if(p){if(h.length&&!(Array.isArray(h)?h:[h]).map(m=>typeof m=="string"?[m]:m).some(m=>m.every(b=>c[b])))continue;if(s.key===f){y&&s.preventDefault();const N={node:e,trigger:u,originalEvent:s};e.dispatchEvent(new CustomEvent("shortcut",{detail:N})),g==null||g(N)}}}}return n&&e.addEventListener(r,o),{update:s=>{const{enabled:a=!0,type:c="keydown"}=s;n&&(!a||r!==c)?e.removeEventListener(r,o):!n&&a&&e.addEventListener(c,o),n=a,r=c,i=s.trigger},destroy:()=>{e.removeEventListener(r,o)}}}function B0(e,t){ae(t,!1);let n=v(t,"selectionKey",8,"Shift"),i=v(t,"multiSelectionKey",24,()=>Dr()?"Meta":"Control"),r=v(t,"deleteKey",8,"Backspace"),o=v(t,"panActivationKey",8," "),s=v(t,"zoomActivationKey",24,()=>Dr()?"Meta":"Control");const{selectionKeyPressed:a,multiselectionKeyPressed:c,deleteKeyPressed:l,panActivationKeyPressed:u,zoomActivationKeyPressed:h,selectionRect:f}=Fe();function g(m){return m!==null&&typeof m=="object"}function y(m){return g(m)?m.modifier||[]:[]}function p(m){return m==null?"":g(m)?m.key:m}function N(m,b){return(Array.isArray(m)?m:[m]).map(S=>{const C=p(S);return{key:C,modifier:y(S),enabled:C!==null,callback:b}})}function x(){f.set(null),a.set(!1),c.set(!1),l.set(!1),u.set(!1),h.set(!1)}he(),Me("blur",ft,x),Me("contextmenu",ft,x),lt(ft,(m,b)=>ze==null?void 0:ze(m,b),()=>({trigger:N(n(),()=>a.set(!0)),type:"keydown"})),lt(ft,(m,b)=>ze==null?void 0:ze(m,b),()=>({trigger:N(n(),()=>a.set(!1)),type:"keyup"})),lt(ft,(m,b)=>ze==null?void 0:ze(m,b),()=>({trigger:N(i(),()=>c.set(!0)),type:"keydown"})),lt(ft,(m,b)=>ze==null?void 0:ze(m,b),()=>({trigger:N(i(),()=>c.set(!1)),type:"keyup"})),lt(ft,(m,b)=>ze==null?void 0:ze(m,b),()=>({trigger:N(r(),m=>{!(m.originalEvent.ctrlKey||m.originalEvent.metaKey||m.originalEvent.shiftKey)&&!ev(m.originalEvent)&&l.set(!0)}),type:"keydown"})),lt(ft,(m,b)=>ze==null?void 0:ze(m,b),()=>({trigger:N(r(),()=>l.set(!1)),type:"keyup"})),lt(ft,(m,b)=>ze==null?void 0:ze(m,b),()=>({trigger:N(o(),()=>u.set(!0)),type:"keydown"})),lt(ft,(m,b)=>ze==null?void 0:ze(m,b),()=>({trigger:N(o(),()=>u.set(!1)),type:"keyup"})),lt(ft,(m,b)=>ze==null?void 0:ze(m,b),()=>({trigger:N(s(),()=>h.set(!0)),type:"keydown"})),lt(ft,(m,b)=>ze==null?void 0:ze(m,b),()=>({trigger:N(s(),()=>h.set(!1)),type:"keyup"})),le()}var K0=je('<path fill="none" class="svelte-flow__connection-path"></path>'),F0=je('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function Z0(e,t){ae(t,!1);const n=qe(),i=()=>Z(f,"$connection",n),r=()=>Z(g,"$connectionLineType",n),o=()=>Z(u,"$width",n),s=()=>Z(h,"$height",n);let a=v(t,"containerStyle",8,""),c=v(t,"style",8,""),l=v(t,"isCustomComponent",8,!1);const{width:u,height:h,connection:f,connectionLineType:g}=Fe();let y=F(null);G(()=>(i(),Y(l()),r(),d(y),qo),()=>{if(i().inProgress&&!l()){const{from:m,to:b,fromPosition:E,toPosition:S}=i(),C={sourceX:m.x,sourceY:m.y,sourcePosition:E,targetX:b.x,targetY:b.y,targetPosition:S};switch(r()){case Xn.Bezier:(k=>D(y,k[0]))(sc(C));break;case Xn.Step:(k=>D(y,k[0]))(Rr({...C,borderRadius:0}));break;case Xn.SmoothStep:(k=>D(y,k[0]))(Rr(C));break;default:(k=>D(y,k[0]))(qo(C))}}}),nt(),he();var p=Xe(),N=ve(p);{var x=m=>{var b=F0(),E=se(b);const S=re(()=>Ot(st(["svelte-flow__connection",Fg(i().isValid)])));var C=se(E);Ke(C,t,"connectionLine",{});var k=ie(C);{var M=A=>{var T=K0();_e(()=>{$(T,"d",d(y)),$(T,"style",c())}),W(A,T)};Ie(k,A=>{l()||A(M)})}_e(()=>{$(b,"width",o()),$(b,"height",s()),$(b,"style",a()),An(E,d(S),"")}),W(m,b)};Ie(N,m=>{i().inProgress&&m(x)})}W(e,p),le()}var G0=ue("<div><!></div>");function Ps(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]),i=Pe(n,["position","style","class"]);ae(t,!1);const r=qe(),o=()=>Z(u,"$selectionRectMode",r),s=F();let a=v(t,"position",8,"top-right"),c=v(t,"style",8,void 0),l=v(t,"class",8,void 0);const{selectionRectMode:u}=Fe();G(()=>Y(a()),()=>{D(s,`${a()}`.split("-"))}),nt(),he();var h=G0();let f;var g=se(h);Ke(g,t,"default",{}),_e(()=>{f=_i(h,f,{class:st(["svelte-flow__panel",l(),...d(s)]),style:c(),...i}),Ve(h,"pointer-events",o()?"none":"")}),W(e,h),le()}var q0=ue('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function U0(e,t){ae(t,!1);let n=v(t,"proOptions",8,void 0),i=v(t,"position",8,"bottom-right");he();var r=Xe(),o=ve(r);{var s=a=>{Ps(a,{get position(){return i()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(c,l)=>{var u=q0();W(c,u)},$$slots:{default:!0}})};Ie(o,a=>{var c;(c=n())!=null&&c.hideAttribution||a(s)})}W(e,r),le()}function Ia(e,{nodeTypes:t,edgeTypes:n,minZoom:i,maxZoom:r,translateExtent:o,paneClickDistance:s}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),i!==void 0&&e.setMinZoom(i),r!==void 0&&e.setMaxZoom(r),o!==void 0&&e.setTranslateExtent(o),s!==void 0&&e.setPaneClickDistance(s)}const J0=e=>Object.keys(e);function Ta(e,t){J0(t).forEach(n=>{const i=t[n];i!==void 0&&e[n].set(i)})}function j0(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Q0(e="light"){return xt("light",n=>{if(e!=="system"){n(e);return}const i=j0(),r=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",r),()=>{i==null||i.removeEventListener("change",r)}})}var $0=ue('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),em=ue("<!> <!>",1),tm=ue("<div><!> <!> <!> <!></div>");function nm(e,t){const n=td(t),i=Pe(t,["children","$$slots","$$events","$$legacy"]),r=Pe(i,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);ae(t,!1);const o=qe(),s=()=>Z(m(),"$viewport",o),a=()=>Z(oi,"$initialized",o),c=()=>Z(d(l),"$colorModeClass",o),l=F();let u=v(t,"id",8,"1"),h=v(t,"nodes",8),f=v(t,"edges",8),g=v(t,"fitView",8,void 0),y=v(t,"fitViewOptions",8,void 0),p=v(t,"minZoom",8,void 0),N=v(t,"maxZoom",8,void 0),x=v(t,"initialViewport",8,void 0),m=v(t,"viewport",8,void 0),b=v(t,"nodeTypes",8,void 0),E=v(t,"edgeTypes",8,void 0),S=v(t,"selectionKey",8,void 0),C=v(t,"selectionMode",8,void 0),k=v(t,"panActivationKey",8,void 0),M=v(t,"multiSelectionKey",8,void 0),A=v(t,"zoomActivationKey",8,void 0),T=v(t,"nodesDraggable",8,void 0),L=v(t,"nodesConnectable",8,void 0),V=v(t,"nodeDragThreshold",8,void 0),H=v(t,"elementsSelectable",8,void 0),_=v(t,"snapGrid",8,void 0),O=v(t,"deleteKey",8,void 0),w=v(t,"connectionRadius",8,void 0),P=v(t,"connectionLineType",8,void 0),I=v(t,"connectionMode",24,()=>Cn.Strict),z=v(t,"connectionLineStyle",8,""),X=v(t,"connectionLineContainerStyle",8,""),K=v(t,"onMoveStart",8,void 0),U=v(t,"onMove",8,void 0),ee=v(t,"onMoveEnd",8,void 0),B=v(t,"isValidConnection",8,void 0),j=v(t,"translateExtent",8,void 0),te=v(t,"nodeExtent",8,void 0),oe=v(t,"onlyRenderVisibleElements",8,void 0),ce=v(t,"panOnScrollMode",24,()=>fn.Free),q=v(t,"preventScrolling",8,!0),J=v(t,"zoomOnScroll",8,!0),Q=v(t,"zoomOnDoubleClick",8,!0),ge=v(t,"zoomOnPinch",8,!0),we=v(t,"panOnScroll",8,!1),me=v(t,"panOnDrag",8,!0),Ee=v(t,"selectionOnDrag",8,void 0),ke=v(t,"autoPanOnConnect",8,!0),Ye=v(t,"autoPanOnNodeDrag",8,!0),He=v(t,"onerror",8,void 0),Ze=v(t,"ondelete",8,void 0),Ce=v(t,"onedgecreate",8,void 0),pe=v(t,"attributionPosition",8,void 0),Ge=v(t,"proOptions",8,void 0),gt=v(t,"defaultEdgeOptions",8,void 0),Ae=v(t,"width",8,void 0),Qe=v(t,"height",8,void 0),We=v(t,"colorMode",8,"light"),Te=v(t,"onconnect",8,void 0),_n=v(t,"onconnectstart",8,void 0),Tn=v(t,"onconnectend",8,void 0),Ue=v(t,"onbeforedelete",8,void 0),$e=v(t,"oninit",8,void 0),Ne=v(t,"nodeOrigin",8,void 0),et=v(t,"paneClickDistance",8,0),wt=v(t,"nodeClickDistance",8,0),ri=v(t,"defaultMarkerColor",8,"#b1b1b7"),ao=v(t,"style",8,void 0),Et=v(t,"class",8,void 0),St=F(),Dt=F(),at=F();const lo=s()||x(),tt=Hu(Ms)?Fe():m0({nodes:R(h()),edges:R(f()),width:Ae(),height:Qe(),fitView:g(),nodeOrigin:Ne(),nodeExtent:te()});zn(()=>(tt.width.set(d(Dt)),tt.height.set(d(at)),tt.domNode.set(d(St)),tt.syncNodeStores(h()),tt.syncEdgeStores(f()),tt.syncViewport(m()),g()!==void 0&&tt.fitViewOnInit.set(g()),y()&&tt.fitViewOptions.set(y()),Ia(tt,{nodeTypes:b(),edgeTypes:E(),minZoom:p(),maxZoom:N(),translateExtent:j(),paneClickDistance:et()}),()=>{tt.reset()}));const{initialized:oi}=tt;let si=F(!1);G(()=>(d(Dt),d(at)),()=>{d(Dt)!==void 0&&d(at)!==void 0&&(tt.width.set(d(Dt)),tt.height.set(d(at)))}),G(()=>(d(si),a(),Y($e())),()=>{var it;!d(si)&&a()&&((it=$e())==null||it(),D(si,!0))}),G(()=>(Y(u()),Y(P()),Y(w()),Y(C()),Y(_()),Y(ri()),Y(T()),Y(L()),Y(H()),Y(oe()),Y(B()),Y(ke()),Y(Ye()),Y(He()),Y(Ze()),Y(Ce()),Y(I()),Y(V()),Y(Te()),Y(_n()),Y(Tn()),Y(Ue()),Y(Ne()),Ta),()=>{const it={flowId:u(),connectionLineType:P(),connectionRadius:w(),selectionMode:C(),snapGrid:_(),defaultMarkerColor:ri(),nodesDraggable:T(),nodesConnectable:L(),elementsSelectable:H(),onlyRenderVisibleElements:oe(),isValidConnection:B(),autoPanOnConnect:ke(),autoPanOnNodeDrag:Ye(),onerror:He(),ondelete:Ze(),onedgecreate:Ce(),connectionMode:I(),nodeDragThreshold:V(),onconnect:Te(),onconnectstart:_n(),onconnectend:Tn(),onbeforedelete:Ue(),nodeOrigin:Ne()};Ta(tt,it)}),G(()=>(Y(b()),Y(E()),Y(p()),Y(N()),Y(j()),Y(et())),()=>{Ia(tt,{nodeTypes:b(),edgeTypes:E(),minZoom:p(),maxZoom:N(),translateExtent:j(),paneClickDistance:et()})}),G(()=>Y(We()),()=>{ad(D(l,Q0(We())),"$colorModeClass",o)}),nt(),he();var Rt=tm();let rr;var or=se(Rt);B0(or,{get selectionKey(){return S()},get deleteKey(){return O()},get panActivationKey(){return k()},get multiSelectionKey(){return M()},get zoomActivationKey(){return A()}});var As=ie(or,2),Pc=re(()=>ce()===void 0?fn.Free:ce()),Ac=re(()=>q()===void 0?!0:q()),zc=re(()=>J()===void 0?!0:J()),Ic=re(()=>Q()===void 0?!0:Q()),Tc=re(()=>ge()===void 0?!0:ge()),Oc=re(()=>we()===void 0?!1:we()),Hc=re(()=>me()===void 0?!0:me()),Dc=re(()=>et()===void 0?0:et());p0(As,{initialViewport:lo,get onMoveStart(){return K()},get onMove(){return U()},get onMoveEnd(){return ee()},get panOnScrollMode(){return d(Pc)},get preventScrolling(){return d(Ac)},get zoomOnScroll(){return d(zc)},get zoomOnDoubleClick(){return d(Ic)},get zoomOnPinch(){return d(Tc)},get panOnScroll(){return d(Oc)},get panOnDrag(){return d(Hc)},get paneClickDistance(){return d(Dc)},children:(it,My)=>{var Lc=re(()=>me()===void 0?!0:me());w0(it,{get panOnDrag(){return d(Lc)},get selectionOnDrag(){return Ee()},$$events:{paneclick(ai){be.call(this,t,ai)},panecontextmenu(ai){be.call(this,t,ai)}},children:(ai,Py)=>{var Is=em(),Ts=ve(Is);b0(Ts,{children:(Xc,Ay)=>{var Os=$0(),Hs=ve(Os);L0(Hs,{get defaultEdgeOptions(){return gt()},$$events:{edgeclick(xe){be.call(this,t,xe)},edgecontextmenu(xe){be.call(this,t,xe)},edgemouseenter(xe){be.call(this,t,xe)},edgemouseleave(xe){be.call(this,t,xe)}}});var Ds=ie(Hs,2);Z0(Ds,{get containerStyle(){return X()},get style(){return z()},isCustomComponent:n.connectionLine,$$slots:{connectionLine:(xe,zy)=>{var Ls=Xe(),Wc=ve(Ls);Ke(Wc,t,"connectionLine",{}),W(xe,Ls)}}});var Rs=ie(Ds,6);N0(Rs,{get nodeClickDistance(){return wt()},$$events:{nodeclick(xe){be.call(this,t,xe)},nodemouseenter(xe){be.call(this,t,xe)},nodemousemove(xe){be.call(this,t,xe)},nodemouseleave(xe){be.call(this,t,xe)},nodedragstart(xe){be.call(this,t,xe)},nodedrag(xe){be.call(this,t,xe)},nodedragstop(xe){be.call(this,t,xe)},nodecontextmenu(xe){be.call(this,t,xe)}}});var Yc=ie(Rs,2);W0(Yc,{$$events:{selectionclick(xe){be.call(this,t,xe)},selectioncontextmenu(xe){be.call(this,t,xe)},nodedragstart(xe){be.call(this,t,xe)},nodedrag(xe){be.call(this,t,xe)},nodedragstop(xe){be.call(this,t,xe)}}}),W(Xc,Os)},$$slots:{default:!0}});var Vc=ie(Ts,2);X0(Vc,{}),W(ai,Is)},$$slots:{default:!0}})},$$slots:{default:!0}});var zs=ie(As,2);U0(zs,{get proOptions(){return Ge()},get position(){return pe()}});var Rc=ie(zs,2);Ke(Rc,t,"default",{}),ji(Rt,it=>D(St,it),()=>d(St)),_e(()=>rr=_i(Rt,rr,{style:ao(),class:st(["svelte-flow",Et(),c()]),"data-testid":"svelte-flow__wrapper",...r,role:"application"},"svelte-12wlba6")),kr(Rt,"clientWidth",it=>D(Dt,it)),kr(Rt,"clientHeight",it=>D(at,it)),Me("dragover",Rt,function(it){be.call(this,t,it)}),Me("drop",Rt,function(it){be.call(this,t,it)}),W(e,Rt),le()}var im=ue("<button><!></button>");function ln(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]),i=Pe(n,["class"]);ae(t,!1);let r=v(t,"class",8,void 0),o,s,a,c,l;he();var u=im();let h;var f=se(u);Ke(f,t,"default",{class:"button-svg"}),_e(()=>{h=_i(u,h,{type:"button",class:st(["svelte-flow__controls-button",r()]),...i}),Ve(u,"--xy-controls-button-background-color-props",o),Ve(u,"--xy-controls-button-background-color-hover-props",s),Ve(u,"--xy-controls-button-color-props",a),Ve(u,"--xy-controls-button-color-hover-props",c),Ve(u,"--xy-controls-button-border-color-props",l)}),Me("click",u,function(g){be.call(this,t,g)}),W(e,u),le()}var rm=je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function om(e){var t=rm();W(e,t)}var sm=je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function am(e){var t=sm();W(e,t)}var lm=je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function cm(e){var t=lm();W(e,t)}var um=je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function dm(e){var t=um();W(e,t)}var fm=je('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function hm(e){var t=fm();W(e,t)}var gm=ue("<!> <!>",1),vm=ue("<!> <!> <!> <!> <!> <!>",1);function Ec(e,t){ae(t,!1);const n=qe(),i=()=>Z(P,"$nodesDraggable",n),r=()=>Z(I,"$nodesConnectable",n),o=()=>Z(z,"$elementsSelectable",n),s=()=>Z(_,"$viewport",n),a=()=>Z(O,"$minZoom",n),c=()=>Z(w,"$maxZoom",n),l=F(),u=F(),h=F(),f=F();let g=v(t,"position",8,"bottom-left"),y=v(t,"showZoom",8,!0),p=v(t,"showFitView",8,!0),N=v(t,"showLock",8,!0),x=v(t,"buttonBgColor",8,void 0),m=v(t,"buttonBgColorHover",8,void 0),b=v(t,"buttonColor",8,void 0),E=v(t,"buttonColorHover",8,void 0),S=v(t,"buttonBorderColor",8,void 0),C=v(t,"ariaLabel",8,void 0),k=v(t,"style",8,void 0),M=v(t,"orientation",8,"vertical"),A=v(t,"fitViewOptions",8,void 0),T=v(t,"class",8,"");const{zoomIn:L,zoomOut:V,fitView:H,viewport:_,minZoom:O,maxZoom:w,nodesDraggable:P,nodesConnectable:I,elementsSelectable:z}=Fe(),X={bgColor:x(),bgColorHover:m(),color:b(),colorHover:E(),borderColor:S()},K=()=>{L()},U=()=>{V()},ee=()=>{H(A())},B=()=>{D(l,!d(l)),P.set(d(l)),I.set(d(l)),z.set(d(l))};G(()=>(i(),r(),o()),()=>{D(l,i()||r()||o())}),G(()=>(s(),a()),()=>{D(u,s().zoom<=a())}),G(()=>(s(),c()),()=>{D(h,s().zoom>=c())}),G(()=>Y(M()),()=>{D(f,M()==="horizontal"?"horizontal":"vertical")}),nt(),he();var j=re(()=>st(["svelte-flow__controls",d(f),T()])),te=re(()=>C()??"Svelte Flow controls");Ps(e,{get class(){return d(j)},get position(){return g()},"data-testid":"svelte-flow__controls",get"aria-label"(){return d(te)},get style(){return k()},children:(oe,ce)=>{var q=vm(),J=ve(q);Ke(J,t,"before",{});var Q=ie(J,2);{var ge=Ze=>{var Ce=gm(),pe=ve(Ce);ln(pe,pt({class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return d(h)}},X,{$$events:{click:K},children:(gt,Ae)=>{om(gt)},$$slots:{default:!0}}));var Ge=ie(pe,2);ln(Ge,pt({class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return d(u)}},X,{$$events:{click:U},children:(gt,Ae)=>{am(gt)},$$slots:{default:!0}})),W(Ze,Ce)};Ie(Q,Ze=>{y()&&Ze(ge)})}var we=ie(Q,2);{var me=Ze=>{ln(Ze,pt({class:"svelte-flow__controls-fitview",title:"fit view","aria-label":"fit view"},X,{$$events:{click:ee},children:(Ce,pe)=>{cm(Ce)},$$slots:{default:!0}}))};Ie(we,Ze=>{p()&&Ze(me)})}var Ee=ie(we,2);{var ke=Ze=>{ln(Ze,pt({class:"svelte-flow__controls-interactive",title:"toggle interactivity","aria-label":"toggle interactivity"},X,{$$events:{click:B},children:(Ce,pe)=>{var Ge=Xe(),gt=ve(Ge);{var Ae=We=>{hm(We)},Qe=We=>{dm(We)};Ie(gt,We=>{d(l)?We(Ae):We(Qe,!1)})}W(Ce,Ge)},$$slots:{default:!0}}))};Ie(Ee,Ze=>{N()&&Ze(ke)})}var Ye=ie(Ee,2);Ke(Ye,t,"default",{});var He=ie(Ye,2);Ke(He,t,"after",{}),W(oe,q)},$$slots:{default:!0}}),le()}var Qt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Qt||(Qt={}));var mm=je("<circle></circle>");function ym(e,t){ae(t,!1);let n=v(t,"radius",8,5),i=v(t,"class",8,"");he();var r=mm();const o=re(()=>Ot(st(["svelte-flow__background-pattern","dots",i()])));_e(()=>{$(r,"cx",n()),$(r,"cy",n()),$(r,"r",n()),An(r,d(o),"")}),W(e,r),le()}var pm=je("<path></path>");function _m(e,t){ae(t,!1);let n=v(t,"lineWidth",8,1),i=v(t,"dimensions",8),r=v(t,"variant",8,void 0),o=v(t,"class",8,"");he();var s=pm();const a=re(()=>Ot(st(["svelte-flow__background-pattern",r(),o()])));_e(()=>{$(s,"stroke-width",n()),$(s,"d",`M${i()[0]/2} 0 V${i()[1]} M0 ${i()[1]/2} H${i()[0]}`),An(s,d(a),"")}),W(e,s),le()}const wm={[Qt.Dots]:1,[Qt.Lines]:1,[Qt.Cross]:6};var xm=je('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function bm(e,t){ae(t,!1);const n=qe(),i=()=>Z(E,"$flowId",n),r=()=>Z(b,"$viewport",n),o=F(),s=F(),a=F(),c=F(),l=F();let u=v(t,"id",8,void 0),h=v(t,"variant",24,()=>Qt.Dots),f=v(t,"gap",8,20),g=v(t,"size",8,1),y=v(t,"lineWidth",8,1),p=v(t,"bgColor",8,void 0),N=v(t,"patternColor",8,void 0),x=v(t,"patternClass",8,void 0),m=v(t,"class",8,"");const{viewport:b,flowId:E}=Fe(),S=g()||wm[h()],C=h()===Qt.Dots,k=h()===Qt.Cross,M=Array.isArray(f())?f():[f(),f()];G(()=>(i(),Y(u())),()=>{D(o,`background-pattern-${i()}-${u()?u():""}`)}),G(()=>r(),()=>{D(s,[M[0]*r().zoom||1,M[1]*r().zoom||1])}),G(()=>r(),()=>{D(a,S*r().zoom)}),G(()=>(d(a),d(s)),()=>{D(c,k?[d(a),d(a)]:d(s))}),G(()=>(d(a),d(c)),()=>{D(l,C?[d(a)/2,d(a)/2]:[d(c)[0]/2,d(c)[1]/2])}),nt(),he();var A=xm();const T=re(()=>Ot(st(["svelte-flow__background",m()])));var L=se(A),V=se(L);{var H=w=>{var P=re(()=>d(a)/2);ym(w,{get radius(){return d(P)},get class(){return x()}})},_=w=>{_m(w,{get dimensions(){return d(c)},get variant(){return h()},get lineWidth(){return y()},get class(){return x()}})};Ie(V,w=>{C?w(H):w(_,!1)})}var O=ie(L);_e(()=>{An(A,d(T),"svelte-1r7pe8d"),Ve(A,"--xy-background-color-props",p()),Ve(A,"--xy-background-pattern-color-props",N()),$(L,"id",d(o)),$(L,"x",r().x%d(s)[0]),$(L,"y",r().y%d(s)[1]),$(L,"width",d(s)[0]),$(L,"height",d(s)[1]),$(L,"patternTransform",`translate(-${d(l)[0]},-${d(l)[1]})`),$(O,"fill",`url(#${d(o)})`)}),W(e,A),le()}var Em=je("<rect></rect>");function Sm(e,t){ae(t,!1);let n=v(t,"x",8),i=v(t,"y",8),r=v(t,"width",8,0),o=v(t,"height",8,0),s=v(t,"borderRadius",8,5),a=v(t,"color",8,void 0),c=v(t,"shapeRendering",8),l=v(t,"strokeColor",8,void 0),u=v(t,"strokeWidth",8,2),h=v(t,"selected",8,!1),f=v(t,"class",8,"");he();var g=Em();const y=re(()=>Ot(st(["svelte-flow__minimap-node",f()])));_e(()=>{An(g,d(y),""),$(g,"x",n()),$(g,"y",i()),$(g,"rx",s()),$(g,"ry",s()),$(g,"width",r()),$(g,"height",o()),$(g,"style",`${a()?`fill: ${a()};`:""}${l()?`stroke: ${l()};`:""}${u()?`stroke-width: ${u()};`:""}`),$(g,"shape-rendering",c()),Be(g,"selected",h())}),W(e,g),le()}function Eo(e,t){const n=Nv({domNode:e,panZoom:t.panZoom,getTransform:()=>{const r=R(t.viewport);return[r.x,r.y,r.zoom]},getViewScale:t.getViewScale});function i(r){n.update({translateExtent:r.translateExtent,width:r.width,height:r.height,inversePan:r.inversePan,zoomStep:r.zoomStep,pannable:r.pannable,zoomable:r.zoomable})}return{update:i,destroy(){n.destroy()}}}const So=e=>e instanceof Function?e:()=>e;var km=ue("<title> </title>"),Cm=je('<svg class="svelte-flow__minimap-svg" role="img"><!><!><path class="svelte-flow__minimap-mask" fill-rule="evenodd" pointer-events="none"></path></svg>');function Nm(e,t){ae(t,!1);const n=qe(),i=()=>Z(me,"$flowId",n),r=()=>Z(Q,"$viewport",n),o=()=>Z(ge,"$containerWidth",n),s=()=>Z(we,"$containerHeight",n),a=()=>Z(J,"$nodeLookup",n),c=()=>Z(q,"$nodes",n),l=()=>Z(Ee,"$panZoom",n),u=()=>Z(ke,"$translateExtent",n),h=F(),f=F(),g=F(),y=F(),p=F(),N=F(),x=F(),m=F(),b=F(),E=F(),S=F(),C=F(),k=F();let M=v(t,"position",8,"bottom-right"),A=v(t,"ariaLabel",8,"Mini map"),T=v(t,"nodeStrokeColor",8,"transparent"),L=v(t,"nodeColor",8,void 0),V=v(t,"nodeClass",8,""),H=v(t,"nodeBorderRadius",8,5),_=v(t,"nodeStrokeWidth",8,2),O=v(t,"bgColor",8,void 0),w=v(t,"maskColor",8,void 0),P=v(t,"maskStrokeColor",8,void 0),I=v(t,"maskStrokeWidth",8,void 0),z=v(t,"width",8,void 0),X=v(t,"height",8,void 0),K=v(t,"pannable",8,!0),U=v(t,"zoomable",8,!0),ee=v(t,"inversePan",8,void 0),B=v(t,"zoomStep",8,void 0),j=v(t,"style",8,""),te=v(t,"class",8,"");const oe=200,ce=150,{nodes:q,nodeLookup:J,viewport:Q,width:ge,height:we,flowId:me,panZoom:Ee,translateExtent:ke}=Fe(),Ye=L()===void 0?void 0:So(L()),He=So(T()),Ze=So(V()),Ce=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",pe=`svelte-flow__minimap-desc-${i()}`;let Ge=F(d(h));const gt=()=>d(N);G(()=>(r(),o(),s()),()=>{D(h,{x:-r().x/r().zoom,y:-r().y/r().zoom,width:o()/r().zoom,height:s()/r().zoom})}),G(()=>(a(),d(h),c()),()=>{D(Ge,a().size>0?nc(nr(a()),d(h)):d(h)),c()}),G(()=>Y(z()),()=>{D(f,z()??oe)}),G(()=>Y(X()),()=>{D(g,X()??ce)}),G(()=>(d(Ge),d(f)),()=>{D(y,d(Ge).width/d(f))}),G(()=>(d(Ge),d(g)),()=>{D(p,d(Ge).height/d(g))}),G(()=>(d(y),d(p)),()=>{D(N,Math.max(d(y),d(p)))}),G(()=>(d(N),d(f)),()=>{D(x,d(N)*d(f))}),G(()=>(d(N),d(g)),()=>{D(m,d(N)*d(g))}),G(()=>d(N),()=>{D(b,5*d(N))}),G(()=>(d(Ge),d(x),d(b)),()=>{D(E,d(Ge).x-(d(x)-d(Ge).width)/2-d(b))}),G(()=>(d(Ge),d(m),d(b)),()=>{D(S,d(Ge).y-(d(m)-d(Ge).height)/2-d(b))}),G(()=>(d(x),d(b)),()=>{D(C,d(x)+d(b)*2)}),G(()=>(d(m),d(b)),()=>{D(k,d(m)+d(b)*2)}),nt(),he();var Ae=re(()=>j()+(O()?`;--xy-minimap-background-color-props:${O()}`:"")),Qe=re(()=>st(["svelte-flow__minimap",te()]));Ps(e,{get position(){return M()},get style(){return d(Ae)},get class(){return d(Qe)},"data-testid":"svelte-flow__minimap",children:(We,Te)=>{var _n=Xe(),Tn=ve(_n);{var Ue=$e=>{var Ne=Cm();$(Ne,"aria-labelledby",pe);var et=se(Ne);{var wt=Et=>{var St=km();$(St,"id",pe);var Dt=se(St);_e(()=>mn(Dt,A())),W(Et,St)};Ie(et,Et=>{A()&&Et(wt)})}var ri=ie(et);Yt(ri,1,c,Et=>Et.id,(Et,St)=>{var Dt=Xe();const at=re(()=>a().get(d(St).id));var lo=ve(Dt);{var tt=oi=>{const si=re(()=>pn(d(at)));var Rt=re(()=>Ye==null?void 0:Ye(d(at))),rr=re(()=>He(d(at))),or=re(()=>Ze(d(at)));Sm(oi,pt({get x(){return d(at).internals.positionAbsolute.x},get y(){return d(at).internals.positionAbsolute.y}},()=>d(si),{get selected(){return d(at).selected},get color(){return d(Rt)},get borderRadius(){return H()},get strokeColor(){return d(rr)},get strokeWidth(){return _()},shapeRendering:Ce,get class(){return d(or)}}))};Ie(lo,oi=>{d(at)&&rc(d(at))&&oi(tt)})}W(Et,Dt)});var ao=ie(ri);lt(Ne,(Et,St)=>Eo==null?void 0:Eo(Et,St),()=>({panZoom:l(),viewport:Q,getViewScale:gt,translateExtent:u(),width:o(),height:s(),inversePan:ee(),zoomStep:B(),pannable:K(),zoomable:U()})),_e(()=>{$(Ne,"width",d(f)),$(Ne,"height",d(g)),$(Ne,"viewBox",`${d(E)??""} ${d(S)??""} ${d(C)??""} ${d(k)??""}`),Ve(Ne,"--xy-minimap-mask-background-color-props",w()),Ve(Ne,"--xy-minimap-mask-stroke-color-props",P()),Ve(Ne,"--xy-minimap-mask-stroke-width-props",I()?I()*d(N):void 0),$(ao,"d",`M${d(E)-d(b)},${d(S)-d(b)}h${d(C)+d(b)*2}v${d(k)+d(b)*2}h${-d(C)-d(b)*2}z
      M${d(h).x??""},${d(h).y??""}h${d(h).width??""}v${d(h).height??""}h${-d(h).width}z`)}),W($e,Ne)};Ie(Tn,$e=>{l()&&$e(Ue)})}W(We,_n)},$$slots:{default:!0}}),le()}const Oa=e=>Gg(e);function Mm(){const{zoomIn:e,zoomOut:t,fitView:n,onbeforedelete:i,snapGrid:r,viewport:o,width:s,height:a,minZoom:c,maxZoom:l,panZoom:u,nodes:h,edges:f,domNode:g,nodeLookup:y,nodeOrigin:p,edgeLookup:N,connectionLookup:x}=Fe(),m=S=>{var T,L;const C=R(y),k=Oa(S)?S:C.get(S.id),M=k.parentId?jg(k.position,k.measured,k.parentId,C,R(p)):k.position,A={...k,position:M,width:((T=k.measured)==null?void 0:T.width)??k.width,height:((L=k.measured)==null?void 0:L.height)??k.height};return qn(A)},b=(S,C,k={replace:!1})=>{var T;const M=(T=R(y).get(S))==null?void 0:T.internals.userNode;if(!M)return;const A=typeof C=="function"?C(M):C;k.replace?h.update(L=>L.map(V=>V.id===S?Oa(A)?A:{...V,...A}:V)):(Object.assign(M,A),h.update(L=>L))},E=S=>R(y).get(S);return{zoomIn:e,zoomOut:t,getInternalNode:E,getNode:S=>{var C;return(C=E(S))==null?void 0:C.internals.userNode},getNodes:S=>S===void 0?R(h):Ha(R(y),S),getEdge:S=>R(N).get(S),getEdges:S=>S===void 0?R(f):Ha(R(N),S),setZoom:(S,C)=>{const k=R(u);return k?k.scaleTo(S,{duration:C==null?void 0:C.duration}):Promise.resolve(!1)},getZoom:()=>R(o).zoom,setViewport:async(S,C)=>{const k=R(o),M=R(u);return M?(await M.setViewport({x:S.x??k.x,y:S.y??k.y,zoom:S.zoom??k.zoom},{duration:C==null?void 0:C.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>R(o),setCenter:async(S,C,k)=>{const M=typeof(k==null?void 0:k.zoom)<"u"?k.zoom:R(l),A=R(u);return A?(await A.setViewport({x:R(s)/2-S*M,y:R(a)/2-C*M,zoom:M},{duration:k==null?void 0:k.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(S,C)=>{const k=R(u);if(!k)return Promise.resolve(!1);const M=Es(S,R(s),R(a),R(c),R(l),(C==null?void 0:C.padding)??.1);return await k.setViewport(M,{duration:C==null?void 0:C.duration}),Promise.resolve(!0)},getIntersectingNodes:(S,C=!0,k)=>{const M=_a(S),A=M?S:m(S);return A?(k||R(h)).filter(T=>{const L=R(y).get(T.id);if(!L||!M&&T.id===S.id)return!1;const V=qn(L),H=Ci(V,A);return C&&H>0||H>=A.width*A.height}):[]},isNodeIntersecting:(S,C,k=!0)=>{const A=_a(S)?S:m(S);if(!A)return!1;const T=Ci(A,C);return k&&T>0||T>=A.width*A.height},deleteElements:async({nodes:S=[],edges:C=[]})=>{const{nodes:k,edges:M}=await $l({nodesToRemove:S,edgesToRemove:C,nodes:R(h),edges:R(f),onBeforeDelete:R(i)});return k&&h.update(A=>A.filter(T=>!k.some(({id:L})=>L===T.id))),M&&f.update(A=>A.filter(T=>!M.some(({id:L})=>L===T.id))),{deletedNodes:k,deletedEdges:M}},screenToFlowPosition:(S,C={snapToGrid:!0})=>{const k=R(g);if(!k)return S;const M=C.snapToGrid?R(r):!1,{x:A,y:T,zoom:L}=R(o),{x:V,y:H}=k.getBoundingClientRect(),_={x:S.x-V,y:S.y-H};return ir(_,[A,T,L],M!==null,M||[1,1])},flowToScreenPosition:S=>{const C=R(g);if(!C)return S;const{x:k,y:M,zoom:A}=R(o),{x:T,y:L}=C.getBoundingClientRect(),V=ic(S,[k,M,A]);return{x:V.x+T,y:V.y+L}},toObject:()=>({nodes:R(h).map(S=>({...S,position:{...S.position},data:{...S.data}})),edges:R(f).map(S=>({...S})),viewport:{...R(o)}}),updateNode:b,updateNodeData:(S,C,k)=>{var T;const M=(T=R(y).get(S))==null?void 0:T.internals.userNode;if(!M)return;const A=typeof C=="function"?C(M):C;M.data=k!=null&&k.replace?A:{...M.data,...A},h.update(L=>L)},getNodesBounds:S=>{const C=R(y),k=R(p);return qg(S,{nodeLookup:C,nodeOrigin:k})},getHandleConnections:({type:S,id:C,nodeId:k})=>{var M;return Array.from(((M=R(x).get(`${k}-${S}-${C??null}`))==null?void 0:M.values())??[])},viewport:o}}function Ha(e,t){var i;const n=[];for(const r of t){const o=e.get(r);if(o){const s="internals"in o?(i=o.internals)==null?void 0:i.userNode:o;n.push(s)}}return n}var Pm=ue("<div><!></div>");function Da(e,t){ae(t,!1);const n=qe(),i=()=>Z(z,"$nodeLookup",n),r=()=>Z(K,"$viewport",n),o=()=>Z(X,"$snapGrid",n),s=()=>Z(ee,"$nodeOrigin",n),a=()=>Z(B,"$domNode",n),c=()=>Z(U,"$nodes",n),l=F(),u=F(),h=F(),f=F(),g=F(),y=F(),p=F(),N=F(),x=F(),m=F(),b=F();let E=v(t,"nodeId",8,void 0),S=v(t,"position",8,void 0),C=v(t,"variant",24,()=>sn.Handle),k=v(t,"color",8,void 0),M=v(t,"minWidth",8,10),A=v(t,"minHeight",8,10),T=v(t,"maxWidth",24,()=>Number.MAX_VALUE),L=v(t,"maxHeight",24,()=>Number.MAX_VALUE),V=v(t,"keepAspectRatio",8,!1),H=v(t,"shouldResize",8,void 0),_=v(t,"onResizeStart",8,void 0),O=v(t,"onResize",8,void 0),w=v(t,"onResizeEnd",8,void 0),P=v(t,"style",8,""),I=v(t,"class",8,"");const{nodeLookup:z,snapGrid:X,viewport:K,nodes:U,nodeOrigin:ee,domNode:B}=Fe(),j=Kn("svelteflow__node_id");let te=F(),oe=F(null);zn(()=>(d(te)&&D(oe,Kv({domNode:d(te),nodeId:d(g),getStoreItems:()=>({nodeLookup:i(),transform:[r().x,r().y,r().zoom],snapGrid:o()??void 0,snapToGrid:!!o(),nodeOrigin:s(),paneDomNode:a()}),onChange:(Q,ge)=>{var me,Ee;const we=(me=i().get(d(g)))==null?void 0:me.internals.userNode;if(we){Q.x!==void 0&&Q.y!==void 0&&(we.position={x:Q.x,y:Q.y}),Q.width!==void 0&&Q.height!==void 0&&(we.width=Q.width,we.height=Q.height);for(const ke of ge){const Ye=(Ee=i().get(ke.id))==null?void 0:Ee.internals.userNode;Ye&&(Ye.position=ke.position)}wi(U,c())}}})),()=>{var Q;(Q=d(oe))==null||Q.destroy()})),G(()=>Y(M()),()=>{D(l,M()??10)}),G(()=>Y(A()),()=>{D(u,A()??10)}),G(()=>Y(T()),()=>{D(h,T()??Number.MAX_VALUE)}),G(()=>Y(L()),()=>{D(f,L()??Number.MAX_VALUE)}),G(()=>Y(E()),()=>{D(g,typeof E()=="string"?E():j)}),G(()=>(Y(C()),sn),()=>{D(y,C()===sn.Line?"right":"bottom-right")}),G(()=>(Y(S()),d(y)),()=>{D(p,S()??d(y))}),G(()=>d(p),()=>{D(N,d(p).split("-"))}),G(()=>(Y(C()),sn),()=>{D(x,C()===sn.Line?"border-color":"background-color")}),G(()=>Y(P()),()=>{D(m,P()??"")}),G(()=>(Y(k()),d(m),d(x)),()=>{D(b,k()?`${d(m)} ${d(x)}: ${k()};`:d(m))}),G(()=>(d(oe),d(p),d(l),d(u),d(h),d(f),Y(V()),Y(_()),Y(O()),Y(w()),Y(H())),()=>{var Q;(Q=d(oe))==null||Q.update({controlPosition:d(p),boundaries:{minWidth:d(l),minHeight:d(u),maxWidth:d(h),maxHeight:d(f)},keepAspectRatio:!!V(),onResizeStart:_(),onResize:O(),onResizeEnd:w(),shouldResize:H()})}),nt(),he();var ce=Pm();const q=re(()=>Ot(st(["svelte-flow__resize-control","nodrag",...d(N),C(),I()])));var J=se(ce);Ke(J,t,"default",{}),ji(ce,Q=>D(te,Q),()=>d(te)),_e(()=>{hs(ce,d(q),""),$(ce,"style",d(b))}),W(e,ce),le()}var Am=ue("<!> <!>",1);function Sc(e,t){ae(t,!1);let n=v(t,"nodeId",8,void 0),i=v(t,"isVisible",8,!0),r=v(t,"handleClass",8,void 0),o=v(t,"handleStyle",8,void 0),s=v(t,"lineClass",8,void 0),a=v(t,"lineStyle",8,void 0),c=v(t,"color",8,void 0),l=v(t,"minWidth",8,10),u=v(t,"minHeight",8,10),h=v(t,"maxWidth",24,()=>Number.MAX_VALUE),f=v(t,"maxHeight",24,()=>Number.MAX_VALUE),g=v(t,"keepAspectRatio",8,!1),y=v(t,"shouldResize",8,void 0),p=v(t,"onResizeStart",8,void 0),N=v(t,"onResize",8,void 0),x=v(t,"onResizeEnd",8,void 0),m=l()||10,b=u()||10,E=h()||Number.MAX_VALUE,S=f()||Number.MAX_VALUE;he();var C=Xe(),k=ve(C);{var M=A=>{var T=Am(),L=ve(T);Yt(L,1,()=>Rv,H=>H,(H,_)=>{Da(H,{get class(){return s()},get style(){return a()},get nodeId(){return n()},get position(){return d(_)},get variant(){return sn.Line},get color(){return c()},minWidth:m,minHeight:b,maxWidth:E,maxHeight:S,get onResizeStart(){return p()},get keepAspectRatio(){return g()},get shouldResize(){return y()},get onResize(){return N()},get onResizeEnd(){return x()}})});var V=ie(L,2);Yt(V,1,()=>Dv,H=>H,(H,_)=>{Da(H,{get class(){return r()},get style(){return o()},get nodeId(){return n()},get position(){return d(_)},get color(){return c()},minWidth:m,minHeight:b,maxWidth:E,maxHeight:S,get onResizeStart(){return p()},get keepAspectRatio(){return g()},get shouldResize(){return y()},get onResize(){return N()},get onResizeEnd(){return x()}})}),W(A,T)};Ie(k,A=>{i()&&A(M)})}W(e,C),le()}const zm=[];function kc({type:e,nodeId:t,id:n=null}){const{edges:i,connectionLookup:r}=Fe(),o=Kn("svelteflow__node_id"),s=t??o;let a;return En([i,r],([,c],l)=>{const u=c.get(`${s}-${e}-${n||null}`);jl(u,a)||(a=u,l(Array.from((a==null?void 0:a.values())||[])))},zm)}/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Tm=je("<svg><!><!></svg>");function In(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]),i=Pe(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);ae(t,!1);let r=v(t,"name",8,void 0),o=v(t,"color",8,"currentColor"),s=v(t,"size",8,24),a=v(t,"strokeWidth",8,2),c=v(t,"absoluteStrokeWidth",8,!1),l=v(t,"iconNode",24,()=>[]);const u=(...p)=>p.filter((N,x,m)=>!!N&&m.indexOf(N)===x).join(" ");he();var h=Tm();let f;var g=se(h);Yt(g,1,l,vr,(p,N)=>{let x=()=>d(N)[0],m=()=>d(N)[1];var b=Xe(),E=ve(b);nd(E,x,!0,(S,C)=>{let k;_e(()=>k=_i(S,k,{...m()},void 0,S.namespaceURI===Za,S.nodeName.includes("-")))}),W(p,b)});var y=ie(g);Ke(y,t,"default",{}),_e(()=>f=_i(h,f,{...Im,...i,width:s(),height:s(),stroke:o(),"stroke-width":c()?Number(a())*24/Number(s()):a(),class:u("lucide-icon","lucide",r()?`lucide-${r()}`:"",n.class)},void 0,!0)),W(e,h),le()}function Om(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);In(e,pt({name:"clock"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:(r,o)=>{var s=Xe(),a=ve(s);Ke(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Hm(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);In(e,pt({name:"download"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(r,o)=>{var s=Xe(),a=ve(s);Ke(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Dm(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);In(e,pt({name:"ellipsis-vertical"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"12",cy:"5",r:"1"}],["circle",{cx:"12",cy:"19",r:"1"}]],children:(r,o)=>{var s=Xe(),a=ve(s);Ke(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Rm(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);In(e,pt({name:"map"},()=>n,{iconNode:[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"}],["path",{d:"M15 5.764v15"}],["path",{d:"M9 3.236v15"}]],children:(r,o)=>{var s=Xe(),a=ve(s);Ke(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Lm(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);In(e,pt({name:"play"},()=>n,{iconNode:[["polygon",{points:"6 3 20 12 6 21 6 3"}]],children:(r,o)=>{var s=Xe(),a=ve(s);Ke(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Vm(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);In(e,pt({name:"settings"},()=>n,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(r,o)=>{var s=Xe(),a=ve(s);Ke(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}function Xm(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);In(e,pt({name:"upload"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(r,o)=>{var s=Xe(),a=ve(s);Ke(a,t,"default",{}),W(r,s)},$$slots:{default:!0}}))}const Ym={nodes:[{id:"1",type:"textInput",position:{x:-20,y:0},data:{value:"What is AGI?"},width:180,height:100},{id:"2",type:"generate",position:{x:240,y:0},width:460,height:340,data:{markdown:"",html:""}}],edges:[{source:"1",target:"2"}]};var Yr,Cc;class Wm{constructor(){Re(this,Yr);const t=kt(this,Yr,Cc).call(this);this.nodes=ne(t.nodes),this.edges=ne(t.edges)}LoadFromFile(t){this.nodes.set(t.nodes),this.edges.set(t.edges),this.Save()}AddNode(t){this.nodes.update(n=>(n.push(t),n)),this.Save()}AddEdge(t,n){this.edges.update(i=>(i.push({source:t,target:n,id:new Date().getTime().toString()}),i)),this.Save()}UpdateNode(t,n){this.nodes.update(i=>{const r=i.find(o=>o.id===t);return r.data={...r.data,...n},i}),this.Save()}Dump(){return{nodes:R(this.nodes),edges:R(this.edges)}}Save(){const t=this.Dump();localStorage.graph=JSON.stringify(t)}GetPrompt(t){const i=R(this.edges).find(a=>a.target===t);if(!i)return"";const o=R(this.nodes).find(a=>a.id===i.source);let s;switch(o.type){case"textInput":s={role:"user",content:o.data.value};break;case"generate":s={role:"model",content:o.data.markdown};break}return[...this.GetPrompt(o.id),s]}}Yr=new WeakSet,Cc=function(){return localStorage.graph?JSON.parse(localStorage.graph):Ym};const ot=new Wm;var Pi,Ai,zi,Ii,Ti,Oi,Hi,Di,Ri,bn,gi;class Bm{constructor(){Re(this,bn);Re(this,Pi,Je(!1));Re(this,Ai,Je(null));Re(this,zi,Je(null));Re(this,Ii,Je(void 0));Re(this,Ti,Je(void 0));Re(this,Oi,Je(void 0));Re(this,Hi,Je(void 0));Re(this,Di,Je(0));Re(this,Ri,Je(0))}get IsVisible(){return d(fe(this,Pi))}set IsVisible(t){D(fe(this,Pi),Le(t))}get Node(){return d(fe(this,Ai))}set Node(t){D(fe(this,Ai),Le(t))}get Edge(){return d(fe(this,zi))}set Edge(t){D(fe(this,zi),Le(t))}get Top(){return d(fe(this,Ii))}set Top(t){D(fe(this,Ii),Le(t))}get Left(){return d(fe(this,Ti))}set Left(t){D(fe(this,Ti),Le(t))}get Right(){return d(fe(this,Oi))}set Right(t){D(fe(this,Oi),Le(t))}get Bottom(){return d(fe(this,Hi))}set Bottom(t){D(fe(this,Hi),Le(t))}get CanvasWidth(){return d(fe(this,Di))}set CanvasWidth(t){D(fe(this,Di),Le(t))}get CanvasHeight(){return d(fe(this,Ri))}set CanvasHeight(t){D(fe(this,Ri),Le(t))}ShowPane(t){kt(this,bn,gi).call(this,t)}ShowNode(t,n){kt(this,bn,gi).call(this,t,n)}ShowEdge(t,n){kt(this,bn,gi).call(this,t,null,n)}ShowConnect(t,n){kt(this,bn,gi).call(this,t,null,null,n)}Hide(){this.IsVisible&&(this.Event=null,this.Node=null,this.Edge=null,this.IsVisible=!1)}}Pi=new WeakMap,Ai=new WeakMap,zi=new WeakMap,Ii=new WeakMap,Ti=new WeakMap,Oi=new WeakMap,Hi=new WeakMap,Di=new WeakMap,Ri=new WeakMap,bn=new WeakSet,gi=function(t,n,i,r){if(t.target.closest(".nomenu")||n||i){this.Hide();return}this.Event=t,this.Node=n,this.Edge=i,this.Connection=r,t.preventDefault(),this.Top=t.clientY<this.CanvasHeight-200?t.clientY+"px":void 0,this.Left=t.clientX<this.CanvasWidth-200?t.clientX+"px":void 0,this.Right=t.clientX>=this.CanvasWidth-200?this.CanvasWidth-t.clientX+"px":void 0,this.Bottom=t.clientY>=this.CanvasHeight-200?this.CanvasHeight-t.clientY+"px":void 0,this.IsVisible=!0};const De=new Bm;var Li,Vi,Xi,Yi,Wr;class Km{constructor(){Re(this,Li,Je(!1));Re(this,Vi,Je(""));Re(this,Xi,Je(""));Re(this,Yi,Je(""));Re(this,Wr,At(()=>!!(this.openaiKey||this.geminiKey||this.anthropicKey)));if(localStorage.settings){const t=JSON.parse(localStorage.settings);this.openaiKey=t.openaiKey,this.geminiKey=t.geminiKey,this.anthropicKey=t.anthropicKey}this.HasApiKey||this.Show()}get IsVisible(){return d(fe(this,Li))}set IsVisible(t){D(fe(this,Li),Le(t))}get openaiKey(){return d(fe(this,Vi))}set openaiKey(t){D(fe(this,Vi),Le(t))}get geminiKey(){return d(fe(this,Xi))}set geminiKey(t){D(fe(this,Xi),Le(t))}get anthropicKey(){return d(fe(this,Yi))}set anthropicKey(t){D(fe(this,Yi),Le(t))}get HasApiKey(){return d(fe(this,Wr))}Save(){localStorage.settings=JSON.stringify({openaiKey:this.openaiKey,geminiKey:this.geminiKey,anthropicKey:this.anthropicKey})}Show(){this.IsVisible=!0}Hide(){this.IsVisible=!1}}Li=new WeakMap,Vi=new WeakMap,Xi=new WeakMap,Yi=new WeakMap,Wr=new WeakMap;const Mt=new Km;var Fm=ue("<!> <!> <!>",1),Zm=ue('<input type="file" id="fileInput" style="display: none;" accept=".json"> <!>',1);function Gm(e,t){ae(t,!1);let n=F();zn(()=>{Mt.geminiKey});function i(c){const l=c.target.files[0];if(!l||l.type!="application/json")throw"Invalid file";const u=new FileReader;u.onload=h=>{const f=JSON.parse(h.target.result.toString());if(!Array.isArray(f.nodes)||!Array.isArray(f.edges))throw"Invalid file";ot.LoadFromFile(f)},u.readAsText(l)}function r(){const c=ot.Dump(),l=JSON.stringify(c,null,2),u=new Blob([l],{type:"application/json"}),h=URL.createObjectURL(u),f=document.createElement("a");f.href=h,f.download="llm-graph.json",f.click(),URL.revokeObjectURL(h)}he();var o=Zm(),s=ve(o);s.__change=i,ji(s,c=>D(n,c),()=>d(n));var a=ie(s,2);Ec(a,{position:"top-left",showFitView:!1,showLock:!1,showZoom:!1,children:(c,l)=>{var u=Fm(),h=ve(u);ln(h,{title:"Import",class:"canvas-llm-controll-button",$$events:{click:()=>d(n).click()},children:(y,p)=>{Xm(y,{size:24})},$$slots:{default:!0}});var f=ie(h,2);ln(f,{title:"Export",class:"canvas-llm-controll-button",$$events:{click:r},children:(y,p)=>{Hm(y,{size:24})},$$slots:{default:!0}});var g=ie(f,2);ln(g,{title:"Settings",class:"canvas-llm-controll-button",$$events:{click:()=>Mt.Show()},children:(y,p)=>{Vm(y,{size:24})},$$slots:{default:!0}}),W(c,u)},$$slots:{default:!0}}),W(e,o),le()}Pn(["change"]);var qm=ue('<button class="context-menu-item svelte-lx03e0">Duplicate node</button> <button class="context-menu-item svelte-lx03e0">Delete node</button>',1),Um=ue('<button class="context-menu-item svelte-lx03e0">Delete edge</button>'),Jm=ue('<div class="context-menu-item svelte-lx03e0" style="padding: 0.5em;background: #ddd; color: #666;">Add node:</div> <button class="context-menu-item svelte-lx03e0">TextInput</button> <button class="context-menu-item svelte-lx03e0">Generate</button>',1),jm=ue('<div class="context-menu svelte-lx03e0"><!></div>');function Qm(e,t){ae(t,!1);const{screenToFlowPosition:n}=Mm();function i(f){f.id=new Date().getTime().toString(),f.origin=[0,0],f.position=n({x:De.Event.clientX,y:De.Event.clientY}),ot.AddNode(f),De.Connection&&(De.Connection.fromHandle.type=="source"?ot.AddEdge(De.Connection.fromNode.id,f.id):ot.AddEdge(f.id,De.Connection.fromNode.id)),De.Hide()}function r(){i({type:"textInput",width:260,height:120,data:{value:""}})}function o(){i({type:"generate",width:460,height:340,data:{markdown:"",html:""}})}function s(){De.Hide()}function a(){De.Hide()}function c(){De.Hide()}he();var l=Xe(),u=ve(l);{var h=f=>{var g=jm(),y=se(g);{var p=x=>{var m=qm(),b=ve(m),E=ie(b,2);Me("click",b,s),Me("click",E,a),W(x,m)},N=x=>{var m=Xe(),b=ve(m);{var E=C=>{var k=Um();Me("click",k,c),W(C,k)},S=C=>{var k=Jm(),M=ie(ve(k),2),A=ie(M,2);Me("click",M,r),Me("click",A,o),W(C,k)};Ie(b,C=>{De.Edge?C(E):C(S,!1)},!0)}W(x,m)};Ie(y,x=>{De.Node?x(p):x(N,!1)})}_e(()=>{Ve(g,"top",De.Top),Ve(g,"left",De.Left),Ve(g,"right",De.Right),Ve(g,"bottom",De.Bottom)}),W(f,g)};Ie(u,f=>{De.IsVisible&&f(h)})}W(e,l),le()}function $m(e,t,n){ot.UpdateNode(t.id,{value:d(n)})}var ey=ue('<!> <!> <!> <node-content><node-header><node-header-left>Input</node-header-left> <node-header-right></node-header-right></node-header> <node-body><textarea class="nodrag nozoom node-text"></textarea></node-body></node-content>',3);function ty(e,t){ae(t,!0);const n=qe(),i=()=>Z(o,"$connections",n);let r=Je(Le(t.data.value));const o=kc({nodeId:t.id,type:"target"}),s=At(()=>i().length===0);var a=ey(),c=ve(a);Sc(c,{minWidth:100,minHeight:30,onResizeEnd:()=>ot.Save()});var l=ie(c,2);yn(l,{type:"target",get position(){return de.Left},get isConnectable(){return d(s)}});var u=ie(l,2);yn(u,{type:"source",get position(){return de.Right}});var h=ie(u,2),f=se(h),g=ie(f,2);yl(g,"class","nomenu");var y=se(g);y.__change=[$m,t,r],Ho(y,()=>d(r),p=>D(r,p)),W(e,a),le()}Pn(["change"]);var ny=ue('<button class="svelte-1ds4nvp"><!></button>');function iy(e,t){var n=ny();n.__click=function(...r){var o;(o=t.onclick)==null||o.apply(this,r)};var i=se(n);Dm(i,{size:16}),W(e,n)}Pn(["click"]);var Wi,Bi,en,Nc,Mc,Qo;class ry{constructor(){Re(this,en);Re(this,Wi,Je(Le([])));Re(this,Bi,Je(Le({})));kt(this,en,Nc).call(this),kt(this,en,Mc).call(this)}get providers(){return d(fe(this,Wi))}set providers(t){D(fe(this,Wi),Le(t))}get models(){return d(fe(this,Bi))}set models(t){D(fe(this,Bi),Le(t))}}Wi=new WeakMap,Bi=new WeakMap,en=new WeakSet,Nc=function(){if(localStorage.info)try{const t=JSON.parse(localStorage.info);kt(this,en,Qo).call(this,t)}catch(t){console.log("[AppInfo > readLocal]",t,localStorage.info)}},Mc=async function(){const t="https://script.google.com/macros/s/AKfycbxT5XB3Jw24XlEgpLIWLah7ZT6nNVCDXrDFmZ3Zzw-TiudLHoOdBLFvC-bIkPPnRIJnlQ/exec?app="+window.location,n=await fetch(t);if(!n.ok)throw new Error(`[AppInfo > readRemote] ${n.status}: ${n.statusText}`);const i=await n.json();localStorage.info=JSON.stringify(i),kt(this,en,Qo).call(this,i)},Qo=function(t){const n={};for(let i=0;i<t.models.length;i++){let r=t.models[i];for(let o=0;o<r.models.length;o++){let s=r.models[o];n[s.id]=r.id}}this.models=n,this.providers=t.models};const Lr=new ry;class oy{constructor(){}async Call(t,n){switch(Lr.models[t]){case"openai":return await this.CallOpenAI(t,n);case"google":return await this.CallGoogle(t,n)}throw"Invalid LLM"}async CallOpenAI(t,n){const i="https://api.openai.com/v1/chat/completions",r=[];for(var o=0;o<n.length;o++){let s=n[o],a={content:s.content};switch(s.role){case"system":a.role="system";break;case"user":a.role="user";break;case"model":a.role="assistant";break}r.push(a)}try{const s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+Mt.openaiKey},body:JSON.stringify({model:t,messages:r})});if(!s.ok)throw new Error(`[AiClient > CallOpenAI] ${s.status}: ${s.statusText}`);const a=await s.json(),c=a.choices[0].message.content,l=marked.parse(c);return console.log(a),console.log(c),console.log(l),{markdown:c,html:l}}catch(s){throw console.error("Error calling Gemini AI API:",s),s}}async CallGoogle(t,n){const i=`https://generativelanguage.googleapis.com/v1beta/models/${t}:generateContent?key=${Mt.geminiKey}`,r=[];for(var o=0;o<n.length;o++){let s=n[o],a={parts:[{text:s.content}]};switch(s.role){case"user":a.role="user";break;case"model":a.role="model";break;case"system":a.role="user",a.parts[0].text=`*${s.content}*`;break}r.push(a)}try{const s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:r,safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_NONE"}]})});if(!s.ok)throw new Error(`[AiClient > CallGoogle] ${s.status}: ${s.statusText}`);const c=(await s.json()).candidates[0].content.parts[0].text,l=marked.parse(c);return{markdown:c,html:l}}catch(s){throw console.error("Error calling Gemini AI API:",s),s}}}const sy=new oy;var Ki,Br,Ra;let ay=(Ra=class{constructor(){Re(this,Ki,Je(0));Re(this,Br,At(()=>this.NodeID>0))}get NodeID(){return d(fe(this,Ki))}set NodeID(t){D(fe(this,Ki),Le(t))}get IsVisible(){return d(fe(this,Br))}Show(t){this.NodeID=t}Hide(){this.NodeID=0}},Ki=new WeakMap,Br=new WeakMap,Ra);const Jn=new ay;async function ly(e,t,n){if(!t.data.model){Jn.Show(t.id);return}const i=Lr.models[t.data.model];if(i=="openai"&&!Mt.openaiKey){Mt.Show();return}if(i=="google"&&!Mt.geminiKey){Mt.Show();return}D(n,!0);const r=ot.GetPrompt(t.id),{markdown:o,html:s}=await sy.Call(t.data.model,r);ot.UpdateNode(t.id,{markdown:o,html:s}),D(n,!1)}var cy=ue('<button class="button" title="Call LLM" aria-label="Call LLM"><!></button>'),uy=ue('<button class="button" title="In progress..." aria-label="In progress..." disabled><!></button>'),dy=ue("<!> <!> <!> <node-content><node-header><node-header-left><!> <!></node-header-left> <node-header-right><!></node-header-right></node-header> <node-body><!></node-body></node-content>",3);function fy(e,t){ae(t,!0);const n=qe(),i=()=>Z(o,"$connections",n);let r=Je(!1);const o=kc({nodeId:t.id,type:"target"}),s=At(()=>i().length===0);var a=dy(),c=ve(a);Sc(c,{minWidth:100,minHeight:30,onResizeEnd:()=>ot.Save()});var l=ie(c,2);yn(l,{type:"target",get position(){return de.Left},get isConnectable(){return d(s)}});var u=ie(l,2);yn(u,{type:"source",get position(){return de.Right}});var h=ie(u,2),f=se(h),g=se(f),y=se(g);{var p=M=>{var A=To();_e(()=>mn(A,t.data.model)),W(M,A)},N=M=>{var A=To("Generate");W(M,A)};Ie(y,M=>{t.data.model?M(p):M(N,!1)})}var x=ie(y,2);{var m=M=>{var A=cy();A.__click=[ly,t,r];var T=se(A);Lm(T,{size:16}),W(M,A)},b=M=>{var A=uy(),T=se(A);Om(T,{size:16}),W(M,A)};Ie(x,M=>{d(r)?M(b,!1):M(m)})}var E=ie(g,2),S=se(E);iy(S,{onclick:()=>Jn.Show(t.id)});var C=ie(f,2);yl(C,"class","nodrag nozoom nomenu node-text");var k=se(C);ed(k,()=>t.data.html),W(e,a),le()}Pn(["click"]);var hy=ue("<!> <!> <!> <!> <!>",1),gy=ue("<div><!></div>");function vy(e,t){ae(t,!0);const n={textInput:ty,generate:fy};let i=Je(!1),r=Je(!0),o=At(()=>d(r));async function s(l,u){u.isValid||(console.log(u),await new Promise(h=>setTimeout(h,100)),De.ShowConnect(l,u))}var a=gy();Ve(a,"height","100%");var c=se(a);nm(c,{get nodes(){return ot.nodes},get edges(){return ot.edges},nodeTypes:n,get zoomOnScroll(){return d(r)},get preventScrolling(){return d(o)},fitView:!0,fitViewOptions:{maxZoom:1,minZoom:1},proOptions:{hideAttribution:!0},colorMode:"dark",snapGrid:[20,20],onconnect:()=>ot.Save(),onconnectstart:()=>De.Hide(),onconnectend:s,ondelete:l=>ot.Save(),$$events:{paneclick:()=>De.Hide(),nodeclick:()=>De.Hide(),edgeclick:()=>De.Hide(),nodedragstart:()=>De.Hide(),nodedragstop:()=>ot.Save(),panecontextmenu:({detail:{event:l}})=>De.ShowPane(l),nodecontextmenu:({detail:{event:l,node:u}})=>De.ShowNode(l,u),edgecontextmenu:({detail:{event:l,edge:u}})=>De.ShowEdge(l,null,u),nodemousemove:({detail:{event:l}})=>{D(r,l.target.closest(".nozoom")==null)},nodemouseleave:()=>{D(r,!0)}},children:(l,u)=>{var h=hy(),f=ve(h);Ec(f,{children:(m,b)=>{ln(m,{title:"MiniMap",class:"canvas-llm-controll-button",$$events:{click:()=>D(i,!d(i))},children:(E,S)=>{Rm(E,{size:24})},$$slots:{default:!0}})},$$slots:{default:!0}});var g=ie(f,2);Qm(g,{});var y=ie(g,2);Gm(y,{});var p=ie(y,2);{var N=m=>{Nm(m,{})};Ie(p,m=>{d(i)&&m(N)})}var x=ie(p,2);bm(x,{get variant(){return Qt.Dots},patternColor:"rgba(255,255,255,0.5)",gap:20}),W(l,h)},$$slots:{default:!0}}),kr(a,"clientWidth",l=>De.CanvasWidth=l),kr(a,"clientHeight",l=>De.CanvasHeight=l),W(e,a),le()}var my=ue('<th class="svelte-mspf29"> </th>'),yy=(e,t,n)=>{t(d(n).id)},py=ue('<button class="svelte-mspf29"> </button>'),_y=ue('<td class="svelte-mspf29"></td>'),wy=ue("<table><thead><tr></tr></thead><tbody><tr></tr></tbody></table>");function xy(e,t){ae(t,!1);function n(c){ot.UpdateNode(Jn.NodeID,{model:c}),Jn.Hide()}he();var i=wy(),r=se(i),o=se(r);Yt(o,5,()=>Lr.providers,vr,(c,l)=>{var u=my(),h=se(u);_e(()=>mn(h,d(l).name)),W(c,u)});var s=ie(r),a=se(s);Yt(a,5,()=>Lr.providers,vr,(c,l)=>{var u=_y();Yt(u,5,()=>d(l).models,vr,(h,f)=>{var g=py();g.__click=[yy,n,f];var y=se(g);_e(()=>mn(y,d(f).id)),W(h,g)}),W(c,u)}),W(e,i),le()}Pn(["click"]);var Gt=sd(()=>Mt),by=ue('<div class="settings svelte-1mdsm51"><h3 class="text-lg font-bold">API Keys</h3> <label class="input input-bordered flex items-center gap-2 svelte-1mdsm51">OpenAI: <input type="text" class="grow svelte-1mdsm51"></label> <label class="input input-bordered flex items-center gap-2 svelte-1mdsm51">Gemini: <input type="text" class="grow svelte-1mdsm51"></label> <div class="center-h"><button class="btn">Close</button></div></div>');function Ey(e,t){ae(t,!1),he();var n=by(),i=ie(se(n),2),r=ie(se(i));r.__change=()=>Gt().Save();var o=ie(i,2),s=ie(se(o));s.__change=()=>Gt().Save();var a=ie(o,2),c=se(a);c.__click=()=>Gt().Hide(),Ho(r,()=>Gt().openaiKey,l=>Gt(Gt().openaiKey=l)),Ho(s,()=>Gt().geminiKey,l=>Gt(Gt().geminiKey=l)),W(e,n),le()}Pn(["change","click"]);var Sy=ue('<div class="full-screen center-h svelte-uz21qr"><div class="relative max-size center-v"><!></div></div>');function ky(e,t){ae(t,!1),he();var n=Xe(),i=ve(n);{var r=o=>{var s=Sy(),a=se(s),c=se(a);{var l=h=>{Ey(h,{})},u=h=>{var f=Xe(),g=ve(f);{var y=p=>{xy(p,{})};Ie(g,p=>{Jn.IsVisible&&p(y)},!0)}W(h,f)};Ie(c,h=>{Mt.IsVisible?h(l):h(u,!1)})}W(o,s)};Ie(i,o=>{(Mt.IsVisible||Jn.IsVisible)&&o(r)})}W(e,n),le()}var Cy=ue("<!> <!>",1);function Ny(e){var t=Cy(),n=ve(t);vy(n,{});var i=ie(n,2);ky(i,{}),W(e,t)}Gu(Ny,{target:document.getElementById("app")});
