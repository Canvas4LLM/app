var ku=Object.defineProperty;var ws=e=>{throw TypeError(e)};var Cu=(e,t,n)=>t in e?ku(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Xi=(e,t,n)=>Cu(e,typeof t!="symbol"?t+"":t,n),Wr=(e,t,n)=>t.has(e)||ws("Cannot "+n);var ze=(e,t,n)=>(Wr(e,t,"read from private field"),n?n.call(e):t.get(e)),Ue=(e,t,n)=>t.has(e)?ws("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Kr=(e,t,n,i)=>(Wr(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),an=(e,t,n)=>(Wr(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const Nu=!1;var Ci=Array.isArray,Po=Array.from,Mu=Object.defineProperty,Jt=Object.getOwnPropertyDescriptor,wa=Object.getOwnPropertyDescriptors,Pu=Object.prototype,Au=Array.prototype,Ao=Object.getPrototypeOf;function Zn(e){return typeof e=="function"}const Lt=()=>{};function Tu(e){return e()}function tr(e){for(var t=0;t<e.length;t++)e[t]()}const _t=2,xa=4,Ni=8,To=16,wt=32,Mi=64,no=128,yn=256,nr=512,et=1024,en=2048,Rn=4096,Mt=8192,Ln=16384,zu=32768,Pi=65536,Iu=1<<17,Ou=1<<19,ba=1<<20,jt=Symbol("$state"),Ea=Symbol("legacy props"),Du=Symbol("");function Sa(e){return e===this.v}function zo(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Io(e){return!zo(e,this.v)}function Hu(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ru(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Lu(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Vu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Xu(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Yu(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Bu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Wu(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Ku(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Vn=!1;function Fu(){Vn=!0}const Oo=1,Do=2,ka=4,Gu=8,qu=16,Zu=1,Uu=2,Ca=4,Ju=8,ju=16,Na=1,Qu=2,it=Symbol(),Ma="http://www.w3.org/2000/svg";function st(e,t){var n={f:0,v:e,reactions:null,equals:Sa,version:0};return n}function yt(e){return Pa(st(e))}function xr(e,t=!1){var i;const n=st(e);return t||(n.equals=Io),Vn&&xe!==null&&xe.l!==null&&((i=xe.l).s??(i.s=[])).push(n),n}function F(e,t=!1){return Pa(xr(e,t))}function Pa(e){return Me!==null&&Me.f&_t&&(Pt===null?ac([e]):Pt.push(e)),e}function io(e,t){return Y(e,vt(()=>h(e))),t}function Y(e,t){return Me!==null&&kr()&&Me.f&(_t|To)&&(Pt===null||!Pt.includes(e))&&Ku(),ro(e,t)}function ro(e,t){return e.equals(t)||(e.v=t,e.version=Fa(),Aa(e,en),kr()&&he!==null&&he.f&et&&!(he.f&wt)&&(Je!==null&&Je.includes(e)?(xt(he,en),Nr(he)):Qt===null?lc([e]):Qt.push(e))),t}function Aa(e,t){var n=e.reactions;if(n!==null)for(var i=kr(),r=n.length,o=0;o<r;o++){var s=n[o],a=s.f;a&en||!i&&s===he||(xt(s,t),a&(et|yn)&&(a&_t?Aa(s,Rn):Nr(s)))}}let Ho=!1;function je(e,t=null,n){if(typeof e!="object"||e===null||jt in e)return e;const i=Ao(e);if(i!==Pu&&i!==Au)return e;var r=new Map,o=Ci(e),s=st(0);o&&r.set("length",st(e.length));var a;return new Proxy(e,{defineProperty(l,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Yu();var d=r.get(u);return d===void 0?(d=st(c.value),r.set(u,d)):Y(d,je(c.value,a)),!0},deleteProperty(l,u){var c=r.get(u);if(c===void 0)u in l&&r.set(u,st(it));else{if(o&&typeof u=="string"){var d=r.get("length"),f=Number(u);Number.isInteger(f)&&f<d.v&&Y(d,f)}Y(c,it),xs(s)}return!0},get(l,u,c){var y;if(u===jt)return e;var d=r.get(u),f=u in l;if(d===void 0&&(!f||(y=Jt(l,u))!=null&&y.writable)&&(d=st(je(f?l[u]:it,a)),r.set(u,d)),d!==void 0){var g=h(d);return g===it?void 0:g}return Reflect.get(l,u,c)},getOwnPropertyDescriptor(l,u){var c=Reflect.getOwnPropertyDescriptor(l,u);if(c&&"value"in c){var d=r.get(u);d&&(c.value=h(d))}else if(c===void 0){var f=r.get(u),g=f==null?void 0:f.v;if(f!==void 0&&g!==it)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return c},has(l,u){var g;if(u===jt)return!0;var c=r.get(u),d=c!==void 0&&c.v!==it||Reflect.has(l,u);if(c!==void 0||he!==null&&(!d||(g=Jt(l,u))!=null&&g.writable)){c===void 0&&(c=st(d?je(l[u],a):it),r.set(u,c));var f=h(c);if(f===it)return!1}return d},set(l,u,c,d){var C;var f=r.get(u),g=u in l;if(o&&u==="length")for(var y=c;y<f.v;y+=1){var p=r.get(y+"");p!==void 0?Y(p,it):y in l&&(p=st(it),r.set(y+"",p))}f===void 0?(!g||(C=Jt(l,u))!=null&&C.writable)&&(f=st(void 0),Y(f,je(c,a)),r.set(u,f)):(g=f.v!==it,Y(f,je(c,a)));var M=Reflect.getOwnPropertyDescriptor(l,u);if(M!=null&&M.set&&M.set.call(d,c),!g){if(o&&typeof u=="string"){var b=r.get("length"),m=Number(u);Number.isInteger(m)&&m>=b.v&&Y(b,m+1)}xs(s)}return!0},ownKeys(l){h(s);var u=Reflect.ownKeys(l).filter(f=>{var g=r.get(f);return g===void 0||g.v!==it});for(var[c,d]of r)d.v!==it&&!(c in l)&&u.push(c);return u},setPrototypeOf(){Bu()}})}function xs(e,t=1){Y(e,e.v+t)}var rt,Ta,za;function $u(){if(rt===void 0){rt=window;var e=Element.prototype,t=Node.prototype;Ta=Jt(t,"firstChild").get,za=Jt(t,"nextSibling").get,e.__click=void 0,e.__className="",e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function Ai(e=""){return document.createTextNode(e)}function Ct(e){return Ta.call(e)}function br(e){return za.call(e)}function fe(e,t){return Ct(e)}function pe(e,t){{var n=Ct(e);return n instanceof Comment&&n.data===""?br(n):n}}function ie(e,t=1,n=!1){let i=e;for(;t--;)i=br(i);return i}function ec(e){e.textContent=""}function tn(e){var t=_t|en;he===null?t|=yn:he.f|=ba;var n=Me!==null&&Me.f&_t?Me:null;const i={children:null,ctx:xe,deps:null,equals:Sa,f:t,fn:e,reactions:null,v:null,version:0,parent:n??he};return n!==null&&(n.children??(n.children=[])).push(i),i}function oe(e){const t=tn(e);return t.equals=Io,t}function Ia(e){var t=e.children;if(t!==null){e.children=null;for(var n=0;n<t.length;n+=1){var i=t[n];i.f&_t?Ro(i):Tt(i)}}}function tc(e){for(var t=e.parent;t!==null;){if(!(t.f&_t))return t;t=t.parent}return null}function Oa(e){var t,n=he;gt(tc(e));try{Ia(e),t=Ga(e)}finally{gt(n)}return t}function Da(e){var t=Oa(e),n=(ln||e.f&yn)&&e.deps!==null?Rn:et;xt(e,n),e.equals(t)||(e.v=t,e.version=Fa())}function Ro(e){Ia(e),ri(e,0),xt(e,Ln),e.v=e.children=e.deps=e.ctx=e.reactions=null}function Ha(e){he===null&&Me===null&&Lu(),Me!==null&&Me.f&yn&&Ru(),Vo&&Hu()}function nc(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Xn(e,t,n,i=!0){var r=(e&Mi)!==0,o=he,s={ctx:xe,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:e|en,first:null,fn:t,last:null,next:null,parent:r?null:o,prev:null,teardown:null,transitions:null,version:0};if(n){var a=En;try{bs(!0),Ti(s),s.f|=zu}catch(c){throw Tt(s),c}finally{bs(a)}}else t!==null&&Nr(s);var l=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&ba)===0;if(!l&&!r&&i&&(o!==null&&nc(s,o),Me!==null&&Me.f&_t)){var u=Me;(u.children??(u.children=[])).push(s)}return s}function Ra(e){const t=Xn(Ni,null,!1);return xt(t,et),t.teardown=e,t}function oo(e){Ha();var t=he!==null&&(he.f&wt)!==0&&xe!==null&&!xe.m;if(t){var n=xe;(n.e??(n.e=[])).push({fn:e,effect:he,reaction:Me})}else{var i=ct(e);return i}}function ic(e){return Ha(),Yn(e)}function rc(e){const t=Xn(Mi,e,!0);return(n={})=>new Promise(i=>{n.outro?Pn(t,()=>{Tt(t),i(void 0)}):(Tt(t),i(void 0))})}function ct(e){return Xn(xa,e,!1)}function Q(e,t){var n=xe,i={effect:null,ran:!1};n.l.r1.push(i),i.effect=Yn(()=>{e(),!i.ran&&(i.ran=!0,Y(n.l.r2,!0),vt(t))})}function Qe(){var e=xe;Yn(()=>{if(h(e.l.r2)){for(var t of e.l.r1){var n=t.effect;n.f&et&&xt(n,Rn),Wn(n)&&Ti(n),t.ran=!1}e.l.r2.v=!1}})}function Yn(e){return Xn(Ni,e,!0)}function Ce(e){return Bn(e)}function Bn(e,t=0){return Xn(Ni|To|t,e,!0)}function nn(e,t=!0){return Xn(Ni|wt,e,!0,t)}function La(e){var t=e.teardown;if(t!==null){const n=Vo,i=Me;Es(!0),zt(null);try{t.call(null)}finally{Es(n),zt(i)}}}function Va(e){var t=e.deriveds;if(t!==null){e.deriveds=null;for(var n=0;n<t.length;n+=1)Ro(t[n])}}function Xa(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var i=n.next;Tt(n,t),n=i}}function oc(e){for(var t=e.first;t!==null;){var n=t.next;t.f&wt||Tt(t),t=n}}function Tt(e,t=!0){var n=!1;if((t||e.f&Ou)&&e.nodes_start!==null){for(var i=e.nodes_start,r=e.nodes_end;i!==null;){var o=i===r?null:br(i);i.remove(),i=o}n=!0}Xa(e,t&&!n),Va(e),ri(e,0),xt(e,Ln);var s=e.transitions;if(s!==null)for(const l of s)l.stop();La(e);var a=e.parent;a!==null&&a.first!==null&&Ya(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Ya(e){var t=e.parent,n=e.prev,i=e.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),t!==null&&(t.first===e&&(t.first=i),t.last===e&&(t.last=n))}function Pn(e,t){var n=[];Lo(e,n,!0),Ba(n,()=>{Tt(e),t&&t()})}function Ba(e,t){var n=e.length;if(n>0){var i=()=>--n||t();for(var r of e)r.out(i)}else t()}function Lo(e,t,n){if(!(e.f&Mt)){if(e.f^=Mt,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var i=e.first;i!==null;){var r=i.next,o=(i.f&Pi)!==0||(i.f&wt)!==0;Lo(i,t,o?n:!1),i=r}}}function ii(e){Wa(e,!0)}function Wa(e,t){if(e.f&Mt){Wn(e)&&Ti(e),e.f^=Mt;for(var n=e.first;n!==null;){var i=n.next,r=(n.f&Pi)!==0||(n.f&wt)!==0;Wa(n,r?t:!1),n=i}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let so=!1,ao=[];function sc(){so=!1;const e=ao.slice();ao=[],tr(e)}function Er(e){so||(so=!0,queueMicrotask(sc)),ao.push(e)}function Sr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Ji=!1,ir=!1,rr=null,En=!1,Vo=!1;function bs(e){En=e}function Es(e){Vo=e}let lo=[],ti=0;let Me=null;function zt(e){Me=e}let he=null;function gt(e){he=e}let Pt=null;function ac(e){Pt=e}let Je=null,ut=0,Qt=null;function lc(e){Qt=e}let Ka=1,ln=!1,xe=null;function Fa(){return++Ka}function kr(){return!Vn||xe!==null&&xe.l===null}function Wn(e){var s,a;var t=e.f;if(t&en)return!0;if(t&Rn){var n=e.deps,i=(t&yn)!==0;if(n!==null){var r;if(t&nr){for(r=0;r<n.length;r++)((s=n[r]).reactions??(s.reactions=[])).push(e);e.f^=nr}for(r=0;r<n.length;r++){var o=n[r];if(Wn(o)&&Da(o),i&&he!==null&&!ln&&!((a=o==null?void 0:o.reactions)!=null&&a.includes(e))&&(o.reactions??(o.reactions=[])).push(e),o.version>e.version)return!0}}(!i||he!==null&&!ln)&&xt(e,et)}return!1}function uc(e,t){for(var n=t;n!==null;){if(n.f&no)try{n.fn(e);return}catch{n.f^=no}n=n.parent}throw Ji=!1,e}function cc(e){return(e.f&Ln)===0&&(e.parent===null||(e.parent.f&no)===0)}function Cr(e,t,n,i){if(Ji){if(n===null&&(Ji=!1),cc(t))throw e;return}n!==null&&(Ji=!0);{uc(e,t);return}}function Ga(e){var f;var t=Je,n=ut,i=Qt,r=Me,o=ln,s=Pt,a=xe,l=e.f;Je=null,ut=0,Qt=null,Me=l&(wt|Mi)?null:e,ln=!En&&(l&yn)!==0,Pt=null,xe=e.ctx;try{var u=(0,e.fn)(),c=e.deps;if(Je!==null){var d;if(ri(e,ut),c!==null&&ut>0)for(c.length=ut+Je.length,d=0;d<Je.length;d++)c[ut+d]=Je[d];else e.deps=c=Je;if(!ln)for(d=ut;d<c.length;d++)((f=c[d]).reactions??(f.reactions=[])).push(e)}else c!==null&&ut<c.length&&(ri(e,ut),c.length=ut);return u}finally{Je=t,ut=n,Qt=i,Me=r,ln=o,Pt=s,xe=a}}function dc(e,t){let n=t.reactions;if(n!==null){var i=n.indexOf(e);if(i!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[i]=n[r],n.pop())}}n===null&&t.f&_t&&(Je===null||!Je.includes(t))&&(xt(t,Rn),t.f&(yn|nr)||(t.f^=nr),ri(t,0))}function ri(e,t){var n=e.deps;if(n!==null)for(var i=t;i<n.length;i++)dc(e,n[i])}function Ti(e){var t=e.f;if(!(t&Ln)){xt(e,et);var n=he,i=xe;he=e;try{t&To?oc(e):Xa(e),Va(e),La(e);var r=Ga(e);e.teardown=typeof r=="function"?r:null,e.version=Ka}catch(o){Cr(o,e,n,i||e.ctx)}finally{he=n}}}function fc(){if(ti>1e3){ti=0;try{Vu()}catch(e){if(rr!==null)Cr(e,rr,null);else throw e}}ti++}function hc(e){var t=e.length;if(t!==0){fc();var n=En;En=!0;try{for(var i=0;i<t;i++){var r=e[i];r.f&et||(r.f^=et);var o=[];qa(r,o),gc(o)}}finally{En=n}}}function gc(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var i=e[n];if(!(i.f&(Ln|Mt)))try{Wn(i)&&(Ti(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?Ya(i):i.fn=null))}catch(r){Cr(r,i,null,i.ctx)}}}function vc(){if(ir=!1,ti>1001)return;const e=lo;lo=[],hc(e),ir||(ti=0,rr=null)}function Nr(e){ir||(ir=!0,queueMicrotask(vc)),rr=e;for(var t=e;t.parent!==null;){t=t.parent;var n=t.f;if(n&(Mi|wt)){if(!(n&et))return;t.f^=et}}lo.push(t)}function qa(e,t){var n=e.first,i=[];e:for(;n!==null;){var r=n.f,o=(r&wt)!==0,s=o&&(r&et)!==0,a=n.next;if(!s&&!(r&Mt))if(r&Ni){if(o)n.f^=et;else try{Wn(n)&&Ti(n)}catch(d){Cr(d,n,null,n.ctx)}var l=n.first;if(l!==null){n=l;continue}}else r&xa&&i.push(n);if(a===null){let d=n.parent;for(;d!==null;){if(e===d)break e;var u=d.next;if(u!==null){n=u;continue e}d=d.parent}}n=a}for(var c=0;c<i.length;c++)l=i[c],t.push(l),qa(l,t)}function h(e){var c;var t=e.f,n=(t&_t)!==0;if(n&&t&Ln){var i=Oa(e);return Ro(e),i}if(Me!==null){Pt!==null&&Pt.includes(e)&&Wu();var r=Me.deps;Je===null&&r!==null&&r[ut]===e?ut++:Je===null?Je=[e]:Je.push(e),Qt!==null&&he!==null&&he.f&et&&!(he.f&wt)&&Qt.includes(e)&&(xt(he,en),Nr(he))}else if(n&&e.deps===null)for(var o=e,s=o.parent,a=o;s!==null;)if(s.f&_t){var l=s;a=l,s=l.parent}else{var u=s;(c=u.deriveds)!=null&&c.includes(a)||(u.deriveds??(u.deriveds=[])).push(a);break}return n&&(o=e,Wn(o)&&Da(o)),e.v}function vt(e){const t=Me;try{return Me=null,e()}finally{Me=t}}const mc=~(en|Rn|et);function xt(e,t){e.f=e.f&mc|t}function Yt(e){return Xo().get(e)}function hn(e,t){return Xo().set(e,t),t}function yc(e){return Xo().has(e)}function Xo(e){return xe===null&&Sr(),xe.c??(xe.c=new Map(pc(xe)||void 0))}function pc(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function Ss(e,t=1){var n=h(e),i=t===1?n++:n--;return Y(e,n),i}function le(e,t=!1,n){xe={p:xe,c:null,e:null,m:!1,s:e,x:null,l:null},Vn&&!t&&(xe.l={s:null,u:null,r1:[],r2:st(!1)})}function ue(e){const t=xe;if(t!==null){const s=t.e;if(s!==null){var n=he,i=Me;t.e=null;try{for(var r=0;r<s.length;r++){var o=s[r];gt(o.effect),zt(o.reaction),ct(o.fn)}}finally{gt(n),zt(i)}}xe=t.p,t.m=!0}return{}}function X(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(jt in e)uo(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&jt in n&&uo(n)}}}function uo(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let i in e)try{uo(e[i],t)}catch{}const n=Ao(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=wa(n);for(let r in i){const o=i[r].get;if(o)try{o.call(e)}catch{}}}}}function _c(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const wc=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function xc(e){return wc.includes(e)}const bc={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject"};function Ec(e){return e=e.toLowerCase(),bc[e]??e}const Sc=["touchstart","touchmove"];function kc(e){return Sc.includes(e)}function Cc(e,t){if(t){const n=document.body;e.autofocus=!0,Er(()=>{document.activeElement===n&&e.focus()})}}let ks=!1;function Nc(){ks||(ks=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Za(e){var t=Me,n=he;zt(null),gt(null);try{return e()}finally{zt(t),gt(n)}}function Mc(e,t,n,i=n){e.addEventListener(t,()=>Za(n));const r=e.__on_r;r?e.__on_r=()=>{r(),i(!0)}:e.__on_r=()=>i(!0),Nc()}const Ua=new Set,co=new Set;function Ja(e,t,n,i){function r(o){if(i.capture||jn.call(t,o),!o.cancelBubble)return Za(()=>n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Er(()=>{t.addEventListener(e,r,i)}):t.addEventListener(e,r,i),r}function Ee(e,t,n,i,r){var o={capture:i,passive:r},s=Ja(e,t,n,o);(t===document.body||t===window||t===document)&&Ra(()=>{t.removeEventListener(e,s,o)})}function Mr(e){for(var t=0;t<e.length;t++)Ua.add(e[t]);for(var n of co)n(e)}function jn(e){var m;var t=this,n=t.ownerDocument,i=e.type,r=((m=e.composedPath)==null?void 0:m.call(e))||[],o=r[0]||e.target,s=0,a=e.__root;if(a){var l=r.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var u=r.indexOf(t);if(u===-1)return;l<=u&&(s=l)}if(o=r[s]||e.target,o!==t){Mu(e,"currentTarget",{configurable:!0,get(){return o||n}});var c=Me,d=he;zt(null),gt(null);try{for(var f,g=[];o!==null;){var y=o.assignedSlot||o.parentNode||o.host||null;try{var p=o["__"+i];if(p!==void 0&&!o.disabled)if(Ci(p)){var[M,...b]=p;M.apply(o,[e,...b])}else p.call(o,e)}catch(C){f?g.push(C):f=C}if(e.cancelBubble||y===t||y===null)break;o=y}if(f){for(let C of g)queueMicrotask(()=>{throw C});throw f}}finally{e.__root=t,delete e.currentTarget,zt(c),gt(d)}}}function Yo(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function rn(e,t){var n=he;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function ge(e,t){var n=(t&Na)!==0,i=(t&Qu)!==0,r,o=!e.startsWith("<!>");return()=>{r===void 0&&(r=Yo(o?e:"<!>"+e),n||(r=Ct(r)));var s=i?document.importNode(r,!0):r.cloneNode(!0);if(n){var a=Ct(s),l=s.lastChild;rn(a,l)}else rn(s,s);return s}}function Ge(e,t,n="svg"){var i=!e.startsWith("<!>"),r=(t&Na)!==0,o=`<${n}>${i?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var a=Yo(o),l=Ct(a);if(r)for(s=document.createDocumentFragment();Ct(l);)s.appendChild(Ct(l));else s=Ct(l)}var u=s.cloneNode(!0);if(r){var c=Ct(u),d=u.lastChild;rn(c,d)}else rn(u,u);return u}}function Pc(e=""){{var t=Ai(e+"");return rn(t,t),t}}function Fe(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Ai();return e.append(t,n),rn(t,n),e}function q(e,t){e!==null&&e.before(t)}function Pr(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n==null?"":n+"")}function Ac(e,t){return Tc(e,t)}const wn=new Map;function Tc(e,{target:t,anchor:n,props:i={},events:r,context:o,intro:s=!0}){$u();var a=new Set,l=d=>{for(var f=0;f<d.length;f++){var g=d[f];if(!a.has(g)){a.add(g);var y=kc(g);t.addEventListener(g,jn,{passive:y});var p=wn.get(g);p===void 0?(document.addEventListener(g,jn,{passive:y}),wn.set(g,1)):wn.set(g,p+1)}}};l(Po(Ua)),co.add(l);var u=void 0,c=rc(()=>{var d=n??t.appendChild(Ai());return nn(()=>{if(o){le({});var f=xe;f.c=o}r&&(i.$$events=r),u=e(d,i)||{},o&&ue()}),()=>{var y;for(var f of a){t.removeEventListener(f,jn);var g=wn.get(f);--g===0?(document.removeEventListener(f,jn),wn.delete(f)):wn.set(f,g)}co.delete(l),d!==n&&((y=d.parentNode)==null||y.removeChild(d))}});return zc.set(u,c),u}let zc=new WeakMap;function De(e,t,n=!1){var i=e,r=null,o=null,s=it,a=n?Pi:0,l=!1;const u=(d,f=!0)=>{l=!0,c(f,d)},c=(d,f)=>{s!==(s=d)&&(s?(r?ii(r):f&&(r=nn(()=>f(i))),o&&Pn(o,()=>{o=null})):(o?ii(o):f&&(o=nn(()=>f(i))),r&&Pn(r,()=>{r=null})))};Bn(()=>{l=!1,t(u),l||c(null,null)},a)}function Ic(e,t){return t}function Oc(e,t,n,i){for(var r=[],o=t.length,s=0;s<o;s++)Lo(t[s].e,r,!0);var a=o>0&&r.length===0&&n!==null;if(a){var l=n.parentNode;ec(l),l.append(n),i.clear(),Gt(e,t[0].prev,t[o-1].next)}Ba(r,()=>{for(var u=0;u<o;u++){var c=t[u];a||(i.delete(c.k),Gt(e,c.prev,c.next)),Tt(c.e,!a)}})}function An(e,t,n,i,r,o=null){var s=e,a={flags:t,items:new Map,first:null},l=(t&ka)!==0;if(l){var u=e;s=u.appendChild(Ai())}var c=null,d=!1;Bn(()=>{var f=n(),g=Ci(f)?f:f==null?[]:Po(f),y=g.length;if(!(d&&y===0)){d=y===0;{var p=Me;Dc(g,a,s,r,t,(p.f&Mt)!==0,i)}o!==null&&(y===0?c?ii(c):c=nn(()=>o(s)):c!==null&&Pn(c,()=>{c=null})),n()}})}function Dc(e,t,n,i,r,o,s,a){var O,w,P,z;var l=(r&Gu)!==0,u=(r&(Oo|Do))!==0,c=e.length,d=t.items,f=t.first,g=f,y,p=null,M,b=[],m=[],C,E,x,k;if(l)for(k=0;k<c;k+=1)C=e[k],E=s(C,k),x=d.get(E),x!==void 0&&((O=x.a)==null||O.measure(),(M??(M=new Set)).add(x));for(k=0;k<c;k+=1){if(C=e[k],E=s(C,k),x=d.get(E),x===void 0){var S=g?g.e.nodes_start:n;p=Rc(S,t,p,p===null?t.first:p.next,C,E,k,i,r),d.set(E,p),b=[],m=[],g=p.next;continue}if(u&&Hc(x,C,k,r),x.e.f&Mt&&(ii(x.e),l&&((w=x.a)==null||w.unfix(),(M??(M=new Set)).delete(x))),x!==g){if(y!==void 0&&y.has(x)){if(b.length<m.length){var N=m[0],A;p=N.prev;var I=b[0],H=b[b.length-1];for(A=0;A<b.length;A+=1)Cs(b[A],N,n);for(A=0;A<m.length;A+=1)y.delete(m[A]);Gt(t,I.prev,H.next),Gt(t,p,I),Gt(t,H,N),g=N,p=H,k-=1,b=[],m=[]}else y.delete(x),Cs(x,g,n),Gt(t,x.prev,x.next),Gt(t,x,p===null?t.first:p.next),Gt(t,p,x),p=x;continue}for(b=[],m=[];g!==null&&g.k!==E;)(o||!(g.e.f&Mt))&&(y??(y=new Set)).add(g),m.push(g),g=g.next;if(g===null)continue;x=g}b.push(x),p=x,g=x.next}if(g!==null||y!==void 0){for(var L=y===void 0?[]:Po(y);g!==null;)(o||!(g.e.f&Mt))&&L.push(g),g=g.next;var D=L.length;if(D>0){var _=r&ka&&c===0?n:null;if(l){for(k=0;k<D;k+=1)(P=L[k].a)==null||P.measure();for(k=0;k<D;k+=1)(z=L[k].a)==null||z.fix()}Oc(t,L,_,d)}}l&&Er(()=>{var T;if(M!==void 0)for(x of M)(T=x.a)==null||T.apply()}),he.first=t.first&&t.first.e,he.last=p&&p.e}function Hc(e,t,n,i){i&Oo&&ro(e.v,t),i&Do?ro(e.i,n):e.i=n}function Rc(e,t,n,i,r,o,s,a,l,u){var c=(l&Oo)!==0,d=(l&qu)===0,f=c?d?xr(r):st(r):r,g=l&Do?st(s):s,y={i:g,v:f,k:o,a:null,e:null,prev:n,next:i};try{return y.e=nn(()=>a(e,f,g),Ho),y.e.prev=n&&n.e,y.e.next=i&&i.e,n===null?t.first=y:(n.next=y,n.e.next=y.e),i!==null&&(i.prev=y,i.e.prev=y.e),y}finally{}}function Cs(e,t,n){for(var i=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==i;){var s=br(o);r.before(o),o=s}}function Gt(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Lc(e,t,n,i,r){var o=e,s="",a;Bn(()=>{s!==(s=t()??"")&&(a!==void 0&&(Tt(a),a=void 0),s!==""&&(a=nn(()=>{var l=s+"",u=Yo(l);rn(Ct(u),u.lastChild),o.before(u)})))})}function Ve(e,t,n,i,r){var a;var o=(a=t.$$slots)==null?void 0:a[n],s=!1;o===!0&&(o=t[n==="default"?"children":n],s=!0),o===void 0||o(e,s?()=>i:i)}function Vc(e){const t={};e.children&&(t.default=!0);for(const n in e.$$slots)t[n]=!0;return t}function ja(e,t,n){var i=e,r,o;Bn(()=>{r!==(r=t())&&(o&&(Pn(o),o=null),r&&(o=nn(()=>n(i,r))))},Pi)}function Xc(e,t,n,i,r,o){var s,a,l=null,u=e,c;Bn(()=>{const d=t()||null;var f=Ma;d!==s&&(c&&(d===null?Pn(c,()=>{c=null,a=null}):d===a?ii(c):Tt(c)),d&&d!==a&&(c=nn(()=>{if(l=document.createElementNS(f,d),rn(l,l),i){var g=l.appendChild(Ai());i(l,g)}he.nodes_end=l,u.before(l)})),s=d,s&&(a=s))},Pi)}function ot(e,t,n){ct(()=>{var i=vt(()=>t(e,n==null?void 0:n())||{});if(n&&(i!=null&&i.update)){var r=!1,o={};Yn(()=>{var s=n();X(s),r&&zo(o,s)&&(o=s,i.update(s))}),r=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}function Qa(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Qa(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function Yc(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Qa(e))&&(i&&(i+=" "),i+=t);return i}function It(e){return typeof e=="object"?Yc(e):e??""}function Bc(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function ne(e,t,n,i){var r=e.__attributes??(e.__attributes={});r[t]!==(r[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Du]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Bo(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function $a(e,t,n){var i=Me,r=he;zt(null),gt(null);try{(fo.has(e.nodeName)||customElements.get(e.tagName.toLowerCase())?Bo(e).includes(t):n&&typeof n=="object")?e[t]=n:ne(e,t,n==null?n:String(n))}finally{zt(i),gt(r)}}function oi(e,t,n,i,r=!1,o=!1,s=!1){var a=t||{},l=e.tagName==="OPTION";for(var u in t)u in n||(n[u]=null);n.class&&(n.class=It(n.class)),i!==void 0&&(n.class=n.class?n.class+" "+i:i);var c=Bo(e),d=e.__attributes??(e.__attributes={});for(const m in n){let C=n[m];if(l&&m==="value"&&C==null){e.value=e.__value="",a[m]=C;continue}var f=a[m];if(C!==f){a[m]=C;var g=m[0]+m[1];if(g!=="$$"){if(g==="on"){const E={},x="$$"+m;let k=m.slice(2);var y=xc(k);if(_c(k)&&(k=k.slice(0,-7),E.capture=!0),!y&&f){if(C!=null)continue;e.removeEventListener(k,a[x],E),a[x]=null}if(C!=null)if(y)e[`__${k}`]=C,Mr([k]);else{let S=function(N){a[m].call(this,N)};var b=S;a[x]=Ja(k,e,S,E)}else y&&(e[`__${k}`]=void 0)}else if(m==="style"&&C!=null)e.style.cssText=C+"";else if(m==="autofocus")Cc(e,!!C);else if(m==="__value"||m==="value"&&C!=null)e.value=e[m]=e.__value=C;else if(m==="selected"&&l)Bc(e,C);else{var p=m;r||(p=Ec(p));var M=p==="defaultValue"||p==="defaultChecked";if(C==null&&!o&&!M)if(d[m]=null,p==="value"||p==="checked"){let E=e;if(p==="value"){let x=E.defaultValue;E.removeAttribute(p),E.defaultValue=x}else{let x=E.defaultChecked;E.removeAttribute(p),E.defaultChecked=x}}else e.removeAttribute(m);else M||c.includes(p)&&(o||typeof C!="string")?e[p]=C:typeof C!="function"&&ne(e,p,C)}m==="style"&&"__styles"in e&&(e.__styles={})}}}return a}var fo=new Map;function Bo(e){var t=fo.get(e.nodeName);if(t)return t;fo.set(e.nodeName,t=[]);for(var n,i=e,r=Element.prototype;r!==i;){n=wa(i);for(var o in n)n[o].set&&t.push(o);i=Ao(i)}return t}function Kn(e,t,n){var i=e.__className,r=el(t,n);(i!==r||Ho)&&(r===""?e.removeAttribute("class"):e.setAttribute("class",r),e.__className=r)}function Wo(e,t,n){var i=e.__className,r=el(t,n);(i!==r||Ho)&&(t==null&&!n?e.removeAttribute("class"):e.className=r,e.__className=r)}function el(e,t){return(e??"")+(t?" "+t:"")}function Oe(e,t,n){if(n){if(e.classList.contains(t))return;e.classList.add(t)}else{if(!e.classList.contains(t))return;e.classList.remove(t)}}function Le(e,t,n,i){var r=e.__styles??(e.__styles={});r[t]!==n&&(r[t]=n,n==null?e.style.removeProperty(t):e.style.setProperty(t,n,""))}function tl(e,t,n=t){var i=kr();Mc(e,"input",r=>{var o=r?e.defaultValue:e.value;if(o=Fr(e)?Gr(o):o,n(o),i&&o!==(o=t())){var s=e.selectionStart,a=e.selectionEnd;e.value=o??"",a!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(a,e.value.length))}}),vt(t)==null&&e.value&&n(Fr(e)?Gr(e.value):e.value),Yn(()=>{var r=t();Fr(e)&&r===Gr(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function Fr(e){var t=e.type;return t==="number"||t==="range"}function Gr(e){return e===""?null:+e}var Ut,Mn,mi,pr,nl;const _r=class _r{constructor(t){Ue(this,pr);Ue(this,Ut,new WeakMap);Ue(this,Mn);Ue(this,mi);Kr(this,mi,t)}observe(t,n){var i=ze(this,Ut).get(t)||new Set;return i.add(n),ze(this,Ut).set(t,i),an(this,pr,nl).call(this).observe(t,ze(this,mi)),()=>{var r=ze(this,Ut).get(t);r.delete(n),r.size===0&&(ze(this,Ut).delete(t),ze(this,Mn).unobserve(t))}}};Ut=new WeakMap,Mn=new WeakMap,mi=new WeakMap,pr=new WeakSet,nl=function(){return ze(this,Mn)??Kr(this,Mn,new ResizeObserver(t=>{for(var n of t){_r.entries.set(n.target,n);for(var i of ze(this,Ut).get(n.target)||[])i(n)}}))},Xi(_r,"entries",new WeakMap);let ho=_r;var Wc=new ho({box:"border-box"});function or(e,t,n){var i=Wc.observe(e,()=>n(e[t]));ct(()=>(vt(()=>n(e[t])),i))}function Ns(e,t){return e===t||(e==null?void 0:e[jt])===t}function Tn(e={},t,n,i){return ct(()=>{var r,o;return Yn(()=>{r=o,o=[],vt(()=>{e!==n(...o)&&(t(e,...o),r&&Ns(n(...r),e)&&t(null,...r))})}),()=>{Er(()=>{o&&Ns(n(...o),e)&&t(null,...o)})}}),e}function de(e=!1){const t=xe,n=t.l.u;if(!n)return;let i=()=>X(t.s);if(e){let r=0,o={};const s=tn(()=>{let a=!1;const l=t.s;for(const u in l)l[u]!==o[u]&&(o[u]=l[u],a=!0);return a&&r++,r});i=()=>h(s)}n.b.length&&ic(()=>{Ms(t,i),tr(n.b)}),oo(()=>{const r=vt(()=>n.m.map(Tu));return()=>{for(const o of r)typeof o=="function"&&o()}}),n.a.length&&oo(()=>{Ms(t,i),tr(n.a)})}function Ms(e,t){if(e.l.s)for(const n of e.l.s)h(n);t()}function ye(e,t){var o;var n=(o=e.$$events)==null?void 0:o[t.type],i=Ci(n)?n.slice():n==null?[]:[n];for(var r of i)r.call(this,t)}function Ko(e,t,n){if(e==null)return t(void 0),n&&n(void 0),Lt;const i=vt(()=>e.subscribe(t,n));return i.unsubscribe?()=>i.unsubscribe():i}let Yi=!1;function K(e,t,n){const i=n[t]??(n[t]={store:null,source:xr(void 0),unsubscribe:Lt});if(i.store!==e)if(i.unsubscribe(),i.store=e??null,e==null)i.source.v=void 0,i.unsubscribe=Lt;else{var r=!0;i.unsubscribe=Ko(e,o=>{r?i.source.v=o:Y(i.source,o)}),r=!1}return h(i.source)}function Kc(e,t,n){let i=n[t];return i&&i.store!==e&&(i.unsubscribe(),i.unsubscribe=Lt),e}function si(e,t){return e.set(t),t}function Be(){const e={};return Ra(()=>{for(var t in e)e[t].unsubscribe()}),e}function Fc(e){var t=Yi;try{return Yi=!1,[e(),Yi]}finally{Yi=t}}const Gc={get(e,t){if(!e.exclude.includes(t))return h(e.version),t in e.special?e.special[t]():e.props[t]},set(e,t,n){return t in e.special||(e.special[t]=v({get[t](){return e.props[t]}},t,Ca)),e.special[t](n),Ss(e.version),!0},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},deleteProperty(e,t){return e.exclude.includes(t)||(e.exclude.push(t),Ss(e.version)),!0},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Pe(e,t){return new Proxy({props:e,exclude:t,special:{},version:st(0)},Gc)}const qc={get(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(Zn(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i)return i[t]}},set(e,t,n){let i=e.props.length;for(;i--;){let r=e.props[i];Zn(r)&&(r=r());const o=Jt(r,t);if(o&&o.set)return o.set(n),!0}return!1},getOwnPropertyDescriptor(e,t){let n=e.props.length;for(;n--;){let i=e.props[n];if(Zn(i)&&(i=i()),typeof i=="object"&&i!==null&&t in i){const r=Jt(i,t);return r&&!r.configurable&&(r.configurable=!0),r}}},has(e,t){if(t===jt||t===Ea)return!1;for(let n of e.props)if(Zn(n)&&(n=n()),n!=null&&t in n)return!0;return!1},ownKeys(e){const t=[];for(let n of e.props){Zn(n)&&(n=n());for(const i in n)t.includes(i)||t.push(i)}return t}};function Nt(...e){return new Proxy({props:e},qc)}function Ps(e){for(var t=he,n=he;t!==null&&!(t.f&(wt|Mi));)t=t.parent;try{return gt(t),e()}finally{gt(n)}}function v(e,t,n,i){var S;var r=(n&Zu)!==0,o=!Vn||(n&Uu)!==0,s=(n&Ju)!==0,a=(n&ju)!==0,l=!1,u;s?[u,l]=Fc(()=>e[t]):u=e[t];var c=jt in e||Ea in e,d=((S=Jt(e,t))==null?void 0:S.set)??(c&&s&&t in e?N=>e[t]=N:void 0),f=i,g=!0,y=!1,p=()=>(y=!0,g&&(g=!1,a?f=vt(i):f=i),f);u===void 0&&i!==void 0&&(d&&o&&Xu(),u=p(),d&&d(u));var M;if(o)M=()=>{var N=e[t];return N===void 0?p():(g=!0,y=!1,N)};else{var b=Ps(()=>(r?tn:oe)(()=>e[t]));b.f|=Iu,M=()=>{var N=h(b);return N!==void 0&&(f=void 0),N===void 0?f:N}}if(!(n&Ca))return M;if(d){var m=e.$$legacy;return function(N,A){return arguments.length>0?((!o||!A||m||l)&&d(A?M():N),N):M()}}var C=!1,E=!1,x=xr(u),k=Ps(()=>tn(()=>{var N=M(),A=h(x);return C?(C=!1,E=!0,A):(E=!1,x.v=N)}));return r||(k.equals=Io),function(N,A){if(arguments.length>0){const I=A?h(k):o&&s?je(N):N;return k.equals(I)||(C=!0,Y(x,I),y&&f!==void 0&&(f=I),vt(()=>h(k))),N}return h(k)}}function pn(e){xe===null&&Sr(),Vn&&xe.l!==null?Uc(xe).m.push(e):oo(()=>{const t=vt(e);if(typeof t=="function")return t})}function il(e){xe===null&&Sr(),pn(()=>()=>vt(e))}function Zc(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}function Ar(){const e=xe;return e===null&&Sr(),(t,n,i)=>{var o;const r=(o=e.s.$$events)==null?void 0:o[t];if(r){const s=Ci(r)?r.slice():[r],a=Zc(t,n,i);for(const l of s)l.call(e.x,a);return!a.defaultPrevented}return!0}}function Uc(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Jc="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Jc);Fu();const xn=[];function ft(e,t){return{subscribe:ee(e,t).subscribe}}function ee(e,t=Lt){let n=null;const i=new Set;function r(a){if(zo(e,a)&&(e=a,n)){const l=!xn.length;for(const u of i)u[1](),xn.push(u,e);if(l){for(let u=0;u<xn.length;u+=2)xn[u][0](xn[u+1]);xn.length=0}}}function o(a){r(a(e))}function s(a,l=Lt){const u=[a,l];return i.add(u),i.size===1&&(n=t(r,o)||Lt),a(e),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:s}}function dn(e,t,n){const i=!Array.isArray(e),r=i?[e]:e;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=t.length<2;return ft(n,(s,a)=>{let l=!1;const u=[];let c=0,d=Lt;const f=()=>{if(c)return;d();const y=t(i?u[0]:u,s,a);o?s(y):d=typeof y=="function"?y:Lt},g=r.map((y,p)=>Ko(y,M=>{u[p]=M,c&=~(1<<p),l&&f()},()=>{c|=1<<p}));return l=!0,f(),function(){tr(g),d(),l=!1}})}function R(e){let t;return Ko(e,n=>t=n)(),t}function lt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=lt(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var jc={value:()=>{}};function Tr(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ji(n)}function ji(e){this._=e}function Qc(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ji.prototype=Tr.prototype={constructor:ji,on:function(e,t){var n=this._,i=Qc(e+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(e=i[o]).type)&&(r=$c(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(r=(e=i[o]).type)n[r]=As(n[r],e.name,t);else if(t==null)for(r in n)n[r]=As(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ji(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function $c(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function As(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=jc,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var go="http://www.w3.org/1999/xhtml";const Ts={svg:"http://www.w3.org/2000/svg",xhtml:go,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function zr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ts.hasOwnProperty(t)?{space:Ts[t],local:e}:e}function ed(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===go&&t.documentElement.namespaceURI===go?t.createElement(e):t.createElementNS(n,e)}}function td(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rl(e){var t=zr(e);return(t.local?td:ed)(t)}function nd(){}function Fo(e){return e==null?nd:function(){return this.querySelector(e)}}function id(e){typeof e!="function"&&(e=Fo(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=new Array(s),l,u,c=0;c<s;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new dt(i,this._parents)}function rd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function od(){return[]}function ol(e){return e==null?od:function(){return this.querySelectorAll(e)}}function sd(e){return function(){return rd(e.apply(this,arguments))}}function ad(e){typeof e=="function"?e=sd(e):e=ol(e);for(var t=this._groups,n=t.length,i=[],r=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(i.push(e.call(l,l.__data__,u,s)),r.push(l));return new dt(i,r)}function sl(e){return function(){return this.matches(e)}}function al(e){return function(t){return t.matches(e)}}var ld=Array.prototype.find;function ud(e){return function(){return ld.call(this.children,e)}}function cd(){return this.firstElementChild}function dd(e){return this.select(e==null?cd:ud(typeof e=="function"?e:al(e)))}var fd=Array.prototype.filter;function hd(){return Array.from(this.children)}function gd(e){return function(){return fd.call(this.children,e)}}function vd(e){return this.selectAll(e==null?hd:gd(typeof e=="function"?e:al(e)))}function md(e){typeof e!="function"&&(e=sl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new dt(i,this._parents)}function ll(e){return new Array(e.length)}function yd(){return new dt(this._enter||this._groups.map(ll),this._parents)}function sr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}sr.prototype={constructor:sr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function pd(e){return function(){return e}}function _d(e,t,n,i,r,o){for(var s=0,a,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):n[s]=new sr(e,o[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function wd(e,t,n,i,r,o,s){var a,l,u=new Map,c=t.length,d=o.length,f=new Array(c),g;for(a=0;a<c;++a)(l=t[a])&&(f[a]=g=s.call(l,l.__data__,a,t)+"",u.has(g)?r[a]=l:u.set(g,l));for(a=0;a<d;++a)g=s.call(e,o[a],a,o)+"",(l=u.get(g))?(i[a]=l,l.__data__=o[a],u.delete(g)):n[a]=new sr(e,o[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(r[a]=l)}function xd(e){return e.__data__}function bd(e,t){if(!arguments.length)return Array.from(this,xd);var n=t?wd:_d,i=this._parents,r=this._groups;typeof e!="function"&&(e=pd(e));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=i[u],d=r[u],f=d.length,g=Ed(e.call(c,c&&c.__data__,u,i)),y=g.length,p=a[u]=new Array(y),M=s[u]=new Array(y),b=l[u]=new Array(f);n(c,d,p,M,b,g,t);for(var m=0,C=0,E,x;m<y;++m)if(E=p[m]){for(m>=C&&(C=m+1);!(x=M[C])&&++C<y;);E._next=x||null}}return s=new dt(s,i),s._enter=a,s._exit=l,s}function Ed(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Sd(){return new dt(this._exit||this._groups.map(ll),this._parents)}function kd(e,t,n){var i=this.enter(),r=this,o=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function Cd(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var u=n[l],c=i[l],d=u.length,f=a[l]=new Array(d),g,y=0;y<d;++y)(g=u[y]||c[y])&&(f[y]=g);for(;l<r;++l)a[l]=n[l];return new dt(a,this._parents)}function Nd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Md(e){e||(e=Pd);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,l=r[o]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new dt(r,this._parents).order()}function Pd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ad(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Td(){return Array.from(this)}function zd(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function Id(){let e=0;for(const t of this)++e;return e}function Od(){return!this.node()}function Dd(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&e.call(a,a.__data__,o,r);return this}function Hd(e){return function(){this.removeAttribute(e)}}function Rd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ld(e,t){return function(){this.setAttribute(e,t)}}function Vd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Xd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Yd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Bd(e,t){var n=zr(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?Rd:Hd:typeof t=="function"?n.local?Yd:Xd:n.local?Vd:Ld)(n,t))}function ul(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Wd(e){return function(){this.style.removeProperty(e)}}function Kd(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Fd(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Gd(e,t,n){return arguments.length>1?this.each((t==null?Wd:typeof t=="function"?Fd:Kd)(e,t,n??"")):zn(this.node(),e)}function zn(e,t){return e.style.getPropertyValue(t)||ul(e).getComputedStyle(e,null).getPropertyValue(t)}function qd(e){return function(){delete this[e]}}function Zd(e,t){return function(){this[e]=t}}function Ud(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Jd(e,t){return arguments.length>1?this.each((t==null?qd:typeof t=="function"?Ud:Zd)(e,t)):this.node()[e]}function cl(e){return e.trim().split(/^|\s+/)}function Go(e){return e.classList||new dl(e)}function dl(e){this._node=e,this._names=cl(e.getAttribute("class")||"")}dl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function fl(e,t){for(var n=Go(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function hl(e,t){for(var n=Go(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function jd(e){return function(){fl(this,e)}}function Qd(e){return function(){hl(this,e)}}function $d(e,t){return function(){(t.apply(this,arguments)?fl:hl)(this,e)}}function ef(e,t){var n=cl(e+"");if(arguments.length<2){for(var i=Go(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?$d:t?jd:Qd)(n,t))}function tf(){this.textContent=""}function nf(e){return function(){this.textContent=e}}function rf(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function of(e){return arguments.length?this.each(e==null?tf:(typeof e=="function"?rf:nf)(e)):this.node().textContent}function sf(){this.innerHTML=""}function af(e){return function(){this.innerHTML=e}}function lf(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function uf(e){return arguments.length?this.each(e==null?sf:(typeof e=="function"?lf:af)(e)):this.node().innerHTML}function cf(){this.nextSibling&&this.parentNode.appendChild(this)}function df(){return this.each(cf)}function ff(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hf(){return this.each(ff)}function gf(e){var t=typeof e=="function"?e:rl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function vf(){return null}function mf(e,t){var n=typeof e=="function"?e:rl(e),i=t==null?vf:typeof t=="function"?t:Fo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function yf(){var e=this.parentNode;e&&e.removeChild(this)}function pf(){return this.each(yf)}function _f(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xf(e){return this.select(e?wf:_f)}function bf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ef(e){return function(t){e.call(this,t,this.__data__)}}function Sf(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function kf(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,o;n<r;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++i]=o;++i?t.length=i:delete this.__on}}}function Cf(e,t,n){return function(){var i=this.__on,r,o=Ef(t);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Nf(e,t,n){var i=Sf(e+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<o;++r)if((s=i[r]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?Cf:kf,r=0;r<o;++r)this.each(a(i[r],t,n));return this}function gl(e,t,n){var i=ul(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Mf(e,t){return function(){return gl(this,e,t)}}function Pf(e,t){return function(){return gl(this,e,t.apply(this,arguments))}}function Af(e,t){return this.each((typeof t=="function"?Pf:Mf)(e,t))}function*Tf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var vl=[null];function dt(e,t){this._groups=e,this._parents=t}function zi(){return new dt([[document.documentElement]],vl)}function zf(){return this}dt.prototype=zi.prototype={constructor:dt,select:id,selectAll:ad,selectChild:dd,selectChildren:vd,filter:md,data:bd,enter:yd,exit:Sd,join:kd,merge:Cd,selection:zf,order:Nd,sort:Md,call:Ad,nodes:Td,node:zd,size:Id,empty:Od,each:Dd,attr:Bd,style:Gd,property:Jd,classed:ef,text:of,html:uf,raise:df,lower:hf,append:gf,insert:mf,remove:pf,clone:xf,datum:bf,on:Nf,dispatch:Af,[Symbol.iterator]:Tf};function ht(e){return typeof e=="string"?new dt([[document.querySelector(e)]],[document.documentElement]):new dt([[e]],vl)}function If(e){let t;for(;t=e.sourceEvent;)e=t;return e}function kt(e,t){if(e=If(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Of={passive:!1},ai={capture:!0,passive:!1};function qr(e){e.stopImmediatePropagation()}function Sn(e){e.preventDefault(),e.stopImmediatePropagation()}function ml(e){var t=e.document.documentElement,n=ht(e).on("dragstart.drag",Sn,ai);"onselectstart"in t?n.on("selectstart.drag",Sn,ai):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function yl(e,t){var n=e.document.documentElement,i=ht(e).on("dragstart.drag",null);t&&(i.on("click.drag",Sn,ai),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Bi=e=>()=>e;function vo(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}vo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Df(e){return!e.ctrlKey&&!e.button}function Hf(){return this.parentNode}function Rf(e,t){return t??{x:e.x,y:e.y}}function Lf(){return navigator.maxTouchPoints||"ontouchstart"in this}function pl(){var e=Df,t=Hf,n=Rf,i=Lf,r={},o=Tr("start","drag","end"),s=0,a,l,u,c,d=0;function f(E){E.on("mousedown.drag",g).filter(i).on("touchstart.drag",M).on("touchmove.drag",b,Of).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(E,x){if(!(c||!e.call(this,E,x))){var k=C(this,t.call(this,E,x),E,x,"mouse");k&&(ht(E.view).on("mousemove.drag",y,ai).on("mouseup.drag",p,ai),ml(E.view),qr(E),u=!1,a=E.clientX,l=E.clientY,k("start",E))}}function y(E){if(Sn(E),!u){var x=E.clientX-a,k=E.clientY-l;u=x*x+k*k>d}r.mouse("drag",E)}function p(E){ht(E.view).on("mousemove.drag mouseup.drag",null),yl(E.view,u),Sn(E),r.mouse("end",E)}function M(E,x){if(e.call(this,E,x)){var k=E.changedTouches,S=t.call(this,E,x),N=k.length,A,I;for(A=0;A<N;++A)(I=C(this,S,E,x,k[A].identifier,k[A]))&&(qr(E),I("start",E,k[A]))}}function b(E){var x=E.changedTouches,k=x.length,S,N;for(S=0;S<k;++S)(N=r[x[S].identifier])&&(Sn(E),N("drag",E,x[S]))}function m(E){var x=E.changedTouches,k=x.length,S,N;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),S=0;S<k;++S)(N=r[x[S].identifier])&&(qr(E),N("end",E,x[S]))}function C(E,x,k,S,N,A){var I=o.copy(),H=kt(A||k,x),L,D,_;if((_=n.call(E,new vo("beforestart",{sourceEvent:k,target:f,identifier:N,active:s,x:H[0],y:H[1],dx:0,dy:0,dispatch:I}),S))!=null)return L=_.x-H[0]||0,D=_.y-H[1]||0,function O(w,P,z){var T=H,V;switch(w){case"start":r[N]=O,V=s++;break;case"end":delete r[N],--s;case"drag":H=kt(z||P,x),V=s;break}I.call(w,E,new vo(w,{sourceEvent:P,subject:_,target:f,identifier:N,active:V,x:H[0]+L,y:H[1]+D,dx:H[0]-T[0],dy:H[1]-T[1],dispatch:I}),S)}}return f.filter=function(E){return arguments.length?(e=typeof E=="function"?E:Bi(!!E),f):e},f.container=function(E){return arguments.length?(t=typeof E=="function"?E:Bi(E),f):t},f.subject=function(E){return arguments.length?(n=typeof E=="function"?E:Bi(E),f):n},f.touchable=function(E){return arguments.length?(i=typeof E=="function"?E:Bi(!!E),f):i},f.on=function(){var E=o.on.apply(o,arguments);return E===o?f:E},f.clickDistance=function(E){return arguments.length?(d=(E=+E)*E,f):Math.sqrt(d)},f}function qo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function _l(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Ii(){}var li=.7,ar=1/li,kn="\\s*([+-]?\\d+)\\s*",ui="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",At="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vf=/^#([0-9a-f]{3,8})$/,Xf=new RegExp(`^rgb\\(${kn},${kn},${kn}\\)$`),Yf=new RegExp(`^rgb\\(${At},${At},${At}\\)$`),Bf=new RegExp(`^rgba\\(${kn},${kn},${kn},${ui}\\)$`),Wf=new RegExp(`^rgba\\(${At},${At},${At},${ui}\\)$`),Kf=new RegExp(`^hsl\\(${ui},${At},${At}\\)$`),Ff=new RegExp(`^hsla\\(${ui},${At},${At},${ui}\\)$`),zs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qo(Ii,ci,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Is,formatHex:Is,formatHex8:Gf,formatHsl:qf,formatRgb:Os,toString:Os});function Is(){return this.rgb().formatHex()}function Gf(){return this.rgb().formatHex8()}function qf(){return wl(this).formatHsl()}function Os(){return this.rgb().formatRgb()}function ci(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Vf.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ds(t):n===3?new at(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Xf.exec(e))?new at(t[1],t[2],t[3],1):(t=Yf.exec(e))?new at(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Bf.exec(e))?Wi(t[1],t[2],t[3],t[4]):(t=Wf.exec(e))?Wi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Kf.exec(e))?Ls(t[1],t[2]/100,t[3]/100,1):(t=Ff.exec(e))?Ls(t[1],t[2]/100,t[3]/100,t[4]):zs.hasOwnProperty(e)?Ds(zs[e]):e==="transparent"?new at(NaN,NaN,NaN,0):null}function Ds(e){return new at(e>>16&255,e>>8&255,e&255,1)}function Wi(e,t,n,i){return i<=0&&(e=t=n=NaN),new at(e,t,n,i)}function Zf(e){return e instanceof Ii||(e=ci(e)),e?(e=e.rgb(),new at(e.r,e.g,e.b,e.opacity)):new at}function mo(e,t,n,i){return arguments.length===1?Zf(e):new at(e,t,n,i??1)}function at(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}qo(at,mo,_l(Ii,{brighter(e){return e=e==null?ar:Math.pow(ar,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?li:Math.pow(li,e),new at(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new at(fn(this.r),fn(this.g),fn(this.b),lr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hs,formatHex:Hs,formatHex8:Uf,formatRgb:Rs,toString:Rs}));function Hs(){return`#${un(this.r)}${un(this.g)}${un(this.b)}`}function Uf(){return`#${un(this.r)}${un(this.g)}${un(this.b)}${un((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rs(){const e=lr(this.opacity);return`${e===1?"rgb(":"rgba("}${fn(this.r)}, ${fn(this.g)}, ${fn(this.b)}${e===1?")":`, ${e})`}`}function lr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function fn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function un(e){return e=fn(e),(e<16?"0":"")+e.toString(16)}function Ls(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new pt(e,t,n,i)}function wl(e){if(e instanceof pt)return new pt(e.h,e.s,e.l,e.opacity);if(e instanceof Ii||(e=ci(e)),!e)return new pt;if(e instanceof pt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(t===o?s=(n-i)/a+(n<i)*6:n===o?s=(i-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new pt(s,a,l,e.opacity)}function Jf(e,t,n,i){return arguments.length===1?wl(e):new pt(e,t,n,i??1)}function pt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}qo(pt,Jf,_l(Ii,{brighter(e){return e=e==null?ar:Math.pow(ar,e),new pt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?li:Math.pow(li,e),new pt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new at(Zr(e>=240?e-240:e+120,r,i),Zr(e,r,i),Zr(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new pt(Vs(this.h),Ki(this.s),Ki(this.l),lr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=lr(this.opacity);return`${e===1?"hsl(":"hsla("}${Vs(this.h)}, ${Ki(this.s)*100}%, ${Ki(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Vs(e){return e=(e||0)%360,e<0?e+360:e}function Ki(e){return Math.max(0,Math.min(1,e||0))}function Zr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const xl=e=>()=>e;function jf(e,t){return function(n){return e+n*t}}function Qf(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function $f(e){return(e=+e)==1?bl:function(t,n){return n-t?Qf(t,n,e):xl(isNaN(t)?n:t)}}function bl(e,t){var n=t-e;return n?jf(e,n):xl(isNaN(e)?t:e)}const Xs=function e(t){var n=$f(t);function i(r,o){var s=n((r=mo(r)).r,(o=mo(o)).r),a=n(r.g,o.g),l=n(r.b,o.b),u=bl(r.opacity,o.opacity);return function(c){return r.r=s(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function qt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var yo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ur=new RegExp(yo.source,"g");function eh(e){return function(){return e}}function th(e){return function(t){return e(t)+""}}function nh(e,t){var n=yo.lastIndex=Ur.lastIndex=0,i,r,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(i=yo.exec(e))&&(r=Ur.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:qt(i,r)})),n=Ur.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?th(l[0].x):eh(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}var Ys=180/Math.PI,po={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function El(e,t,n,i,r,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*Ys,skewX:Math.atan(l)*Ys,scaleX:s,scaleY:a}}var Fi;function ih(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?po:El(t.a,t.b,t.c,t.d,t.e,t.f)}function rh(e){return e==null||(Fi||(Fi=document.createElementNS("http://www.w3.org/2000/svg","g")),Fi.setAttribute("transform",e),!(e=Fi.transform.baseVal.consolidate()))?po:(e=e.matrix,El(e.a,e.b,e.c,e.d,e.e,e.f))}function Sl(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function o(u,c,d,f,g,y){if(u!==d||c!==f){var p=g.push("translate(",null,t,null,n);y.push({i:p-4,x:qt(u,d)},{i:p-2,x:qt(c,f)})}else(d||f)&&g.push("translate("+d+t+f+n)}function s(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,i)-2,x:qt(u,c)})):c&&d.push(r(d)+"rotate("+c+i)}function a(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,i)-2,x:qt(u,c)}):c&&d.push(r(d)+"skewX("+c+i)}function l(u,c,d,f,g,y){if(u!==d||c!==f){var p=g.push(r(g)+"scale(",null,",",null,")");y.push({i:p-4,x:qt(u,d)},{i:p-2,x:qt(c,f)})}else(d!==1||f!==1)&&g.push(r(g)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,d,f),s(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(g){for(var y=-1,p=f.length,M;++y<p;)d[(M=f[y]).i]=M.x(g);return d.join("")}}}var oh=Sl(ih,"px, ","px)","deg)"),sh=Sl(rh,", ",")",")"),ah=1e-12;function Bs(e){return((e=Math.exp(e))+1/e)/2}function lh(e){return((e=Math.exp(e))-1/e)/2}function uh(e){return((e=Math.exp(2*e))-1)/(e+1)}const ch=function e(t,n,i){function r(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],d=s[1],f=s[2],g=c-a,y=d-l,p=g*g+y*y,M,b;if(p<ah)b=Math.log(f/u)/t,M=function(S){return[a+S*g,l+S*y,u*Math.exp(t*S*b)]};else{var m=Math.sqrt(p),C=(f*f-u*u+i*p)/(2*u*n*m),E=(f*f-u*u-i*p)/(2*f*n*m),x=Math.log(Math.sqrt(C*C+1)-C),k=Math.log(Math.sqrt(E*E+1)-E);b=(k-x)/t,M=function(S){var N=S*b,A=Bs(x),I=u/(n*m)*(A*uh(t*N+x)-lh(x));return[a+I*g,l+I*y,u*A/Bs(t*N+x)]}}return M.duration=b*1e3*t/Math.SQRT2,M}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},r}(Math.SQRT2,2,4);var In=0,Qn=0,Un=0,kl=1e3,ur,$n,cr=0,gn=0,Ir=0,di=typeof performance=="object"&&performance.now?performance:Date,Cl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zo(){return gn||(Cl(dh),gn=di.now()+Ir)}function dh(){gn=0}function dr(){this._call=this._time=this._next=null}dr.prototype=Nl.prototype={constructor:dr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Zo():+n)+(t==null?0:+t),!this._next&&$n!==this&&($n?$n._next=this:ur=this,$n=this),this._call=e,this._time=n,_o()},stop:function(){this._call&&(this._call=null,this._time=1/0,_o())}};function Nl(e,t,n){var i=new dr;return i.restart(e,t,n),i}function fh(){Zo(),++In;for(var e=ur,t;e;)(t=gn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--In}function Ws(){gn=(cr=di.now())+Ir,In=Qn=0;try{fh()}finally{In=0,gh(),gn=0}}function hh(){var e=di.now(),t=e-cr;t>kl&&(Ir-=t,cr=e)}function gh(){for(var e,t=ur,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ur=n);$n=e,_o(i)}function _o(e){if(!In){Qn&&(Qn=clearTimeout(Qn));var t=e-gn;t>24?(e<1/0&&(Qn=setTimeout(Ws,e-di.now()-Ir)),Un&&(Un=clearInterval(Un))):(Un||(cr=di.now(),Un=setInterval(hh,kl)),In=1,Cl(Ws))}}function Ks(e,t,n){var i=new dr;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var vh=Tr("start","end","cancel","interrupt"),mh=[],Ml=0,Fs=1,wo=2,Qi=3,Gs=4,xo=5,$i=6;function Or(e,t,n,i,r,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;yh(e,n,{name:t,index:i,group:r,on:vh,tween:mh,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ml})}function Uo(e,t){var n=bt(e,t);if(n.state>Ml)throw new Error("too late; already scheduled");return n}function Ot(e,t){var n=bt(e,t);if(n.state>Qi)throw new Error("too late; already running");return n}function bt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function yh(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Nl(o,0,n.time);function o(u){n.state=Fs,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,f,g;if(n.state!==Fs)return l();for(c in i)if(g=i[c],g.name===n.name){if(g.state===Qi)return Ks(s);g.state===Gs?(g.state=$i,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete i[c]):+c<t&&(g.state=$i,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete i[c])}if(Ks(function(){n.state===Qi&&(n.state=Gs,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=wo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===wo){for(n.state=Qi,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(g=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=g);r.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=xo,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===xo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=$i,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function er(e,t){var n=e.__transition,i,r,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((i=n[s]).name!==t){o=!1;continue}r=i.state>wo&&i.state<xo,i.state=$i,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]}o&&delete e.__transition}}function ph(e){return this.each(function(){er(this,e)})}function _h(e,t){var n,i;return function(){var r=Ot(this,e),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function wh(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=Ot(this,e),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=a;break}l===u&&r.push(a)}o.tween=r}}function xh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=bt(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===e)return s.value;return null}return this.each((t==null?_h:wh)(n,e,t))}function Jo(e,t,n){var i=e._id;return e.each(function(){var r=Ot(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return bt(r,i).value[t]}}function Pl(e,t){var n;return(typeof t=="number"?qt:t instanceof ci?Xs:(n=ci(t))?(t=n,Xs):nh)(e,t)}function bh(e){return function(){this.removeAttribute(e)}}function Eh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Sh(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttribute(e);return s===r?null:s===i?o:o=t(i=s,n)}}function kh(e,t,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===i?o:o=t(i=s,n)}}function Ch(e,t,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a)))}}function Nh(e,t,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a)))}}function Mh(e,t){var n=zr(e),i=n==="transform"?sh:Pl;return this.attrTween(e,typeof t=="function"?(n.local?Nh:Ch)(n,i,Jo(this,"attr."+e,t)):t==null?(n.local?Eh:bh)(n):(n.local?kh:Sh)(n,i,t))}function Ph(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ah(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Th(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&Ah(e,o)),n}return r._value=t,r}function zh(e,t){var n,i;function r(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&Ph(e,o)),n}return r._value=t,r}function Ih(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=zr(e);return this.tween(n,(i.local?Th:zh)(i,t))}function Oh(e,t){return function(){Uo(this,e).delay=+t.apply(this,arguments)}}function Dh(e,t){return t=+t,function(){Uo(this,e).delay=t}}function Hh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Oh:Dh)(t,e)):bt(this.node(),t).delay}function Rh(e,t){return function(){Ot(this,e).duration=+t.apply(this,arguments)}}function Lh(e,t){return t=+t,function(){Ot(this,e).duration=t}}function Vh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rh:Lh)(t,e)):bt(this.node(),t).duration}function Xh(e,t){if(typeof t!="function")throw new Error;return function(){Ot(this,e).ease=t}}function Yh(e){var t=this._id;return arguments.length?this.each(Xh(t,e)):bt(this.node(),t).ease}function Bh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ot(this,e).ease=n}}function Wh(e){if(typeof e!="function")throw new Error;return this.each(Bh(this._id,e))}function Kh(e){typeof e!="function"&&(e=sl(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var o=t[r],s=o.length,a=i[r]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Bt(i,this._parents,this._name,this._id)}function Fh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l=t[a],u=n[a],c=l.length,d=s[a]=new Array(c),f,g=0;g<c;++g)(f=l[g]||u[g])&&(d[g]=f);for(;a<i;++a)s[a]=t[a];return new Bt(s,this._parents,this._name,this._id)}function Gh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function qh(e,t,n){var i,r,o=Gh(t)?Uo:Ot;return function(){var s=o(this,e),a=s.on;a!==i&&(r=(i=a).copy()).on(t,n),s.on=r}}function Zh(e,t){var n=this._id;return arguments.length<2?bt(this.node(),n).on.on(e):this.each(qh(n,e,t))}function Uh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Jh(){return this.on("end.remove",Uh(this._id))}function jh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Fo(e));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],l=a.length,u=o[s]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Or(u[f],t,n,f,u,bt(c,n)));return new Bt(o,this._parents,t,n)}function Qh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ol(e));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l=i[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),g,y=bt(c,n),p=0,M=f.length;p<M;++p)(g=f[p])&&Or(g,t,n,p,f,y);o.push(f),s.push(c)}return new Bt(o,s,t,n)}var $h=zi.prototype.constructor;function eg(){return new $h(this._groups,this._parents)}function tg(e,t){var n,i,r;return function(){var o=zn(this,e),s=(this.style.removeProperty(e),zn(this,e));return o===s?null:o===n&&s===i?r:r=t(n=o,i=s)}}function Al(e){return function(){this.style.removeProperty(e)}}function ng(e,t,n){var i,r=n+"",o;return function(){var s=zn(this,e);return s===r?null:s===i?o:o=t(i=s,n)}}function ig(e,t,n){var i,r,o;return function(){var s=zn(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),zn(this,e))),s===l?null:s===i&&l===r?o:(r=l,o=t(i=s,a))}}function rg(e,t){var n,i,r,o="style."+t,s="end."+o,a;return function(){var l=Ot(this,e),u=l.on,c=l.value[o]==null?a||(a=Al(t)):void 0;(u!==n||r!==c)&&(i=(n=u).copy()).on(s,r=c),l.on=i}}function og(e,t,n){var i=(e+="")=="transform"?oh:Pl;return t==null?this.styleTween(e,tg(e,i)).on("end.style."+e,Al(e)):typeof t=="function"?this.styleTween(e,ig(e,i,Jo(this,"style."+e,t))).each(rg(this._id,e)):this.styleTween(e,ng(e,i,t),n).on("end.style."+e,null)}function sg(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function ag(e,t,n){var i,r;function o(){var s=t.apply(this,arguments);return s!==r&&(i=(r=s)&&sg(e,s,n)),i}return o._value=t,o}function lg(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,ag(e,t,n??""))}function ug(e){return function(){this.textContent=e}}function cg(e){return function(){var t=e(this);this.textContent=t??""}}function dg(e){return this.tween("text",typeof e=="function"?cg(Jo(this,"text",e)):ug(e==null?"":e+""))}function fg(e){return function(t){this.textContent=e.call(this,t)}}function hg(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&fg(r)),t}return i._value=e,i}function gg(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,hg(e))}function vg(){for(var e=this._name,t=this._id,n=Tl(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=bt(l,t);Or(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Bt(i,this._parents,e,n)}function mg(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--r===0&&o()}};n.each(function(){var u=Ot(this,i),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),r===0&&o()})}var yg=0;function Bt(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Tl(){return++yg}var Dt=zi.prototype;Bt.prototype={constructor:Bt,select:jh,selectAll:Qh,selectChild:Dt.selectChild,selectChildren:Dt.selectChildren,filter:Kh,merge:Fh,selection:eg,transition:vg,call:Dt.call,nodes:Dt.nodes,node:Dt.node,size:Dt.size,empty:Dt.empty,each:Dt.each,on:Zh,attr:Mh,attrTween:Ih,style:og,styleTween:lg,text:dg,textTween:gg,remove:Jh,tween:xh,delay:Hh,duration:Vh,ease:Yh,easeVarying:Wh,end:mg,[Symbol.iterator]:Dt[Symbol.iterator]};function pg(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var _g={time:null,delay:0,duration:250,ease:pg};function wg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function xg(e){var t,n;e instanceof Bt?(t=e._id,e=e._name):(t=Tl(),(n=_g).time=Zo(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&Or(l,e,t,u,s,n||wg(l,t));return new Bt(i,this._parents,e,t)}zi.prototype.interrupt=ph;zi.prototype.transition=xg;const Gi=e=>()=>e;function bg(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Ht(e,t,n){this.k=e,this.x=t,this.y=n}Ht.prototype={constructor:Ht,scale:function(e){return e===1?this:new Ht(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ht(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Dr=new Ht(1,0,0);zl.prototype=Ht.prototype;function zl(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Dr;return e.__zoom}function Jr(e){e.stopImmediatePropagation()}function Jn(e){e.preventDefault(),e.stopImmediatePropagation()}function Eg(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Sg(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function qs(){return this.__zoom||Dr}function kg(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Cg(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ng(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Mg(){var e=Eg,t=Sg,n=Ng,i=kg,r=Cg,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=ch,u=Tr("start","zoom","end"),c,d,f,g=500,y=150,p=0,M=10;function b(_){_.property("__zoom",qs).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",I).filter(r).on("touchstart.zoom",H).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(_,O,w,P){var z=_.selection?_.selection():_;z.property("__zoom",qs),_!==z?x(_,O,w,P):z.interrupt().each(function(){k(this,arguments).event(P).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},b.scaleBy=function(_,O,w,P){b.scaleTo(_,function(){var z=this.__zoom.k,T=typeof O=="function"?O.apply(this,arguments):O;return z*T},w,P)},b.scaleTo=function(_,O,w,P){b.transform(_,function(){var z=t.apply(this,arguments),T=this.__zoom,V=w==null?E(z):typeof w=="function"?w.apply(this,arguments):w,W=T.invert(V),Z=typeof O=="function"?O.apply(this,arguments):O;return n(C(m(T,Z),V,W),z,s)},w,P)},b.translateBy=function(_,O,w,P){b.transform(_,function(){return n(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof w=="function"?w.apply(this,arguments):w),t.apply(this,arguments),s)},null,P)},b.translateTo=function(_,O,w,P,z){b.transform(_,function(){var T=t.apply(this,arguments),V=this.__zoom,W=P==null?E(T):typeof P=="function"?P.apply(this,arguments):P;return n(Dr.translate(W[0],W[1]).scale(V.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof w=="function"?-w.apply(this,arguments):-w),T,s)},P,z)};function m(_,O){return O=Math.max(o[0],Math.min(o[1],O)),O===_.k?_:new Ht(O,_.x,_.y)}function C(_,O,w){var P=O[0]-w[0]*_.k,z=O[1]-w[1]*_.k;return P===_.x&&z===_.y?_:new Ht(_.k,P,z)}function E(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function x(_,O,w,P){_.on("start.zoom",function(){k(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(P).end()}).tween("zoom",function(){var z=this,T=arguments,V=k(z,T).event(P),W=t.apply(z,T),Z=w==null?E(W):typeof w=="function"?w.apply(z,T):w,$=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),B=z.__zoom,J=typeof O=="function"?O.apply(z,T):O,te=l(B.invert(Z).concat($/B.k),J.invert(Z).concat($/J.k));return function(re){if(re===1)re=J;else{var ae=te(re),G=$/ae[2];re=new Ht(G,Z[0]-ae[0]*G,Z[1]-ae[1]*G)}V.zoom(null,re)}})}function k(_,O,w){return!w&&_.__zooming||new S(_,O)}function S(_,O){this.that=_,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,O),this.taps=0}S.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,O){return this.mouse&&_!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var O=ht(this.that).datum();u.call(_,this.that,new bg(_,{sourceEvent:this.sourceEvent,target:b,type:_,transform:this.that.__zoom,dispatch:u}),O)}};function N(_,...O){if(!e.apply(this,arguments))return;var w=k(this,O).event(_),P=this.__zoom,z=Math.max(o[0],Math.min(o[1],P.k*Math.pow(2,i.apply(this,arguments)))),T=kt(_);if(w.wheel)(w.mouse[0][0]!==T[0]||w.mouse[0][1]!==T[1])&&(w.mouse[1]=P.invert(w.mouse[0]=T)),clearTimeout(w.wheel);else{if(P.k===z)return;w.mouse=[T,P.invert(T)],er(this),w.start()}Jn(_),w.wheel=setTimeout(V,y),w.zoom("mouse",n(C(m(P,z),w.mouse[0],w.mouse[1]),w.extent,s));function V(){w.wheel=null,w.end()}}function A(_,...O){if(f||!e.apply(this,arguments))return;var w=_.currentTarget,P=k(this,O,!0).event(_),z=ht(_.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",$,!0),T=kt(_,w),V=_.clientX,W=_.clientY;ml(_.view),Jr(_),P.mouse=[T,this.__zoom.invert(T)],er(this),P.start();function Z(B){if(Jn(B),!P.moved){var J=B.clientX-V,te=B.clientY-W;P.moved=J*J+te*te>p}P.event(B).zoom("mouse",n(C(P.that.__zoom,P.mouse[0]=kt(B,w),P.mouse[1]),P.extent,s))}function $(B){z.on("mousemove.zoom mouseup.zoom",null),yl(B.view,P.moved),Jn(B),P.event(B).end()}}function I(_,...O){if(e.apply(this,arguments)){var w=this.__zoom,P=kt(_.changedTouches?_.changedTouches[0]:_,this),z=w.invert(P),T=w.k*(_.shiftKey?.5:2),V=n(C(m(w,T),P,z),t.apply(this,O),s);Jn(_),a>0?ht(this).transition().duration(a).call(x,V,P,_):ht(this).call(b.transform,V,P,_)}}function H(_,...O){if(e.apply(this,arguments)){var w=_.touches,P=w.length,z=k(this,O,_.changedTouches.length===P).event(_),T,V,W,Z;for(Jr(_),V=0;V<P;++V)W=w[V],Z=kt(W,this),Z=[Z,this.__zoom.invert(Z),W.identifier],z.touch0?!z.touch1&&z.touch0[2]!==Z[2]&&(z.touch1=Z,z.taps=0):(z.touch0=Z,T=!0,z.taps=1+!!c);c&&(c=clearTimeout(c)),T&&(z.taps<2&&(d=Z[0],c=setTimeout(function(){c=null},g)),er(this),z.start())}}function L(_,...O){if(this.__zooming){var w=k(this,O).event(_),P=_.changedTouches,z=P.length,T,V,W,Z;for(Jn(_),T=0;T<z;++T)V=P[T],W=kt(V,this),w.touch0&&w.touch0[2]===V.identifier?w.touch0[0]=W:w.touch1&&w.touch1[2]===V.identifier&&(w.touch1[0]=W);if(V=w.that.__zoom,w.touch1){var $=w.touch0[0],B=w.touch0[1],J=w.touch1[0],te=w.touch1[1],re=(re=J[0]-$[0])*re+(re=J[1]-$[1])*re,ae=(ae=te[0]-B[0])*ae+(ae=te[1]-B[1])*ae;V=m(V,Math.sqrt(re/ae)),W=[($[0]+J[0])/2,($[1]+J[1])/2],Z=[(B[0]+te[0])/2,(B[1]+te[1])/2]}else if(w.touch0)W=w.touch0[0],Z=w.touch0[1];else return;w.zoom("touch",n(C(V,W,Z),w.extent,s))}}function D(_,...O){if(this.__zooming){var w=k(this,O).event(_),P=_.changedTouches,z=P.length,T,V;for(Jr(_),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),T=0;T<z;++T)V=P[T],w.touch0&&w.touch0[2]===V.identifier?delete w.touch0:w.touch1&&w.touch1[2]===V.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(V=kt(V,this),Math.hypot(d[0]-V[0],d[1]-V[1])<M)){var W=ht(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return b.wheelDelta=function(_){return arguments.length?(i=typeof _=="function"?_:Gi(+_),b):i},b.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Gi(!!_),b):e},b.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:Gi(!!_),b):r},b.extent=function(_){return arguments.length?(t=typeof _=="function"?_:Gi([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),b):t},b.scaleExtent=function(_){return arguments.length?(o[0]=+_[0],o[1]=+_[1],b):[o[0],o[1]]},b.translateExtent=function(_){return arguments.length?(s[0][0]=+_[0][0],s[1][0]=+_[1][0],s[0][1]=+_[0][1],s[1][1]=+_[1][1],b):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},b.constrain=function(_){return arguments.length?(n=_,b):n},b.duration=function(_){return arguments.length?(a=+_,b):a},b.interpolate=function(_){return arguments.length?(l=_,b):l},b.on=function(){var _=u.on.apply(u,arguments);return _===u?b:_},b.clickDistance=function(_){return arguments.length?(p=(_=+_)*_,b):Math.sqrt(p)},b.tapDistance=function(_){return arguments.length?(M=+_,b):M},b}const Oi={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},fr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var vn;(function(e){e.Strict="strict",e.Loose="loose"})(vn||(vn={}));var $t;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})($t||($t={}));var hr;(function(e){e.Partial="partial",e.Full="full"})(hr||(hr={}));const bo={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Cn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Cn||(Cn={}));var gr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(gr||(gr={}));var se;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(se||(se={}));const Zs={[se.Left]:se.Right,[se.Right]:se.Left,[se.Top]:se.Bottom,[se.Bottom]:se.Top};function Il(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Us(e,t,n){if(!n)return;const i=[];e.forEach((r,o)=>{t!=null&&t.has(o)||i.push(r)}),i.length&&n(i)}function Pg(e){return e===null?null:e?"valid":"invalid"}const Ag=e=>"id"in e&&"source"in e&&"target"in e,Tg=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),jo=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Di=(e,t=[0,0])=>{const{width:n,height:i}=_n(e),r=e.origin??t,o=n*r[0],s=i*r[1];return{x:e.position.x-o,y:e.position.y-s}},zg=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,r)=>{const o=typeof r=="string";let s=!t.nodeLookup&&!o?r:void 0;t.nodeLookup&&(s=o?t.nodeLookup.get(r):jo(r)?r:t.nodeLookup.get(r.id));const a=s?vr(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Rr(i,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Lr(n)},Hr=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(i=>{if(t.filter===void 0||t.filter(i)){const r=vr(i);n=Rr(n,r)}}),Lr(n)},Ol=(e,t,[n,i,r]=[0,0,1],o=!1,s=!1)=>{const a={...Hi(t,[n,i,r]),width:t.width/r,height:t.height/r},l=[];for(const u of e.values()){const{measured:c,selectable:d=!0,hidden:f=!1}=u;if(s&&!d||f)continue;const g=c.width??u.width??u.initialWidth??null,y=c.height??u.height??u.initialHeight??null,p=fi(a,Dn(u)),M=(g??0)*(y??0),b=o&&p>0;(!u.internals.handleBounds||b||p>=M||u.dragging)&&l.push(u)}return l},Eo=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function Js(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(r=>r.id)):null;return e.forEach(r=>{r.measured.width&&r.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!r.hidden)&&(!i||i.has(r.id))&&n.set(r.id,r)}),n}async function js({nodes:e,width:t,height:n,panZoom:i,minZoom:r,maxZoom:o},s){if(e.size===0)return Promise.resolve(!1);const a=Hr(e),l=$o(a,t,n,(s==null?void 0:s.minZoom)??r,(s==null?void 0:s.maxZoom)??o,(s==null?void 0:s.padding)??.1);return await i.setViewport(l,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function Ig({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:o}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:l,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},c=s.origin??i;let d=r;if(s.extent==="parent"&&!s.expandParent)if(!a)o==null||o("005",Oi.error005());else{const g=a.measured.width,y=a.measured.height;g&&y&&(d=[[l,u],[l+g,u+y]])}else a&&Hn(s.extent)&&(d=[[s.extent[0][0]+l,s.extent[0][1]+u],[s.extent[1][0]+l,s.extent[1][1]+u]]);const f=Hn(d)?mn(t,d,s.measured):t;return{position:{x:f.x-l+s.measured.width*c[0],y:f.y-u+s.measured.height*c[1]},positionAbsolute:f}}async function Dl({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:r}){const o=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const g=o.has(f.id),y=!g&&f.parentId&&s.find(p=>p.id===f.parentId);(g||y)&&s.push(f)}const a=new Set(t.map(f=>f.id)),l=i.filter(f=>f.deletable!==!1),c=Eo(s,l);for(const f of l)a.has(f.id)&&!c.find(y=>y.id===f.id)&&c.push(f);if(!r)return{edges:c,nodes:s};const d=await r({nodes:s,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:s}:{edges:[],nodes:[]}:d}const On=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),mn=(e={x:0,y:0},t,n)=>({x:On(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:On(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Hl(e,t,n){const{width:i,height:r}=_n(n),{x:o,y:s}=n.internals.positionAbsolute;return mn(e,[[o,s],[o+i,s+r]],t)}const Qs=(e,t,n)=>e<t?On(Math.abs(e-t),1,t)/t:e>n?-On(Math.abs(e-n),1,t)/t:0,Rl=(e,t,n=15,i=40)=>{const r=Qs(e.x,i,t.width-i)*n,o=Qs(e.y,i,t.height-i)*n;return[r,o]},Rr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),So=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),Lr=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),Dn=(e,t=[0,0])=>{var r,o;const{x:n,y:i}=jo(e)?e.internals.positionAbsolute:Di(e,t);return{x:n,y:i,width:((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},vr=(e,t=[0,0])=>{var r,o;const{x:n,y:i}=jo(e)?e.internals.positionAbsolute:Di(e,t);return{x:n,y:i,x2:n+(((r=e.measured)==null?void 0:r.width)??e.width??e.initialWidth??0),y2:i+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},Og=(e,t)=>Lr(Rr(So(e),So(t))),fi=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},$s=e=>Rt(e.width)&&Rt(e.height)&&Rt(e.x)&&Rt(e.y),Rt=e=>!isNaN(e)&&isFinite(e),Dg=(e,t)=>{},Qo=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Hi=({x:e,y:t},[n,i,r],o=!1,s=[1,1])=>{const a={x:(e-n)/r,y:(t-i)/r};return o?Qo(a,s):a},Ll=({x:e,y:t},[n,i,r])=>({x:e*r+n,y:t*r+i}),$o=(e,t,n,i,r,o)=>{const s=t/(e.width*(1+o)),a=n/(e.height*(1+o)),l=Math.min(s,a),u=On(l,i,r),c=e.x+e.width/2,d=e.y+e.height/2,f=t/2-c*u,g=n/2-d*u;return{x:f,y:g,zoom:u}},mr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Hn(e){return e!==void 0&&e!=="parent"}function _n(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Hg(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Rg(e,t={width:0,height:0},n,i,r){const o={...e},s=i.get(n);if(s){const a=s.origin||r;o.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function ni(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:r}){const{x:o,y:s}=Vt(e),a=Hi({x:o-((r==null?void 0:r.left)??0),y:s-((r==null?void 0:r.top)??0)},i),{x:l,y:u}=n?Qo(a,t):a;return{xSnapped:l,ySnapped:u,...a}}const es=e=>({width:e.offsetWidth,height:e.offsetHeight}),Lg=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Vg=["INPUT","SELECT","TEXTAREA"];function Xg(e){var i,r,o;const t=((r=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:r[0])||e.target;return Vg.includes(t==null?void 0:t.nodeName)||((o=t==null?void 0:t.hasAttribute)==null?void 0:o.call(t,"contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const Vl=e=>"clientX"in e,Vt=(e,t)=>{var o,s;const n=Vl(e),i=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,r=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},ea=(e,t,n,i,r)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/i,y:(a.top-n.top)/i,...es(s)}})};function Yg({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:r,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+r*.375+s*.375+n*.125,u=t*.125+o*.375+a*.375+i*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function qi(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ta({pos:e,x1:t,y1:n,x2:i,y2:r,c:o}){switch(e){case se.Left:return[t-qi(t-i,o),n];case se.Right:return[t+qi(i-t,o),n];case se.Top:return[t,n-qi(n-r,o)];case se.Bottom:return[t,n+qi(r-n,o)]}}function Xl({sourceX:e,sourceY:t,sourcePosition:n=se.Bottom,targetX:i,targetY:r,targetPosition:o=se.Top,curvature:s=.25}){const[a,l]=ta({pos:n,x1:e,y1:t,x2:i,y2:r,c:s}),[u,c]=ta({pos:o,x1:i,y1:r,x2:e,y2:t,c:s}),[d,f,g,y]=Yg({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${a},${l} ${u},${c} ${i},${r}`,d,f,g,y]}function Yl({sourceX:e,sourceY:t,targetX:n,targetY:i}){const r=Math.abs(n-e)/2,o=n<e?n+r:n-r,s=Math.abs(i-t)/2,a=i<t?i+s:i-s;return[o,a,r,s]}function Bg({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const o=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return i+(o?s:0)}function Wg({sourceNode:e,targetNode:t,width:n,height:i,transform:r}){const o=Rr(vr(e),vr(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return fi(s,Lr(o))>0}const Kg=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,Fg=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Gg=(e,t)=>{if(!e.source||!e.target)return t;let n;return Ag(e)?n={...e}:n={...e,id:Kg(e)},Fg(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function ko({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[r,o,s,a]=Yl({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,r,o,s,a]}const na={[se.Left]:{x:-1,y:0},[se.Right]:{x:1,y:0},[se.Top]:{x:0,y:-1},[se.Bottom]:{x:0,y:1}},qg=({source:e,sourcePosition:t=se.Bottom,target:n})=>t===se.Left||t===se.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ia=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Zg({source:e,sourcePosition:t=se.Bottom,target:n,targetPosition:i=se.Top,center:r,offset:o}){const s=na[t],a=na[i],l={x:e.x+s.x*o,y:e.y+s.y*o},u={x:n.x+a.x*o,y:n.y+a.y*o},c=qg({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let g=[],y,p;const M={x:0,y:0},b={x:0,y:0},[m,C,E,x]=Yl({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){y=r.x??m,p=r.y??C;const S=[{x:y,y:l.y},{x:y,y:u.y}],N=[{x:l.x,y:p},{x:u.x,y:p}];s[d]===f?g=d==="x"?S:N:g=d==="x"?N:S}else{const S=[{x:l.x,y:u.y}],N=[{x:u.x,y:l.y}];if(d==="x"?g=s.x===f?N:S:g=s.y===f?S:N,t===i){const D=Math.abs(e[d]-n[d]);if(D<=o){const _=Math.min(o-1,o-D);s[d]===f?M[d]=(l[d]>e[d]?-1:1)*_:b[d]=(u[d]>n[d]?-1:1)*_}}if(t!==i){const D=d==="x"?"y":"x",_=s[d]===a[D],O=l[D]>u[D],w=l[D]<u[D];(s[d]===1&&(!_&&O||_&&w)||s[d]!==1&&(!_&&w||_&&O))&&(g=d==="x"?S:N)}const A={x:l.x+M.x,y:l.y+M.y},I={x:u.x+b.x,y:u.y+b.y},H=Math.max(Math.abs(A.x-g[0].x),Math.abs(I.x-g[0].x)),L=Math.max(Math.abs(A.y-g[0].y),Math.abs(I.y-g[0].y));H>=L?(y=(A.x+I.x)/2,p=g[0].y):(y=g[0].x,p=(A.y+I.y)/2)}return[[e,{x:l.x+M.x,y:l.y+M.y},...g,{x:u.x+b.x,y:u.y+b.y},n],y,p,E,x]}function Ug(e,t,n,i){const r=Math.min(ia(e,t)/2,ia(t,n)/2,i),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${o+r*u},${s}Q ${o},${s} ${o},${s+r*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${s+r*l}Q ${o},${s} ${o+r*a},${s}`}function yr({sourceX:e,sourceY:t,sourcePosition:n=se.Bottom,targetX:i,targetY:r,targetPosition:o=se.Top,borderRadius:s=5,centerX:a,centerY:l,offset:u=20}){const[c,d,f,g,y]=Zg({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:r},targetPosition:o,center:{x:a,y:l},offset:u});return[c.reduce((M,b,m)=>{let C="";return m>0&&m<c.length-1?C=Ug(c[m-1],b,c[m+1],s):C=`${m===0?"M":"L"}${b.x} ${b.y}`,M+=C,M},""),d,f,g,y]}function ra(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Jg(e){var d;const{sourceNode:t,targetNode:n}=e;if(!ra(t)||!ra(n))return null;const i=t.internals.handleBounds||oa(t.handles),r=n.internals.handleBounds||oa(n.handles),o=sa((i==null?void 0:i.source)??[],e.sourceHandle),s=sa(e.connectionMode===vn.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),e.targetHandle);if(!o||!s)return(d=e.onError)==null||d.call(e,"008",Oi.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||se.Bottom,l=(s==null?void 0:s.position)||se.Top,u=hi(t,o,a),c=hi(n,s,l);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:l}}function oa(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function hi(e,t,n=se.Left,i=!1){const r=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??_n(e);if(i)return{x:r+s/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case se.Top:return{x:r+s/2,y:o};case se.Right:return{x:r+s,y:o+a/2};case se.Bottom:return{x:r+s/2,y:o+a};case se.Left:return{x:r,y:o+a/2}}}function sa(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Co(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function jg(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const o=new Set;return e.reduce((s,a)=>([a.markerStart||i,a.markerEnd||r].forEach(l=>{if(l&&typeof l=="object"){const u=Co(l,t);o.has(u)||(s.push({id:u,color:l.color||n,...l}),o.add(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const ts={nodeOrigin:[0,0],nodeExtent:fr,elevateNodesOnSelect:!0,defaults:{}},Qg={...ts,checkEquality:!0};function ns(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function $g(e,t,n){const i=ns(ts,n);for(const r of e.values())if(r.parentId)is(r,e,t,i);else{const o=Di(r,i.nodeOrigin),s=Hn(r.extent)?r.extent:i.nodeExtent,a=mn(o,s,_n(r));r.internals.positionAbsolute=a}}function Bl(e,t,n,i){var a,l;const r=ns(Qg,i),o=new Map(t),s=r!=null&&r.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let c=o.get(u.id);if(r.checkEquality&&u===(c==null?void 0:c.internals.userNode))t.set(u.id,c);else{const d=Di(u,r.nodeOrigin),f=Hn(u.extent)?u.extent:r.nodeExtent,g=mn(d,f,_n(u));c={...r.defaults,...u,measured:{width:(a=u.measured)==null?void 0:a.width,height:(l=u.measured)==null?void 0:l.height},internals:{positionAbsolute:g,handleBounds:u.measured?c==null?void 0:c.internals.handleBounds:void 0,z:Wl(u,s),userNode:u}},t.set(u.id,c)}u.parentId&&is(c,t,n,i)}}function e0(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function is(e,t,n,i){const{elevateNodesOnSelect:r,nodeOrigin:o,nodeExtent:s}=ns(ts,i),a=e.parentId,l=t.get(a);if(!l){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}e0(e,n);const u=r?1e3:0,{x:c,y:d,z:f}=t0(e,l,o,s,u),{positionAbsolute:g}=e.internals,y=c!==g.x||d!==g.y;(y||f!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:y?{x:c,y:d}:g,z:f})}function Wl(e,t){return(Rt(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function t0(e,t,n,i,r){const{x:o,y:s}=t.internals.positionAbsolute,a=_n(e),l=Di(e,n),u=Hn(e.extent)?mn(l,e.extent,a):l;let c=mn({x:o+u.x,y:s+u.y},i,a);e.extent==="parent"&&(c=Hl(c,a,t));const d=Wl(e,r),f=t.internals.z??0;return{x:c.x,y:c.y,z:f>d?f:d}}function n0(e,t,n,i=[0,0]){var s;const r=[],o=new Map;for(const a of e){const l=t.get(a.parentId);if(!l)continue;const u=((s=o.get(a.parentId))==null?void 0:s.expandedRect)??Dn(l),c=Og(u,a.rect);o.set(a.parentId,{expandedRect:c,parent:l})}return o.size>0&&o.forEach(({expandedRect:a,parent:l},u)=>{var C;const c=l.internals.positionAbsolute,d=_n(l),f=l.origin??i,g=a.x<c.x?Math.round(Math.abs(c.x-a.x)):0,y=a.y<c.y?Math.round(Math.abs(c.y-a.y)):0,p=Math.max(d.width,Math.round(a.width)),M=Math.max(d.height,Math.round(a.height)),b=(p-d.width)*f[0],m=(M-d.height)*f[1];(g>0||y>0||b||m)&&(r.push({id:u,type:"position",position:{x:l.position.x-g+b,y:l.position.y-y+m}}),(C=n.get(u))==null||C.forEach(E=>{e.some(x=>x.id===E.id)||r.push({id:E.id,type:"position",position:{x:E.position.x+g,y:E.position.y+y}})})),(d.width<a.width||d.height<a.height||g||y)&&r.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:p+(g?f[0]*g-b:0),height:M+(y?f[1]*y-m:0)}})}),r}function i0(e,t,n,i,r,o){const s=i==null?void 0:i.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const l=[],u=window.getComputedStyle(s),{m22:c}=new window.DOMMatrixReadOnly(u.transform),d=[];for(const f of e.values()){const g=t.get(f.id);if(g)if(g.hidden)g.internals={...g.internals,handleBounds:void 0},a=!0;else{const y=es(f.nodeElement),p=g.measured.width!==y.width||g.measured.height!==y.height;if(!!(y.width&&y.height&&(p||!g.internals.handleBounds||f.force))){const b=f.nodeElement.getBoundingClientRect(),m=Hn(g.extent)?g.extent:o;let{positionAbsolute:C}=g.internals;g.parentId&&g.extent==="parent"?C=Hl(C,y,t.get(g.parentId)):m&&(C=mn(C,m,y)),g.measured=y,g.internals={...g.internals,positionAbsolute:C,handleBounds:{source:ea("source",f.nodeElement,b,c,g.id),target:ea("target",f.nodeElement,b,c,g.id)}},g.parentId&&is(g,t,n,{nodeOrigin:r}),a=!0,p&&(l.push({id:g.id,type:"dimensions",dimensions:y}),g.expandParent&&g.parentId&&d.push({id:g.id,parentId:g.parentId,rect:Dn(g,r)}))}}}if(d.length>0){const f=n0(d,t,n,r);l.push(...f)}return{changes:l,updatedInternals:a}}async function r0({delta:e,panZoom:t,transform:n,translateExtent:i,width:r,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[r,o]],i),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function Kl(e,t,n){e.clear(),t.clear();for(const i of n){const{source:r,target:o,sourceHandle:s=null,targetHandle:a=null}=i,l=`${r}-source-${s}`,u=`${o}-target-${a}`,c=e.get(l)||new Map,d=e.get(u)||new Map,f={edgeId:i.id,source:r,target:o,sourceHandle:s,targetHandle:a};t.set(i.id,i),e.set(l,c.set(`${o}-${a}`,f)),e.set(u,d.set(`${r}-${s}`,f))}}function Fl(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Fl(n,t):!1}function aa(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function o0(e,t,n,i){const r=new Map;for(const[o,s]of e)if((s.selected||s.id===i)&&(!s.parentId||!Fl(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(o);a&&r.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return r}function jr({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var s,a,l;const r=[];for(const[u,c]of t){const d=(s=n.get(u))==null?void 0:s.internals.userNode;d&&r.push({...d,position:c.position,dragging:i})}if(!e)return[r[0],r];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((l=t.get(e))==null?void 0:l.position)||o.position,dragging:i}:r[0],r]}function s0({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:r}){let o={x:null,y:null},s=0,a=new Map,l=!1,u={x:0,y:0},c=null,d=!1,f=null,g=!1;function y({noDragClassName:M,handleSelector:b,domNode:m,isSelectable:C,nodeId:E,nodeClickDistance:x=0}){f=ht(m);function k({x:I,y:H},L){const{nodeLookup:D,nodeExtent:_,snapGrid:O,snapToGrid:w,nodeOrigin:P,onNodeDrag:z,onSelectionDrag:T,onError:V,updateNodePositions:W}=t();o={x:I,y:H};let Z=!1,$={x:0,y:0,x2:0,y2:0};if(a.size>1&&_){const B=Hr(a);$=So(B)}for(const[B,J]of a){if(!D.has(B))continue;let te={x:I-J.distance.x,y:H-J.distance.y};w&&(te=Qo(te,O));let re=[[_[0][0],_[0][1]],[_[1][0],_[1][1]]];if(a.size>1&&_&&!J.extent){const{positionAbsolute:U}=J.internals,j=U.x-$.x+_[0][0],ce=U.x+J.measured.width-$.x2+_[1][0],_e=U.y-$.y+_[0][1],ve=U.y+J.measured.height-$.y2+_[1][1];re=[[j,_e],[ce,ve]]}const{position:ae,positionAbsolute:G}=Ig({nodeId:B,nextPosition:te,nodeLookup:D,nodeExtent:re,nodeOrigin:P,onError:V});Z=Z||J.position.x!==ae.x||J.position.y!==ae.y,J.position=ae,J.internals.positionAbsolute=G}if(Z&&(W(a,!0),L&&(i||z||!E&&T))){const[B,J]=jr({nodeId:E,dragItems:a,nodeLookup:D});i==null||i(L,a,B,J),z==null||z(L,B,J),E||T==null||T(L,J)}}async function S(){if(!c)return;const{transform:I,panBy:H,autoPanSpeed:L}=t(),[D,_]=Rl(u,c,L);(D!==0||_!==0)&&(o.x=(o.x??0)-D/I[2],o.y=(o.y??0)-_/I[2],await H({x:D,y:_})&&k(o,null)),s=requestAnimationFrame(S)}function N(I){var Z;const{nodeLookup:H,multiSelectionActive:L,nodesDraggable:D,transform:_,snapGrid:O,snapToGrid:w,selectNodesOnDrag:P,onNodeDragStart:z,onSelectionDragStart:T,unselectNodesAndEdges:V}=t();d=!0,(!P||!C)&&!L&&E&&((Z=H.get(E))!=null&&Z.selected||V()),C&&P&&E&&(e==null||e(E));const W=ni(I.sourceEvent,{transform:_,snapGrid:O,snapToGrid:w,containerBounds:c});if(o=W,a=o0(H,D,W,E),a.size>0&&(n||z||!E&&T)){const[$,B]=jr({nodeId:E,dragItems:a,nodeLookup:H});n==null||n(I.sourceEvent,a,$,B),z==null||z(I.sourceEvent,$,B),E||T==null||T(I.sourceEvent,B)}}const A=pl().clickDistance(x).on("start",I=>{const{domNode:H,nodeDragThreshold:L,transform:D,snapGrid:_,snapToGrid:O}=t();c=(H==null?void 0:H.getBoundingClientRect())||null,g=!1,L===0&&N(I),o=ni(I.sourceEvent,{transform:D,snapGrid:_,snapToGrid:O,containerBounds:c}),u=Vt(I.sourceEvent,c)}).on("drag",I=>{const{autoPanOnNodeDrag:H,transform:L,snapGrid:D,snapToGrid:_,nodeDragThreshold:O,nodeLookup:w}=t(),P=ni(I.sourceEvent,{transform:L,snapGrid:D,snapToGrid:_,containerBounds:c});if((I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1||E&&!w.has(E))&&(g=!0),!g){if(!l&&H&&d&&(l=!0,S()),!d){const z=P.xSnapped-(o.x??0),T=P.ySnapped-(o.y??0);Math.sqrt(z*z+T*T)>O&&N(I)}(o.x!==P.xSnapped||o.y!==P.ySnapped)&&a&&d&&(u=Vt(I.sourceEvent,c),k(P,I.sourceEvent))}}).on("end",I=>{if(!(!d||g)&&(l=!1,d=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:H,updateNodePositions:L,onNodeDragStop:D,onSelectionDragStop:_}=t();if(L(a,!1),r||D||!E&&_){const[O,w]=jr({nodeId:E,dragItems:a,nodeLookup:H,dragging:!1});r==null||r(I.sourceEvent,a,O,w),D==null||D(I.sourceEvent,O,w),E||_==null||_(I.sourceEvent,w)}}}).filter(I=>{const H=I.target;return!I.button&&(!M||!aa(H,`.${M}`,m))&&(!b||aa(H,b,m))});f.call(A)}function p(){f==null||f.on(".drag",null)}return{update:y,destroy:p}}function a0(e,t,n){const i=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())fi(r,Dn(o))>0&&i.push(o);return i}const l0=250;function u0(e,t,n,i){var a,l;let r=[],o=1/0;const s=a0(e,n,t+l0);for(const u of s){const c=[...((a=u.internals.handleBounds)==null?void 0:a.source)??[],...((l=u.internals.handleBounds)==null?void 0:l.target)??[]];for(const d of c){if(i.nodeId===d.nodeId&&i.type===d.type&&i.id===d.id)continue;const{x:f,y:g}=hi(u,d,d.position,!0),y=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(g-e.y,2));y>t||(y<o?(r=[{...d,x:f,y:g}],o=y):y===o&&r.push({...d,x:f,y:g}))}}if(!r.length)return null;if(r.length>1){const u=i.type==="source"?"target":"source";return r.find(c=>c.type===u)??r[0]}return r[0]}function Gl(e,t,n,i,r,o=!1){var u,c,d;const s=i.get(e);if(!s)return null;const a=r==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...((c=s.internals.handleBounds)==null?void 0:c.source)??[],...((d=s.internals.handleBounds)==null?void 0:d.target)??[]],l=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return l&&o?{...l,...hi(s,l,l.position,!0)}:l}function ql(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function c0(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Zl=()=>!0;function d0(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:o,isTarget:s,domNode:a,nodeLookup:l,lib:u,autoPanOnConnect:c,flowId:d,panBy:f,cancelConnection:g,onConnectStart:y,onConnect:p,onConnectEnd:M,isValidConnection:b=Zl,onReconnectEnd:m,updateConnection:C,getTransform:E,getFromHandle:x,autoPanSpeed:k}){const S=Lg(e.target);let N=0,A;const{x:I,y:H}=Vt(e),L=S==null?void 0:S.elementFromPoint(I,H),D=ql(o,L),_=a==null?void 0:a.getBoundingClientRect();if(!_||!D)return;const O=Gl(r,D,i,l,t);if(!O)return;let w=Vt(e,_),P=!1,z=null,T=!1,V=null;function W(){if(!c||!_)return;const[G,U]=Rl(w,_,k);f({x:G,y:U}),N=requestAnimationFrame(W)}const Z={...O,nodeId:r,type:D,position:O.position},$=l.get(r),J={inProgress:!0,isValid:null,from:hi($,Z,se.Left,!0),fromHandle:Z,fromPosition:Z.position,fromNode:$,to:w,toHandle:null,toPosition:Zs[Z.position],toNode:null};C(J);let te=J;y==null||y(e,{nodeId:r,handleId:i,handleType:D});function re(G){if(!x()||!Z){ae(G);return}const U=E();w=Vt(G,_),A=u0(Hi(w,U,!1,[1,1]),n,l,Z),P||(W(),P=!0);const j=Ul(G,{handle:A,connectionMode:t,fromNodeId:r,fromHandleId:i,fromType:s?"target":"source",isValidConnection:b,doc:S,lib:u,flowId:d,nodeLookup:l});V=j.handleDomNode,z=j.connection,T=c0(!!A,j.isValid);const ce={...te,isValid:T,to:A&&T?Ll({x:A.x,y:A.y},U):w,toHandle:j.toHandle,toPosition:T&&j.toHandle?j.toHandle.position:Zs[Z.position],toNode:j.toHandle?l.get(j.toHandle.nodeId):null};T&&A&&te.toHandle&&ce.toHandle&&te.toHandle.type===ce.toHandle.type&&te.toHandle.nodeId===ce.toHandle.nodeId&&te.toHandle.id===ce.toHandle.id&&te.to.x===ce.to.x&&te.to.y===ce.to.y||(C(ce),te=ce)}function ae(G){(A||V)&&z&&T&&(p==null||p(z));const{inProgress:U,...j}=te,ce={...j,toPosition:te.toHandle?te.toPosition:null};M==null||M(G,ce),o&&(m==null||m(G,ce)),g(),cancelAnimationFrame(N),P=!1,T=!1,z=null,V=null,S.removeEventListener("mousemove",re),S.removeEventListener("mouseup",ae),S.removeEventListener("touchmove",re),S.removeEventListener("touchend",ae)}S.addEventListener("mousemove",re),S.addEventListener("mouseup",ae),S.addEventListener("touchmove",re),S.addEventListener("touchend",ae)}function Ul(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:o,doc:s,lib:a,flowId:l,isValidConnection:u=Zl,nodeLookup:c}){const d=o==="target",f=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:g,y}=Vt(e),p=s.elementFromPoint(g,y),M=p!=null&&p.classList.contains(`${a}-flow__handle`)?p:f,b={handleDomNode:M,isValid:!1,connection:null,toHandle:null};if(M){const m=ql(void 0,M),C=M.getAttribute("data-nodeid"),E=M.getAttribute("data-handleid"),x=M.classList.contains("connectable"),k=M.classList.contains("connectableend");if(!C||!m)return b;const S={source:d?C:i,sourceHandle:d?E:r,target:d?i:C,targetHandle:d?r:E};b.connection=S;const A=x&&k&&(n===vn.Strict?d&&m==="source"||!d&&m==="target":C!==i||E!==r);b.isValid=A&&u(S),b.toHandle=Gl(C,m,E,c,n,!1)}return b}const f0={onPointerDown:d0,isValid:Ul},h0=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Vr=e=>({x:e.x,y:e.y,zoom:e.k}),Qr=({x:e,y:t,zoom:n})=>Dr.translate(e,t).scale(n),bn=(e,t)=>e.target.closest(`.${t}`),Jl=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),$r=(e,t=0,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).on("end",n):e},jl=e=>{const t=e.ctrlKey&&mr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function g0({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:l,onPanZoomEnd:u}){return c=>{if(bn(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(c.ctrlKey&&s){const M=kt(c),b=jl(c),m=d*Math.pow(2,b);i.scaleTo(n,m,M,c);return}const f=c.deltaMode===1?20:1;let g=r===$t.Vertical?0:c.deltaX*f,y=r===$t.Horizontal?0:c.deltaY*f;!mr()&&c.shiftKey&&r!==$t.Vertical&&(g=c.deltaY*f,y=0),i.translateBy(n,-(g/d)*o,-(y/d)*o,{internal:!0});const p=Vr(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(c,p)),e.isPanScrolling&&(l==null||l(c,p),e.panScrollTimeout=setTimeout(()=>{u==null||u(c,p),e.isPanScrolling=!1},150))}}function v0({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,r){if(!t&&i.type==="wheel"&&!i.ctrlKey||bn(i,e))return null;i.preventDefault(),n.call(this,i,r)}}function m0({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var o,s,a;if((o=i.sourceEvent)!=null&&o.internal)return;const r=Vr(i.transform);e.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=r,((a=i.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,r))}}function y0({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return o=>{var s,a;e.usedRightMouseButton=!!(n&&Jl(t,e.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||i([o.transform.x,o.transform.y,o.transform.k]),r&&!((a=o.sourceEvent)!=null&&a.internal)&&(r==null||r(o.sourceEvent,Vr(o.transform)))}}function p0({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:o}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&Jl(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),e.usedRightMouseButton=!1,i(!1),r&&h0(e.prevViewport,s.transform))){const l=Vr(s.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{r==null||r(s.sourceEvent,l)},n?150:0)}}}function _0({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:a,noPanClassName:l,lib:u}){return c=>{var y;const d=e||t,f=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(bn(c,`${u}-flow__node`)||bn(c,`${u}-flow__edge`)))return!0;if(!i&&!d&&!r&&!o&&!n||s||bn(c,a)&&c.type==="wheel"||bn(c,l)&&(c.type!=="wheel"||r&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&((y=c.touches)==null?void 0:y.length)>1)return c.preventDefault(),!1;if(!d&&!r&&!f&&c.type==="wheel"||!i&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(i)&&!i.includes(c.button)&&c.type==="mousedown")return!1;const g=Array.isArray(i)&&i.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&g}}function w0({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:i,translateExtent:r,viewport:o,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:l,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=Mg().clickDistance(!Rt(i)||i<0?0:i).scaleExtent([t,n]).translateExtent(r),g=ht(e).call(f);C({x:o.x,y:o.y,zoom:On(o.zoom,t,n)},[[0,0],[d.width,d.height]],r);const y=g.on("wheel.zoom"),p=g.on("dblclick.zoom");f.wheelDelta(jl);function M(L,D){return g?new Promise(_=>{f==null||f.transform($r(g,D==null?void 0:D.duration,()=>_(!0)),L)}):Promise.resolve(!1)}function b({noWheelClassName:L,noPanClassName:D,onPaneContextMenu:_,userSelectionActive:O,panOnScroll:w,panOnDrag:P,panOnScrollMode:z,panOnScrollSpeed:T,preventScrolling:V,zoomOnPinch:W,zoomOnScroll:Z,zoomOnDoubleClick:$,zoomActivationKeyPressed:B,lib:J,onTransformChange:te}){O&&!c.isZoomingOrPanning&&m();const ae=w&&!B&&!O?g0({zoomPanValues:c,noWheelClassName:L,d3Selection:g,d3Zoom:f,panOnScrollMode:z,panOnScrollSpeed:T,zoomOnPinch:W,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:l}):v0({noWheelClassName:L,preventScrolling:V,d3ZoomHandler:y});if(g.on("wheel.zoom",ae,{passive:!1}),!O){const U=m0({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:a});f.on("start",U);const j=y0({zoomPanValues:c,panOnDrag:P,onPaneContextMenu:!!_,onPanZoom:s,onTransformChange:te});f.on("zoom",j);const ce=p0({zoomPanValues:c,panOnDrag:P,panOnScroll:w,onPaneContextMenu:_,onPanZoomEnd:l,onDraggingChange:u});f.on("end",ce)}const G=_0({zoomActivationKeyPressed:B,panOnDrag:P,zoomOnScroll:Z,panOnScroll:w,zoomOnDoubleClick:$,zoomOnPinch:W,userSelectionActive:O,noPanClassName:D,noWheelClassName:L,lib:J});f.filter(G),$?g.on("dblclick.zoom",p):g.on("dblclick.zoom",null)}function m(){f.on("zoom",null)}async function C(L,D,_){const O=Qr(L),w=f==null?void 0:f.constrain()(O,D,_);return w&&await M(w),new Promise(P=>P(w))}async function E(L,D){const _=Qr(L);return await M(_,D),new Promise(O=>O(_))}function x(L){if(g){const D=Qr(L),_=g.property("__zoom");(_.k!==L.zoom||_.x!==L.x||_.y!==L.y)&&(f==null||f.transform(g,D,null,{sync:!0}))}}function k(){const L=g?zl(g.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function S(L,D){return g?new Promise(_=>{f==null||f.scaleTo($r(g,D==null?void 0:D.duration,()=>_(!0)),L)}):Promise.resolve(!1)}function N(L,D){return g?new Promise(_=>{f==null||f.scaleBy($r(g,D==null?void 0:D.duration,()=>_(!0)),L)}):Promise.resolve(!1)}function A(L){f==null||f.scaleExtent(L)}function I(L){f==null||f.translateExtent(L)}function H(L){const D=!Rt(L)||L<0?0:L;f==null||f.clickDistance(D)}return{update:b,destroy:m,setViewport:E,setViewportConstrained:C,getViewport:k,scaleTo:S,scaleBy:N,setScaleExtent:A,setTranslateExtent:I,syncViewport:x,setClickDistance:H}}var Zt;(function(e){e.Line="line",e.Handle="handle"})(Zt||(Zt={}));const x0=["top-left","top-right","bottom-left","bottom-right"],b0=["top","right","bottom","left"];function E0({width:e,prevWidth:t,height:n,prevHeight:i,affectsX:r,affectsY:o}){const s=e-t,a=n-i,l=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&r&&(l[0]=l[0]*-1),a&&o&&(l[1]=l[1]*-1),l}function S0(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),i=e.includes("left"),r=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:i,affectsY:r}}function Kt(e,t){return Math.max(0,t-e)}function Ft(e,t){return Math.max(0,e-t)}function Zi(e,t,n){return Math.max(0,t-e,e-n)}function la(e,t){return e?!t:t}function k0(e,t,n,i,r,o,s,a){let{affectsX:l,affectsY:u}=t;const{isHorizontal:c,isVertical:d}=t,f=c&&d,{xSnapped:g,ySnapped:y}=n,{minWidth:p,maxWidth:M,minHeight:b,maxHeight:m}=i,{x:C,y:E,width:x,height:k,aspectRatio:S}=e;let N=Math.floor(c?g-e.pointerX:0),A=Math.floor(d?y-e.pointerY:0);const I=x+(l?-N:N),H=k+(u?-A:A),L=-o[0]*x,D=-o[1]*k;let _=Zi(I,p,M),O=Zi(H,b,m);if(s){let z=0,T=0;l&&N<0?z=Kt(C+N+L,s[0][0]):!l&&N>0&&(z=Ft(C+I+L,s[1][0])),u&&A<0?T=Kt(E+A+D,s[0][1]):!u&&A>0&&(T=Ft(E+H+D,s[1][1])),_=Math.max(_,z),O=Math.max(O,T)}if(a){let z=0,T=0;l&&N>0?z=Ft(C+N,a[0][0]):!l&&N<0&&(z=Kt(C+I,a[1][0])),u&&A>0?T=Ft(E+A,a[0][1]):!u&&A<0&&(T=Kt(E+H,a[1][1])),_=Math.max(_,z),O=Math.max(O,T)}if(r){if(c){const z=Zi(I/S,b,m)*S;if(_=Math.max(_,z),s){let T=0;!l&&!u||l&&!u&&f?T=Ft(E+D+I/S,s[1][1])*S:T=Kt(E+D+(l?N:-N)/S,s[0][1])*S,_=Math.max(_,T)}if(a){let T=0;!l&&!u||l&&!u&&f?T=Kt(E+I/S,a[1][1])*S:T=Ft(E+(l?N:-N)/S,a[0][1])*S,_=Math.max(_,T)}}if(d){const z=Zi(H*S,p,M)/S;if(O=Math.max(O,z),s){let T=0;!l&&!u||u&&!l&&f?T=Ft(C+H*S+L,s[1][0])/S:T=Kt(C+(u?A:-A)*S+L,s[0][0])/S,O=Math.max(O,T)}if(a){let T=0;!l&&!u||u&&!l&&f?T=Kt(C+H*S,a[1][0])/S:T=Ft(C+(u?A:-A)*S,a[0][0])/S,O=Math.max(O,T)}}}A=A+(A<0?O:-O),N=N+(N<0?_:-_),r&&(f?I>H*S?A=(la(l,u)?-N:N)/S:N=(la(l,u)?-A:A)*S:c?(A=N/S,u=l):(N=A*S,l=u));const w=l?C+N:C,P=u?E+A:E;return{width:x+(l?-N:N),height:k+(u?-A:A),x:o[0]*N*(l?-1:1)+w,y:o[1]*A*(u?-1:1)+P}}const Ql={width:0,height:0,x:0,y:0},C0={...Ql,pointerX:0,pointerY:0,aspectRatio:1};function N0(e){return[[0,0],[e.measured.width,e.measured.height]]}function M0(e,t,n){const i=t.position.x+e.position.x,r=t.position.y+e.position.y,o=e.measured.width??0,s=e.measured.height??0,a=n[0]*o,l=n[1]*s;return[[i-a,r-l],[i+o-a,r+s-l]]}function P0({domNode:e,nodeId:t,getStoreItems:n,onChange:i,onEnd:r}){const o=ht(e);function s({controlPosition:l,boundaries:u,keepAspectRatio:c,onResizeStart:d,onResize:f,onResizeEnd:g,shouldResize:y}){let p={...Ql},M={...C0};const b=S0(l);let m,C=null,E=[],x,k,S;const N=pl().on("start",A=>{const{nodeLookup:I,transform:H,snapGrid:L,snapToGrid:D,nodeOrigin:_,paneDomNode:O}=n();if(m=I.get(t),!m)return;C=(O==null?void 0:O.getBoundingClientRect())??null;const{xSnapped:w,ySnapped:P}=ni(A.sourceEvent,{transform:H,snapGrid:L,snapToGrid:D,containerBounds:C});p={width:m.measured.width??0,height:m.measured.height??0,x:m.position.x??0,y:m.position.y??0},M={...p,pointerX:w,pointerY:P,aspectRatio:p.width/p.height},x=void 0,m.parentId&&(m.extent==="parent"||m.expandParent)&&(x=I.get(m.parentId),k=x&&m.extent==="parent"?N0(x):void 0),E=[],S=void 0;for(const[z,T]of I)if(T.parentId===t&&(E.push({id:z,position:{...T.position},extent:T.extent}),T.extent==="parent"||T.expandParent)){const V=M0(T,m,T.origin??_);S?S=[[Math.min(V[0][0],S[0][0]),Math.min(V[0][1],S[0][1])],[Math.max(V[1][0],S[1][0]),Math.max(V[1][1],S[1][1])]]:S=V}d==null||d(A,{...p})}).on("drag",A=>{const{transform:I,snapGrid:H,snapToGrid:L,nodeOrigin:D}=n(),_=ni(A.sourceEvent,{transform:I,snapGrid:H,snapToGrid:L,containerBounds:C}),O=[];if(!m)return;const{x:w,y:P,width:z,height:T}=p,V={},W=m.origin??D,{width:Z,height:$,x:B,y:J}=k0(M,b,_,u,c,W,k,S),te=Z!==z,re=$!==T,ae=B!==w&&te,G=J!==P&&re;if(!ae&&!G&&!te&&!re)return;if((ae||G||W[0]===1||W[1]===1)&&(V.x=ae?B:p.x,V.y=G?J:p.y,p.x=V.x,p.y=V.y,E.length>0)){const _e=B-w,ve=J-P;for(const be of E)be.position={x:be.position.x-_e+W[0]*(Z-z),y:be.position.y-ve+W[1]*($-T)},O.push(be)}if((te||re)&&(V.width=te?Z:p.width,V.height=re?$:p.height,p.width=V.width,p.height=V.height),x&&m.expandParent){const _e=W[0]*(V.width??0);V.x&&V.x<_e&&(p.x=_e,M.x=M.x-(V.x-_e));const ve=W[1]*(V.height??0);V.y&&V.y<ve&&(p.y=ve,M.y=M.y-(V.y-ve))}const U=E0({width:p.width,prevWidth:z,height:p.height,prevHeight:T,affectsX:b.affectsX,affectsY:b.affectsY}),j={...p,direction:U};(y==null?void 0:y(A,j))!==!1&&(f==null||f(A,j),i(V,O))}).on("end",A=>{g==null||g(A,{...p}),r==null||r()});o.call(N)}function a(){o.on(".drag",null)}return{update:s,destroy:a}}var A0=ge('<div role="button" tabindex="-1"><!></div>');function on(e,t){le(t,!1);const n=Be(),i=()=>K(Z,"$connectable",n),r=()=>K(re,"$connectionRadius",n),o=()=>K(J,"$domNode",n),s=()=>K(te,"$nodeLookup",n),a=()=>K(B,"$connectionMode",n),l=()=>K(U,"$lib",n),u=()=>K(Se,"$autoPanOnConnect",n),c=()=>K(Et,"$flowId",n),d=()=>K(G,"$isValidConnectionStore",n),f=()=>K(ce,"$onedgecreate",n),g=()=>K(Xe,"$onConnectAction",n),y=()=>K(Ne,"$onConnectStartAction",n),p=()=>K(we,"$onConnectEndAction",n),M=()=>K(ae,"$viewport",n),b=()=>K(mt,"$connection",n),m=()=>K(We,"$edges",n),C=()=>K(Ie,"$connectionLookup",n),E=F(),x=F(),k=F(),S=F(),N=F(),A=F(),I=F(),H=F();let L=v(t,"id",8,void 0),D=v(t,"type",8,"source"),_=v(t,"position",24,()=>se.Top),O=v(t,"style",8,void 0),w=v(t,"isValidConnection",8,void 0),P=v(t,"onconnect",8,void 0),z=v(t,"ondisconnect",8,void 0),T=v(t,"isConnectable",8,void 0),V=v(t,"class",8,void 0);const W=Yt("svelteflow__node_id"),Z=Yt("svelteflow__node_connectable"),$=He(),{connectionMode:B,domNode:J,nodeLookup:te,connectionRadius:re,viewport:ae,isValidConnection:G,lib:U,addEdge:j,onedgecreate:ce,panBy:_e,cancelConnection:ve,updateConnection:be,autoPanOnConnect:Se,edges:We,connectionLookup:Ie,onconnect:Xe,onconnectstart:Ne,onconnectend:we,flowId:Et,connection:mt}=$;function Ae(Ke){const tt=Vl(Ke);(tt&&Ke.button===0||!tt)&&f0.onPointerDown(Ke,{handleId:h(k),nodeId:W,isTarget:h(E),connectionRadius:r(),domNode:o(),nodeLookup:s(),connectionMode:a(),lib:l(),autoPanOnConnect:u(),flowId:c(),isValidConnection:w()??d(),updateConnection:be,cancelConnection:ve,panBy:_e,onConnect:Ye=>{var St;const nt=f()?f()(Ye):Ye;nt&&(j(nt),(St=g())==null||St(Ye))},onConnectStart:(Ye,nt)=>{var St;(St=y())==null||St(Ye,{nodeId:nt.nodeId,handleId:nt.handleId,handleType:nt.handleType})},onConnectEnd:(Ye,nt)=>{var St;(St=p())==null||St(Ye,nt)},getTransform:()=>[M().x,M().y,M().zoom],getFromHandle:()=>b().fromHandle})}let qe=F(null),Re=F();Q(()=>X(D()),()=>{Y(E,D()==="target")}),Q(()=>(X(T()),i()),()=>{Y(x,T()!==void 0?T():i())}),Q(()=>X(L()),()=>{Y(k,L()||null)}),Q(()=>(X(P()),X(z()),m(),C(),X(D()),X(L())),()=>{(P()||z())&&(m(),Y(Re,C().get(`${W}-${D()}-${L()||null}`)))}),Q(()=>(h(qe),h(Re),X(z()),X(P())),()=>{if(h(qe)&&!Il(h(Re),h(qe))){const Ke=h(Re)??new Map;Us(h(qe),Ke,z()),Us(Ke,h(qe),P())}Y(qe,h(Re)??new Map)}),Q(()=>b(),()=>{Y(S,!!b().fromHandle)}),Q(()=>(b(),X(D()),h(k)),()=>{var Ke,tt,Ye;Y(N,((Ke=b().fromHandle)==null?void 0:Ke.nodeId)===W&&((tt=b().fromHandle)==null?void 0:tt.type)===D()&&((Ye=b().fromHandle)==null?void 0:Ye.id)===h(k))}),Q(()=>(b(),X(D()),h(k)),()=>{var Ke,tt,Ye;Y(A,((Ke=b().toHandle)==null?void 0:Ke.nodeId)===W&&((tt=b().toHandle)==null?void 0:tt.type)===D()&&((Ye=b().toHandle)==null?void 0:Ye.id)===h(k))}),Q(()=>(a(),b(),X(D()),h(k)),()=>{var Ke,tt,Ye;Y(I,a()===vn.Strict?((Ke=b().fromHandle)==null?void 0:Ke.type)!==D():W!==((tt=b().fromHandle)==null?void 0:tt.nodeId)||h(k)!==((Ye=b().fromHandle)==null?void 0:Ye.id))}),Q(()=>(h(A),b()),()=>{Y(H,h(A)&&b().isValid)}),Qe(),de();var Te=A0();ne(Te,"data-nodeid",W);const Li=oe(()=>It(lt(["svelte-flow__handle",`svelte-flow__handle-${_()}`,"nodrag","nopan",_(),V()])));var Vi=fe(Te);Ve(Vi,t,"default",{}),Ce(()=>{ne(Te,"data-handleid",h(k)),ne(Te,"data-handlepos",_()),ne(Te,"data-id",`${c()??""}-${W??""}-${(L()||null)??""}-${D()??""}`),Wo(Te,h(Li),""),ne(Te,"style",O()),Oe(Te,"valid",h(H)),Oe(Te,"connectingto",h(A)),Oe(Te,"connectingfrom",h(N)),Oe(Te,"source",!h(E)),Oe(Te,"target",h(E)),Oe(Te,"connectablestart",h(x)),Oe(Te,"connectableend",h(x)),Oe(Te,"connectable",h(x)),Oe(Te,"connectionindicator",h(x)&&(!h(S)||h(I)))}),Ee("mousedown",Te,Ae),Ee("touchstart",Te,Ae),q(e,Te),ue()}var T0=ge("<!> <!>",1);function No(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["data","targetPosition","sourcePosition"]),le(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"targetPosition",8,void 0),o=v(t,"sourcePosition",8,void 0);de();var s=T0(),a=pe(s),l=oe(()=>r()??se.Top);on(a,{type:"target",get position(){return h(l)}});var u=ie(a),c=ie(u),d=oe(()=>o()??se.Bottom);on(c,{type:"source",get position(){return h(d)}}),Ce(()=>{var f;return Pr(u,` ${((f=i())==null?void 0:f.label)??""} `)}),q(e,s),ue()}var z0=ge(" <!>",1);function I0(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["data","sourcePosition"]),le(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"sourcePosition",8,void 0);de();var o=z0(),s=pe(o),a=ie(s),l=oe(()=>r()??se.Bottom);on(a,{type:"source",get position(){return h(l)}}),Ce(()=>{var u;return Pr(s,`${((u=i())==null?void 0:u.label)??""} `)}),q(e,o),ue()}var O0=ge(" <!>",1);function D0(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["data","targetPosition"]),le(t,!1);let i=v(t,"data",24,()=>({label:"Node"})),r=v(t,"targetPosition",8,void 0);de();var o=O0(),s=pe(o),a=ie(s),l=oe(()=>r()??se.Top);on(a,{type:"target",get position(){return h(l)}}),Ce(()=>{var u;return Pr(s,`${((u=i())==null?void 0:u.label)??""} `)}),q(e,o),ue()}function H0(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,[])}function ua(e,t,n){if(!t)return;const i=n?t.querySelector(n):t;i&&i.appendChild(e)}function eo(e,{target:t,domNode:n}){return ua(e,n,t),{async update({target:i,domNode:r}){ua(e,r,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}var R0=ge("<div><!></div>");function L0(e,t){le(t,!1);const n=Be(),i=()=>K(r,"$domNode",n),{domNode:r}=He();de();var o=R0(),s=fe(o);Ve(s,t,"default",{}),ot(o,(a,l)=>eo==null?void 0:eo(a,l),()=>({target:".svelte-flow__edgelabel-renderer",domNode:i()})),q(e,o),ue()}function $l(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:r,unselectNodesAndEdges:o,elementsSelectable:s}=He();return a=>{const l=R(e).get(a);if(!l){console.warn("012",Oi.error012(a));return}(l.selectable||R(s)&&typeof l.selectable>"u")&&(t.set(null),n.set(null),l.selected?l.selected&&R(i)&&o({nodes:[],edges:[l]}):r([a]))}}var V0=ge('<div class="svelte-flow__edge-label" role="button" tabindex="-1"><!></div>');function X0(e,t){le(t,!1);let n=v(t,"style",8,void 0),i=v(t,"x",8,void 0),r=v(t,"y",8,void 0);const o=$l(),s=Yt("svelteflow__edge_id");de(),L0(e,{children:(a,l)=>{var u=V0(),c=fe(u);Ve(c,t,"default",{}),Ce(()=>{ne(u,"style","pointer-events: all;"+n()),Le(u,"transform",`translate(-50%, -50%) translate(${i()??""}px,${r()??""}px)`)}),Ee("keyup",u,()=>{}),Ee("click",u,()=>{s&&o(s)}),q(a,u)},$$slots:{default:!0}}),ue()}var Y0=Ge('<path fill="none" class="svelte-flow__edge-interaction"></path>'),B0=Ge('<path fill="none"></path><!><!>',1);function Xr(e,t){le(t,!1);let n=v(t,"id",8,void 0),i=v(t,"path",8),r=v(t,"label",8,void 0),o=v(t,"labelX",8,void 0),s=v(t,"labelY",8,void 0),a=v(t,"labelStyle",8,void 0),l=v(t,"markerStart",8,void 0),u=v(t,"markerEnd",8,void 0),c=v(t,"style",8,void 0),d=v(t,"interactionWidth",8,20),f=v(t,"class",8,void 0),g=d()===void 0?20:d();de();var y=B0(),p=pe(y);const M=oe(()=>It(lt(["svelte-flow__edge-path",f()])));var b=ie(p);{var m=x=>{var k=Y0();ne(k,"stroke-opacity",0),ne(k,"stroke-width",g),Ce(()=>ne(k,"d",i())),q(x,k)};De(b,x=>{g&&x(m)})}var C=ie(b);{var E=x=>{X0(x,{get x(){return o()},get y(){return s()},get style(){return a()},children:(k,S)=>{var N=Pc();Ce(()=>Pr(N,r())),q(k,N)},$$slots:{default:!0}})};De(C,x=>{r()&&x(E)})}Ce(()=>{ne(p,"id",n()),ne(p,"d",i()),Kn(p,h(M),""),ne(p,"marker-start",l()),ne(p,"marker-end",u()),ne(p,"style",c())}),q(e,y),ue()}function Mo(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const i=F(),r=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),u=v(t,"markerStart",8,void 0),c=v(t,"markerEnd",8,void 0),d=v(t,"interactionWidth",8,void 0),f=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"sourcePosition",8),p=v(t,"targetX",8),M=v(t,"targetY",8),b=v(t,"targetPosition",8);Q(()=>(h(i),h(r),h(o),X(f()),X(g()),X(p()),X(M()),X(y()),X(b())),()=>{(m=>(Y(i,m[0]),Y(r,m[1]),Y(o,m[2])))(Xl({sourceX:f(),sourceY:g(),targetX:p(),targetY:M(),sourcePosition:y(),targetPosition:b()}))}),Qe(),de(),Xr(e,{get path(){return h(i)},get labelX(){return h(r)},get labelY(){return h(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return d()},get style(){return l()}}),ue()}function W0(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const i=F(),r=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),u=v(t,"markerStart",8,void 0),c=v(t,"markerEnd",8,void 0),d=v(t,"interactionWidth",8,void 0),f=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"sourcePosition",8),p=v(t,"targetX",8),M=v(t,"targetY",8),b=v(t,"targetPosition",8);Q(()=>(h(i),h(r),h(o),X(f()),X(g()),X(p()),X(M()),X(y()),X(b())),()=>{(m=>(Y(i,m[0]),Y(r,m[1]),Y(o,m[2])))(yr({sourceX:f(),sourceY:g(),targetX:p(),targetY:M(),sourcePosition:y(),targetPosition:b()}))}),Qe(),de(),Xr(e,{get path(){return h(i)},get labelX(){return h(r)},get labelY(){return h(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return d()},get style(){return l()}}),ue()}function K0(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"]),le(t,!1);const i=F(),r=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),u=v(t,"markerStart",8,void 0),c=v(t,"markerEnd",8,void 0),d=v(t,"interactionWidth",8,void 0),f=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"targetX",8),p=v(t,"targetY",8);Q(()=>(h(i),h(r),h(o),X(f()),X(g()),X(y()),X(p())),()=>{(M=>(Y(i,M[0]),Y(r,M[1]),Y(o,M[2])))(ko({sourceX:f(),sourceY:g(),targetX:y(),targetY:p()}))}),Qe(),de(),Xr(e,{get path(){return h(i)},get labelX(){return h(r)},get labelY(){return h(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return d()},get style(){return l()}}),ue()}function F0(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Pe(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),le(t,!1);const i=F(),r=F(),o=F();let s=v(t,"label",8,void 0),a=v(t,"labelStyle",8,void 0),l=v(t,"style",8,void 0),u=v(t,"markerStart",8,void 0),c=v(t,"markerEnd",8,void 0),d=v(t,"interactionWidth",8,void 0),f=v(t,"sourceX",8),g=v(t,"sourceY",8),y=v(t,"sourcePosition",8),p=v(t,"targetX",8),M=v(t,"targetY",8),b=v(t,"targetPosition",8);Q(()=>(h(i),h(r),h(o),X(f()),X(g()),X(p()),X(M()),X(y()),X(b())),()=>{(m=>(Y(i,m[0]),Y(r,m[1]),Y(o,m[2])))(yr({sourceX:f(),sourceY:g(),targetX:p(),targetY:M(),sourcePosition:y(),targetPosition:b(),borderRadius:0}))}),Qe(),de(),Xr(e,{get path(){return h(i)},get labelX(){return h(r)},get labelY(){return h(o)},get label(){return s()},get labelStyle(){return a()},get markerStart(){return u()},get markerEnd(){return c()},get interactionWidth(){return d()},get style(){return l()}}),ue()}function G0(e,t){const n=e.set,i=t.set,r=R(e),o=R(t);let a=r.length===0&&o.length>0?o:r;e.set(a);const l=u=>{const c=n(u);return a=c,i(a),c};e.set=t.set=l,e.update=t.update=u=>l(u(a))}function q0(e,t){const n=e.set,i=t.set;let r=R(t);e.set(r);const o=s=>{n(s),i(s),r=s};e.set=t.set=o,e.update=t.update=s=>o(s(r))}const Z0=(e,t,n)=>{if(!n)return;const i=R(e),r=t.set,o=n.set;let s=n?R(n):{x:0,y:0,zoom:1};t.set(s),t.set=a=>(r(a),o(a),s=a,a),n.set=a=>(i==null||i.syncViewport(a),r(a),o(a),s=a,a),t.update=a=>{t.set(a(s))},n.update=a=>{n.set(a(s))}},U0=(e,t,n,i=[0,0],r=fr)=>{const{subscribe:o,set:s,update:a}=ee([]);let l=e,u={},c=!0;const d=p=>(Bl(p,t,n,{elevateNodesOnSelect:c,nodeOrigin:i,nodeExtent:r,defaults:u,checkEquality:!1}),l=p,s(l),l),f=p=>d(p(l)),g=p=>{u=p},y=p=>{c=p.elevateNodesOnSelect??c};return d(l),{subscribe:o,set:d,update:f,setDefaultOptions:g,setOptions:y}},J0=(e,t,n,i)=>{const{subscribe:r,set:o,update:s}=ee([]);let a=e,l={};const u=f=>{const g=l?f.map(y=>({...l,...y})):f;Kl(t,n,g),a=g,o(a)},c=f=>u(f(a)),d=f=>{l=f};return u(a),{subscribe:r,set:u,update:c,setDefaultOptions:d}},eu={input:I0,output:D0,default:No,group:H0},tu={straight:K0,smoothstep:W0,default:Mo,step:F0},j0=({nodes:e=[],edges:t=[],width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s})=>{const a=new Map,l=new Map,u=new Map,c=new Map,d=o??[0,0],f=s??fr;Bl(e,a,l,{nodeExtent:f,nodeOrigin:d,elevateNodesOnSelect:!1,checkEquality:!1}),Kl(u,c,t);let g={x:0,y:0,zoom:1};if(r&&n&&i){const y=Hr(a,{filter:p=>!!((p.width||p.initialWidth)&&(p.height||p.initialHeight))});g=$o(y,n,i,.5,2,.1)}return{flowId:ee(null),nodes:U0(e,a,l,d,f),nodeLookup:ft(a),parentLookup:ft(l),edgeLookup:ft(c),visibleNodes:ft([]),edges:J0(t,u,c),visibleEdges:ft([]),connectionLookup:ft(u),height:ee(500),width:ee(500),minZoom:ee(.5),maxZoom:ee(2),nodeOrigin:ee(d),nodeDragThreshold:ee(1),nodeExtent:ee(f),translateExtent:ee(fr),autoPanOnNodeDrag:ee(!0),autoPanOnConnect:ee(!0),fitViewOnInit:ee(!1),fitViewOnInitDone:ee(!1),fitViewOptions:ee(void 0),panZoom:ee(null),snapGrid:ee(null),dragging:ee(!1),selectionRect:ee(null),selectionKeyPressed:ee(!1),multiselectionKeyPressed:ee(!1),deleteKeyPressed:ee(!1),panActivationKeyPressed:ee(!1),zoomActivationKeyPressed:ee(!1),selectionRectMode:ee(null),selectionMode:ee(hr.Partial),nodeTypes:ee(eu),edgeTypes:ee(tu),viewport:ee(g),connectionMode:ee(vn.Strict),domNode:ee(null),connection:ft(bo),connectionLineType:ee(Cn.Bezier),connectionRadius:ee(20),isValidConnection:ee(()=>!0),nodesDraggable:ee(!0),nodesConnectable:ee(!0),elementsSelectable:ee(!0),selectNodesOnDrag:ee(!0),markers:ft([]),defaultMarkerColor:ee("#b1b1b7"),lib:ft("svelte"),onlyRenderVisibleElements:ee(!1),onerror:ee(Dg),ondelete:ee(void 0),onedgecreate:ee(void 0),onconnect:ee(void 0),onconnectstart:ee(void 0),onconnectend:ee(void 0),onbeforedelete:ee(void 0),nodesInitialized:ee(!1),edgesInitialized:ee(!1),viewportInitialized:ee(!1),initialized:ft(!1)}};function Q0(e){const t=dn([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,i,r,o,s,a])=>r&&s&&a?n.filter(u=>{const c=i.get(u.source),d=i.get(u.target);return c&&d&&Wg({sourceNode:c,targetNode:d,width:s,height:a,transform:[o.x,o.y,o.zoom]})}):n);return dn([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,i,r,o])=>n.reduce((a,l)=>{const u=i.get(l.source),c=i.get(l.target);if(!u||!c)return a;const d=Jg({id:l.id,sourceNode:u,targetNode:c,sourceHandle:l.sourceHandle||null,targetHandle:l.targetHandle||null,connectionMode:r,onError:o});return d&&a.push({...l,zIndex:Bg({selected:l.selected,zIndex:l.zIndex,sourceNode:u,targetNode:c,elevateOnSelect:!1}),...d}),a},[]))}function $0(e){return dn([e.nodeLookup,e.onlyRenderVisibleElements,e.width,e.height,e.viewport,e.nodes],([t,n,i,r,o])=>{const s=[o.x,o.y,o.zoom];return n?Ol(t,{x:0,y:0,width:i,height:r},s,!0):Array.from(t.values())})}const rs=Symbol();function ev({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s}){const a=j0({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s});function l(w){a.nodeTypes.set({...eu,...w})}function u(w){a.edgeTypes.set({...tu,...w})}function c(w){const P=R(a.edges);a.edges.set(Gg(w,P))}const d=(w,P=!1)=>{var T;const z=R(a.nodeLookup);for(const[V,W]of w){const Z=(T=z.get(V))==null?void 0:T.internals.userNode;Z&&(Z.position=W.position,Z.dragging=P)}a.nodes.update(V=>V)};function f(w){var W,Z,$;const P=R(a.nodeLookup),z=R(a.parentLookup),{changes:T,updatedInternals:V}=i0(w,P,R(a.parentLookup),R(a.domNode),R(a.nodeOrigin));if(V){if($g(P,z,{nodeOrigin:o,nodeExtent:s}),!R(a.fitViewOnInitDone)&&R(a.fitViewOnInit)){const B=R(a.fitViewOptions),J=y({...B,nodes:B==null?void 0:B.nodes});a.fitViewOnInitDone.set(J)}for(const B of T){const J=(W=P.get(B.id))==null?void 0:W.internals.userNode;if(J)switch(B.type){case"dimensions":{const te={...J.measured,...B.dimensions};B.setAttributes&&(J.width=((Z=B.dimensions)==null?void 0:Z.width)??J.width,J.height=(($=B.dimensions)==null?void 0:$.height)??J.height),J.measured=te;break}case"position":J.position=B.position??J.position;break}}a.nodes.update(B=>B),R(a.nodesInitialized)||a.nodesInitialized.set(!0)}}function g(w){const P=R(a.panZoom),z=R(a.domNode);if(!P||!z)return Promise.resolve(!1);const{width:T,height:V}=es(z),W=Js(R(a.nodeLookup),w);return js({nodes:W,width:T,height:V,minZoom:R(a.minZoom),maxZoom:R(a.maxZoom),panZoom:P},w)}function y(w){const P=R(a.panZoom);if(!P)return!1;const z=Js(R(a.nodeLookup),w);return js({nodes:z,width:R(a.width),height:R(a.height),minZoom:R(a.minZoom),maxZoom:R(a.maxZoom),panZoom:P},w),z.size>0}function p(w,P){const z=R(a.panZoom);return z?z.scaleBy(w,P):Promise.resolve(!1)}function M(w){return p(1.2,w)}function b(w){return p(1/1.2,w)}function m(w){const P=R(a.panZoom);P&&(P.setScaleExtent([w,R(a.maxZoom)]),a.minZoom.set(w))}function C(w){const P=R(a.panZoom);P&&(P.setScaleExtent([R(a.minZoom),w]),a.maxZoom.set(w))}function E(w){const P=R(a.panZoom);P&&(P.setTranslateExtent(w),a.translateExtent.set(w))}function x(w){let P=!1;return w.forEach(z=>{z.selected&&(z.selected=!1,P=!0)}),P}function k(w){var P;(P=R(a.panZoom))==null||P.setClickDistance(w)}function S(w){x((w==null?void 0:w.nodes)||R(a.nodes))&&a.nodes.set(R(a.nodes)),x((w==null?void 0:w.edges)||R(a.edges))&&a.edges.set(R(a.edges))}a.deleteKeyPressed.subscribe(async w=>{var P;if(w){const z=R(a.nodes),T=R(a.edges),V=z.filter(B=>B.selected),W=T.filter(B=>B.selected),{nodes:Z,edges:$}=await Dl({nodesToRemove:V,edgesToRemove:W,nodes:z,edges:T,onBeforeDelete:R(a.onbeforedelete)});(Z.length||$.length)&&(a.nodes.update(B=>B.filter(J=>!Z.some(te=>te.id===J.id))),a.edges.update(B=>B.filter(J=>!$.some(te=>te.id===J.id))),(P=R(a.ondelete))==null||P({nodes:Z,edges:$}))}});function N(w){const P=R(a.multiselectionKeyPressed);a.nodes.update(z=>z.map(T=>{const V=w.includes(T.id),W=P&&T.selected||V;return T.selected=W,T})),P||a.edges.update(z=>z.map(T=>(T.selected=!1,T)))}function A(w){const P=R(a.multiselectionKeyPressed);a.edges.update(z=>z.map(T=>{const V=w.includes(T.id),W=P&&T.selected||V;return T.selected=W,T})),P||a.nodes.update(z=>z.map(T=>(T.selected=!1,T)))}function I(w){var z;const P=(z=R(a.nodes))==null?void 0:z.find(T=>T.id===w);if(!P){console.warn("012",Oi.error012(w));return}a.selectionRect.set(null),a.selectionRectMode.set(null),P.selected?P.selected&&R(a.multiselectionKeyPressed)&&S({nodes:[P],edges:[]}):N([w])}function H(w){const P=R(a.viewport);return r0({delta:w,panZoom:R(a.panZoom),transform:[P.x,P.y,P.zoom],translateExtent:R(a.translateExtent),width:R(a.width),height:R(a.height)})}const L=ee(bo),D=w=>{L.set({...w})};function _(){L.set(bo)}function O(){a.fitViewOnInitDone.set(!1),a.selectionRect.set(null),a.selectionRectMode.set(null),a.snapGrid.set(null),a.isValidConnection.set(()=>!0),S(),_()}return{...a,visibleEdges:Q0(a),visibleNodes:$0(a),connection:dn([L,a.viewport],([w,P])=>w.inProgress?{...w,to:Hi(w.to,[P.x,P.y,P.zoom])}:{...w}),markers:dn([a.edges,a.defaultMarkerColor,a.flowId],([w,P,z])=>jg(w,{defaultColor:P,id:z})),initialized:(()=>{let w=!1;const P=R(a.nodes).length,z=R(a.edges).length;return dn([a.nodesInitialized,a.edgesInitialized,a.viewportInitialized],([T,V,W])=>w||(P===0?w=W:z===0?w=W&&T:w=W&&T&&V,w))})(),syncNodeStores:w=>G0(a.nodes,w),syncEdgeStores:w=>q0(a.edges,w),syncViewport:w=>Z0(a.panZoom,a.viewport,w),setNodeTypes:l,setEdgeTypes:u,addEdge:c,updateNodePositions:d,updateNodeInternals:f,zoomIn:M,zoomOut:b,fitView:w=>g(w),setMinZoom:m,setMaxZoom:C,setTranslateExtent:E,setPaneClickDistance:k,unselectNodesAndEdges:S,addSelectedNodes:N,addSelectedEdges:A,handleNodeSelection:I,panBy:H,updateConnection:D,cancelConnection:_,reset:O}}function He(){const e=Yt(rs);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function tv({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s}){const a=ev({nodes:e,edges:t,width:n,height:i,fitView:r,nodeOrigin:o,nodeExtent:s});return hn(rs,{getStore:()=>a}),a}function to(e,t){const{panZoom:n,minZoom:i,maxZoom:r,initialViewport:o,viewport:s,dragging:a,translateExtent:l,paneClickDistance:u}=t,c=w0({domNode:e,minZoom:i,maxZoom:r,translateExtent:l,viewport:o,paneClickDistance:u,onDraggingChange:a.set}),d=c.getViewport();return s.set(d),n.set(c),c.update(t),{update(f){c.update(f)}}}var nv=ge('<div class="svelte-flow__zoom svelte-4xkw84"><!></div>');function iv(e,t){le(t,!1);const n=Be(),i=()=>K(P,"$panActivationKeyPressed",n),r=()=>K(L,"$minZoom",n),o=()=>K(D,"$maxZoom",n),s=()=>K(z,"$zoomActivationKeyPressed",n),a=()=>K(H,"$selectionRect",n),l=()=>K(O,"$translateExtent",n),u=()=>K(w,"$lib",n),c=F(),d=F(),f=F();let g=v(t,"initialViewport",8,void 0),y=v(t,"onMoveStart",8,void 0),p=v(t,"onMove",8,void 0),M=v(t,"onMoveEnd",8,void 0),b=v(t,"panOnScrollMode",8),m=v(t,"preventScrolling",8),C=v(t,"zoomOnScroll",8),E=v(t,"zoomOnDoubleClick",8),x=v(t,"zoomOnPinch",8),k=v(t,"panOnDrag",8),S=v(t,"panOnScroll",8),N=v(t,"paneClickDistance",8);const{viewport:A,panZoom:I,selectionRect:H,minZoom:L,maxZoom:D,dragging:_,translateExtent:O,lib:w,panActivationKeyPressed:P,zoomActivationKeyPressed:z,viewportInitialized:T}=He(),V=$=>A.set({x:$[0],y:$[1],zoom:$[2]});pn(()=>{si(T,!0)}),Q(()=>X(g()),()=>{Y(c,g()||{x:0,y:0,zoom:1})}),Q(()=>(i(),X(k())),()=>{Y(d,i()||k())}),Q(()=>(i(),X(S())),()=>{Y(f,i()||S())}),Qe(),de();var W=nv(),Z=fe(W);Ve(Z,t,"default",{}),ot(W,($,B)=>to==null?void 0:to($,B),()=>({viewport:A,minZoom:r(),maxZoom:o(),initialViewport:h(c),dragging:_,panZoom:I,onPanZoomStart:y(),onPanZoom:p(),onPanZoomEnd:M(),zoomOnScroll:C(),zoomOnDoubleClick:E(),zoomOnPinch:x(),panOnScroll:h(f),panOnDrag:h(d),panOnScrollSpeed:.5,panOnScrollMode:b()||$t.Free,zoomActivationKeyPressed:s(),preventScrolling:typeof m()=="boolean"?m():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!a(),translateExtent:l(),lib:u(),paneClickDistance:N(),onTransformChange:V})),q(e,W),ue()}function ca(e,t){return n=>{n.target===t&&(e==null||e(n))}}function da(e){return t=>{const n=e.includes(t.id);return t.selected!==n&&(t.selected=n),t}}var rv=ge('<div class="svelte-flow__pane svelte-1esy7hx"><!></div>');function ov(e,t){le(t,!1);const n=Be(),i=()=>K(D,"$panActivationKeyPressed",n),r=()=>K(H,"$selectionKeyPressed",n),o=()=>K(A,"$selectionRect",n),s=()=>K(N,"$elementsSelectable",n),a=()=>K(I,"$selectionRectMode",n),l=()=>K(x,"$edges",n),u=()=>K(E,"$nodeLookup",n),c=()=>K(k,"$viewport",n),d=()=>K(L,"$selectionMode",n),f=()=>K(S,"$dragging",n),g=F(),y=F(),p=F();let M=v(t,"panOnDrag",8,void 0),b=v(t,"selectionOnDrag",8,void 0);const m=Ar(),{nodes:C,nodeLookup:E,edges:x,viewport:k,dragging:S,elementsSelectable:N,selectionRect:A,selectionRectMode:I,selectionKeyPressed:H,selectionMode:L,panActivationKeyPressed:D,unselectNodesAndEdges:_}=He();let O=F(),w=null,P=[],z=!1;function T(G){if(z){z=!1;return}m("paneclick",{event:G}),_(),I.set(null)}function V(G){var ce,_e;if(w=h(O).getBoundingClientRect(),!N||!h(y)||G.button!==0||G.target!==h(O)||!w)return;(_e=(ce=G.target)==null?void 0:ce.setPointerCapture)==null||_e.call(ce,G.pointerId);const{x:U,y:j}=Vt(G,w);_(),A.set({width:0,height:0,startX:U,startY:j,x:U,y:j})}function W(G){if(!h(y)||!w||!o())return;z=!0;const U=Vt(G,w),j=o().startX??0,ce=o().startY??0,_e={...o(),x:U.x<j?U.x:j,y:U.y<ce?U.y:ce,width:Math.abs(U.x-j),height:Math.abs(U.y-ce)},ve=P.map(Ie=>Ie.id),be=Eo(P,l()).map(Ie=>Ie.id);P=Ol(u(),_e,[c().x,c().y,c().zoom],d()===hr.Partial,!0);const Se=Eo(P,l()).map(Ie=>Ie.id),We=P.map(Ie=>Ie.id);(ve.length!==We.length||We.some(Ie=>!ve.includes(Ie)))&&C.update(Ie=>Ie.map(da(We))),(be.length!==Se.length||Se.some(Ie=>!be.includes(Ie)))&&x.update(Ie=>Ie.map(da(Se))),I.set("user"),A.set(_e)}function Z(G){var U,j;G.button===0&&((j=(U=G.target)==null?void 0:U.releasePointerCapture)==null||j.call(U,G.pointerId),!h(y)&&a()==="user"&&G.target===h(O)&&(T==null||T(G)),A.set(null),P.length>0&&si(I,"nodes"),r()&&(z=!1))}const $=G=>{var U;if(Array.isArray(h(g))&&((U=h(g))!=null&&U.includes(2))){G.preventDefault();return}m("panecontextmenu",{event:G})};Q(()=>(i(),X(M())),()=>{Y(g,i()||M())}),Q(()=>(r(),o(),X(b()),h(g)),()=>{Y(y,r()||o()||b()&&h(g)!==!0)}),Q(()=>(s(),h(y),a()),()=>{Y(p,s()&&(h(y)||a()==="user"))}),Qe(),de();var B=rv(),J=tn(()=>h(p)?void 0:ca(T,h(O))),te=tn(()=>ca($,h(O)));const re=oe(()=>M()===!0||Array.isArray(M())&&M().includes(0));Ce(()=>Oe(B,"draggable",h(re)));var ae=fe(B);Ve(ae,t,"default",{}),Tn(B,G=>Y(O,G),()=>h(O)),Ce(()=>{Oe(B,"dragging",f()),Oe(B,"selection",h(y))}),Ee("click",B,function(...G){var U;(U=h(J))==null||U.apply(this,G)}),Ee("pointerdown",B,function(...G){var U;(U=h(p)?V:void 0)==null||U.apply(this,G)}),Ee("pointermove",B,function(...G){var U;(U=h(p)?W:void 0)==null||U.apply(this,G)}),Ee("pointerup",B,function(...G){var U;(U=h(p)?Z:void 0)==null||U.apply(this,G)}),Ee("contextmenu",B,function(...G){var U;(U=h(te))==null||U.apply(this,G)}),q(e,B),ue()}var sv=ge('<div class="svelte-flow__viewport xyflow__viewport svelte-1floaup"><!></div>');function av(e,t){le(t,!1);const n=Be(),i=()=>K(r,"$viewport",n),{viewport:r}=He();de();var o=sv(),s=fe(o);Ve(s,t,"default",{}),Ce(()=>ne(o,"style",`transform: translate(${i().x??""}px, ${i().y??""}px) scale(${i().zoom??""})`)),q(e,o),ue()}function Nn(e,t){const{store:n,onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:s}=t,a=s0({onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const u=R(n.snapGrid),c=R(n.viewport);return{nodes:R(n.nodes),nodeLookup:R(n.nodeLookup),edges:R(n.edges),nodeExtent:R(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:R(n.nodeOrigin),multiSelectionActive:R(n.multiselectionKeyPressed),domNode:R(n.domNode),transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:R(n.autoPanOnNodeDrag),nodesDraggable:R(n.nodesDraggable),selectNodesOnDrag:R(n.selectNodesOnDrag),nodeDragThreshold:R(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function l(u,c){if(c.disabled){a.destroy();return}a.update({domNode:u,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable,nodeClickDistance:c.nodeClickDistance})}return l(e,t),{update(u){l(e,u)},destroy(){a.destroy()}}}function lv({width:e,height:t,initialWidth:n,initialHeight:i,measuredWidth:r,measuredHeight:o}){if(r===void 0&&o===void 0){const s=e??n,a=t??i;return{width:s?`width:${s}px;`:"",height:a?`height:${a}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}var uv=ge("<div><!></div>");function cv(e,t){le(t,!1);const n=Be(),i=()=>K(B,"$nodeTypes",n),r=()=>K(ce,"$connectableStore",n),o=F(void 0,!0),s=F(void 0,!0),a=F(void 0,!0),l=F(void 0,!0);let u=v(t,"node",9),c=v(t,"id",9),d=v(t,"data",25,()=>({})),f=v(t,"selected",9,!1),g=v(t,"draggable",9,void 0),y=v(t,"selectable",9,void 0),p=v(t,"connectable",9,!0),M=v(t,"deletable",9,!0),b=v(t,"hidden",9,!1),m=v(t,"dragging",9,!1),C=v(t,"resizeObserver",9,null),E=v(t,"style",9,void 0),x=v(t,"type",9,"default"),k=v(t,"isParent",9,!1),S=v(t,"positionX",9),N=v(t,"positionY",9),A=v(t,"sourcePosition",9,void 0),I=v(t,"targetPosition",9,void 0),H=v(t,"zIndex",9),L=v(t,"measuredWidth",9,void 0),D=v(t,"measuredHeight",9,void 0),_=v(t,"initialWidth",9,void 0),O=v(t,"initialHeight",9,void 0),w=v(t,"width",9,void 0),P=v(t,"height",9,void 0),z=v(t,"dragHandle",9,void 0),T=v(t,"initialized",9,!1),V=v(t,"parentId",9,void 0),W=v(t,"nodeClickDistance",9,void 0),Z=v(t,"class",9,"");const $=He(),{nodeTypes:B,nodeDragThreshold:J,selectNodesOnDrag:te,handleNodeSelection:re,updateNodeInternals:ae}=$;let G=F(void 0,!0),U=F(null,!0);const j=Ar(),ce=ee(p());let _e=F(void 0,!0),ve=F(void 0,!0),be=F(void 0,!0);hn("svelteflow__node_id",c()),hn("svelteflow__node_connectable",ce),il(()=>{var Ne;h(U)&&((Ne=C())==null||Ne.unobserve(h(U)))});function Se(Ne){y()&&(!R(te)||!g()||R(J)>0)&&re(c()),j("nodeclick",{node:u().internals.userNode,event:Ne})}Q(()=>X(x()),()=>{Y(o,x()||"default")}),Q(()=>(i(),h(o)),()=>{Y(s,!!i()[h(o)])}),Q(()=>(i(),h(o),No),()=>{Y(a,i()[h(o)]||No)}),Q(()=>(h(s),X(x())),()=>{h(s)||console.warn("003",Oi.error003(x()))}),Q(()=>(X(w()),X(P()),X(_()),X(O()),X(L()),X(D())),()=>{Y(l,lv({width:w(),height:P(),initialWidth:_(),initialHeight:O(),measuredWidth:L(),measuredHeight:D()}))}),Q(()=>X(p()),()=>{ce.set(!!p())}),Q(()=>(h(_e),h(o),h(ve),X(A()),h(be),X(I()),X(c()),h(G)),()=>{(h(_e)&&h(o)!==h(_e)||h(ve)&&A()!==h(ve)||h(be)&&I()!==h(be))&&requestAnimationFrame(()=>ae(new Map([[c(),{id:c(),nodeElement:h(G),force:!0}]]))),Y(_e,h(o)),Y(ve,A()),Y(be,I())}),Q(()=>(X(C()),h(G),h(U),X(T())),()=>{C()&&(h(G)!==h(U)||!T())&&(h(U)&&C().unobserve(h(U)),h(G)&&C().observe(h(G)),Y(U,h(G)))}),Qe(),de(!0);var We=Fe(),Ie=pe(We);{var Xe=Ne=>{var we=uv();const Et=oe(()=>It(lt(["svelte-flow__node",`svelte-flow__node-${h(o)}`,Z()])));var mt=fe(we);ja(mt,()=>h(a),(Ae,qe)=>{qe(Ae,{get data(){return d()},get id(){return c()},get selected(){return f()},get selectable(){return y()},get deletable(){return M()},get sourcePosition(){return A()},get targetPosition(){return I()},get zIndex(){return H()},get dragging(){return m()},get draggable(){return g()},get dragHandle(){return z()},get parentId(){return V()},get type(){return h(o)},get isConnectable(){return r()},get positionAbsoluteX(){return S()},get positionAbsoluteY(){return N()},get width(){return w()},get height(){return P()}})}),ot(we,(Ae,qe)=>Nn==null?void 0:Nn(Ae,qe),()=>({nodeId:c(),isSelectable:y(),disabled:!1,handleSelector:z(),noDragClass:"nodrag",nodeClickDistance:W(),onNodeMouseDown:re,onDrag:(Ae,qe,Re,Te)=>{j("nodedrag",{event:Ae,targetNode:Re,nodes:Te})},onDragStart:(Ae,qe,Re,Te)=>{j("nodedragstart",{event:Ae,targetNode:Re,nodes:Te})},onDragStop:(Ae,qe,Re,Te)=>{j("nodedragstop",{event:Ae,targetNode:Re,nodes:Te})},store:$})),Tn(we,Ae=>Y(G,Ae),()=>h(G)),ct(()=>Ee("click",we,Se)),ct(()=>Ee("mouseenter",we,Ae=>j("nodemouseenter",{node:u(),event:Ae}))),ct(()=>Ee("mouseleave",we,Ae=>j("nodemouseleave",{node:u(),event:Ae}))),ct(()=>Ee("mousemove",we,Ae=>j("nodemousemove",{node:u(),event:Ae}))),ct(()=>Ee("contextmenu",we,Ae=>j("nodecontextmenu",{node:u(),event:Ae}))),Ce(()=>{ne(we,"data-id",c()),Wo(we,h(Et),""),ne(we,"style",`${E()??""??""};${h(l).width??""}${h(l).height??""}`),Oe(we,"dragging",m()),Oe(we,"selected",f()),Oe(we,"draggable",g()),Oe(we,"connectable",p()),Oe(we,"selectable",y()),Oe(we,"nopan",g()),Oe(we,"parent",k()),Le(we,"z-index",H()),Le(we,"transform",`translate(${S()??""}px, ${N()??""}px)`),Le(we,"visibility",T()?"visible":"hidden")}),q(Ne,we)};De(Ie,Ne=>{b()||Ne(Xe)})}q(e,We),ue()}var dv=ge('<div class="svelte-flow__nodes svelte-tf4uy4"></div>');function fv(e,t){le(t,!1);const n=Be(),i=()=>K(u,"$visibleNodes",n),r=()=>K(c,"$nodesDraggable",n),o=()=>K(f,"$elementsSelectable",n),s=()=>K(d,"$nodesConnectable",n),a=()=>K(y,"$parentLookup",n);let l=v(t,"nodeClickDistance",8,0);const{visibleNodes:u,nodesDraggable:c,nodesConnectable:d,elementsSelectable:f,updateNodeInternals:g,parentLookup:y}=He(),p=typeof ResizeObserver>"u"?null:new ResizeObserver(b=>{const m=new Map;b.forEach(C=>{const E=C.target.getAttribute("data-id");m.set(E,{id:E,nodeElement:C.target,force:!0})}),g(m)});il(()=>{p==null||p.disconnect()}),de();var M=dv();An(M,5,i,b=>b.id,(b,m)=>{var C=oe(()=>!!h(m).selected),E=oe(()=>!!h(m).hidden),x=oe(()=>!!(h(m).draggable||r()&&typeof h(m).draggable>"u")),k=oe(()=>!!(h(m).selectable||o()&&typeof h(m).selectable>"u")),S=oe(()=>!!(h(m).connectable||s()&&typeof h(m).connectable>"u")),N=oe(()=>h(m).deletable??!0),A=oe(()=>a().has(h(m).id)),I=oe(()=>h(m).type??"default"),H=oe(()=>h(m).internals.z??0),L=oe(()=>Hg(h(m)));cv(b,{get node(){return h(m)},get id(){return h(m).id},get data(){return h(m).data},get selected(){return h(C)},get hidden(){return h(E)},get draggable(){return h(x)},get selectable(){return h(k)},get connectable(){return h(S)},get deletable(){return h(N)},get positionX(){return h(m).internals.positionAbsolute.x},get positionY(){return h(m).internals.positionAbsolute.y},get isParent(){return h(A)},get style(){return h(m).style},get class(){return h(m).class},get type(){return h(I)},get sourcePosition(){return h(m).sourcePosition},get targetPosition(){return h(m).targetPosition},get dragging(){return h(m).dragging},get zIndex(){return h(H)},get dragHandle(){return h(m).dragHandle},get initialized(){return h(L)},get width(){return h(m).width},get height(){return h(m).height},get initialWidth(){return h(m).initialWidth},get initialHeight(){return h(m).initialHeight},get measuredWidth(){return h(m).measured.width},get measuredHeight(){return h(m).measured.height},get parentId(){return h(m).parentId},resizeObserver:p,get nodeClickDistance(){return l()},$$events:{nodeclick(D){ye.call(this,t,D)},nodemouseenter(D){ye.call(this,t,D)},nodemousemove(D){ye.call(this,t,D)},nodemouseleave(D){ye.call(this,t,D)},nodedrag(D){ye.call(this,t,D)},nodedragstart(D){ye.call(this,t,D)},nodedragstop(D){ye.call(this,t,D)},nodecontextmenu(D){ye.call(this,t,D)}}})}),q(e,M),ue()}var hv=Ge('<svg><g role="img"><!></g></svg>');function gv(e,t){le(t,!1);const n=Be(),i=()=>K(B,"$edgeTypes",n),r=()=>K(J,"$flowId",n),o=()=>K(te,"$elementsSelectable",n),s=()=>K($,"$edgeLookup",n),a=F(void 0,!0),l=F(void 0,!0),u=F(void 0,!0),c=F(void 0,!0),d=F(void 0,!0);let f=v(t,"id",9),g=v(t,"type",9,"default"),y=v(t,"source",9,""),p=v(t,"target",9,""),M=v(t,"data",25,()=>({})),b=v(t,"style",9,void 0),m=v(t,"zIndex",9,void 0),C=v(t,"animated",9,!1),E=v(t,"selected",9,!1),x=v(t,"selectable",9,void 0),k=v(t,"deletable",9,void 0),S=v(t,"hidden",9,!1),N=v(t,"label",9,void 0),A=v(t,"labelStyle",9,void 0),I=v(t,"markerStart",9,void 0),H=v(t,"markerEnd",9,void 0),L=v(t,"sourceHandle",9,void 0),D=v(t,"targetHandle",9,void 0),_=v(t,"sourceX",9),O=v(t,"sourceY",9),w=v(t,"targetX",9),P=v(t,"targetY",9),z=v(t,"sourcePosition",9),T=v(t,"targetPosition",9),V=v(t,"ariaLabel",9,void 0),W=v(t,"interactionWidth",9,void 0),Z=v(t,"class",9,"");hn("svelteflow__edge_id",f());const{edgeLookup:$,edgeTypes:B,flowId:J,elementsSelectable:te}=He(),re=Ar(),ae=$l();function G(ve){const be=s().get(f());be&&(ae(f()),re("edgeclick",{event:ve,edge:be}))}function U(ve,be){const Se=s().get(f());Se&&re(be,{event:ve,edge:Se})}Q(()=>X(g()),()=>{Y(a,g()||"default")}),Q(()=>(i(),h(a),Mo),()=>{Y(l,i()[h(a)]||Mo)}),Q(()=>(X(I()),r()),()=>{Y(u,I()?`url('#${Co(I(),r())}')`:void 0)}),Q(()=>(X(H()),r()),()=>{Y(c,H()?`url('#${Co(H(),r())}')`:void 0)}),Q(()=>(X(x()),o()),()=>{Y(d,x()??o())}),Qe(),de(!0);var j=Fe(),ce=pe(j);{var _e=ve=>{var be=hv(),Se=fe(be);const We=oe(()=>It(lt(["svelte-flow__edge",Z()])));var Ie=fe(Se),Xe=oe(()=>k()??!0);ja(Ie,()=>h(l),(Ne,we)=>{we(Ne,{get id(){return f()},get source(){return y()},get target(){return p()},get sourceX(){return _()},get sourceY(){return O()},get targetX(){return w()},get targetY(){return P()},get sourcePosition(){return z()},get targetPosition(){return T()},get animated(){return C()},get selected(){return E()},get label(){return N()},get labelStyle(){return A()},get data(){return M()},get style(){return b()},get interactionWidth(){return W()},get selectable(){return h(d)},get deletable(){return h(Xe)},get type(){return h(a)},get sourceHandleId(){return L()},get targetHandleId(){return D()},get markerStart(){return h(u)},get markerEnd(){return h(c)}})}),Ce(()=>{Le(be,"z-index",m()),Kn(Se,h(We),""),ne(Se,"data-id",f()),ne(Se,"aria-label",V()===null?void 0:V()?V():`Edge from ${y()} to ${p()}`),Oe(Se,"animated",C()),Oe(Se,"selected",E()),Oe(Se,"selectable",h(d))}),Ee("click",Se,G),Ee("contextmenu",Se,Ne=>{U(Ne,"edgecontextmenu")}),Ee("mouseenter",Se,Ne=>{U(Ne,"edgemouseenter")}),Ee("mouseleave",Se,Ne=>{U(Ne,"edgemouseleave")}),q(ve,be)};De(ce,ve=>{S()||ve(_e)})}q(e,j),ue()}function vv(e,t){le(t,!1);let n=v(t,"onMount",8,void 0),i=v(t,"onDestroy",8,void 0);pn(()=>{var r;return(r=n())==null||r(),i()}),de(),ue()}var mv=Ge("<defs></defs>");function yv(e,t){le(t,!1);const n=Be(),i=()=>K(r,"$markers",n),{markers:r}=He();de();var o=mv();An(o,5,i,s=>s.id,(s,a)=>{xv(s,Nt(()=>h(a)))}),q(e,o),ue()}var pv=Ge('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),_v=Ge('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),wv=Ge('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function xv(e,t){le(t,!1);let n=v(t,"id",8),i=v(t,"type",8),r=v(t,"width",8,12.5),o=v(t,"height",8,12.5),s=v(t,"markerUnits",8,"strokeWidth"),a=v(t,"orient",8,"auto-start-reverse"),l=v(t,"color",8,void 0),u=v(t,"strokeWidth",8,void 0);de();var c=wv(),d=fe(c);{var f=y=>{var p=pv();Ce(()=>{ne(p,"stroke",l()),ne(p,"stroke-width",u())}),q(y,p)},g=y=>{var p=Fe(),M=pe(p);{var b=m=>{var C=_v();Ce(()=>{ne(C,"stroke",l()),ne(C,"stroke-width",u()),ne(C,"fill",l())}),q(m,C)};De(M,m=>{i()===gr.ArrowClosed&&m(b)},!0)}q(y,p)};De(d,y=>{i()===gr.Arrow?y(f):y(g,!1)})}Ce(()=>{ne(c,"id",n()),ne(c,"markerWidth",`${r()}`),ne(c,"markerHeight",`${o()}`),ne(c,"markerUnits",s()),ne(c,"orient",a())}),q(e,c),ue()}var bv=ge('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function Ev(e,t){le(t,!1);const n=Be(),i=()=>K(s,"$visibleEdges",n),r=()=>K(u,"$elementsSelectable",n);let o=v(t,"defaultEdgeOptions",8);const{visibleEdges:s,edgesInitialized:a,edges:{setDefaultOptions:l},elementsSelectable:u}=He();pn(()=>{o()&&l(o())}),de();var c=bv(),d=fe(c),f=fe(d);yv(f,{});var g=ie(d,2);An(g,1,i,M=>M.id,(M,b)=>{var m=oe(()=>h(b).selectable??r()),C=oe(()=>h(b).type||"default");gv(M,{get id(){return h(b).id},get source(){return h(b).source},get target(){return h(b).target},get data(){return h(b).data},get style(){return h(b).style},get animated(){return h(b).animated},get selected(){return h(b).selected},get selectable(){return h(m)},get deletable(){return h(b).deletable},get hidden(){return h(b).hidden},get label(){return h(b).label},get labelStyle(){return h(b).labelStyle},get markerStart(){return h(b).markerStart},get markerEnd(){return h(b).markerEnd},get sourceHandle(){return h(b).sourceHandle},get targetHandle(){return h(b).targetHandle},get sourceX(){return h(b).sourceX},get sourceY(){return h(b).sourceY},get targetX(){return h(b).targetX},get targetY(){return h(b).targetY},get sourcePosition(){return h(b).sourcePosition},get targetPosition(){return h(b).targetPosition},get ariaLabel(){return h(b).ariaLabel},get interactionWidth(){return h(b).interactionWidth},get class(){return h(b).class},get type(){return h(C)},get zIndex(){return h(b).zIndex},$$events:{edgeclick(E){ye.call(this,t,E)},edgecontextmenu(E){ye.call(this,t,E)},edgemouseenter(E){ye.call(this,t,E)},edgemouseleave(E){ye.call(this,t,E)}}})});var y=ie(g,2);{var p=M=>{vv(M,{onMount:()=>{si(a,!0)},onDestroy:()=>{si(a,!1)}})};De(y,M=>{i().length>0&&M(p)})}q(e,c),ue()}var Sv=ge('<div class="svelte-flow__selection svelte-1iugwpu"></div>');function nu(e,t){let n=v(t,"x",8,0),i=v(t,"y",8,0),r=v(t,"width",8,0),o=v(t,"height",8,0),s=v(t,"isVisible",8,!0);var a=Fe(),l=pe(a);{var u=c=>{var d=Sv();Ce(()=>{Le(d,"width",typeof r()=="string"?r():`${r()}px`),Le(d,"height",typeof o()=="string"?o():`${o()}px`),Le(d,"transform",`translate(${n()}px, ${i()}px)`)}),q(c,d)};De(l,c=>{s()&&c(u)})}q(e,a)}function kv(e,t){le(t,!1);const n=Be(),i=()=>K(o,"$selectionRect",n),r=()=>K(s,"$selectionRectMode",n),{selectionRect:o,selectionRectMode:s}=He();de();var a=oe(()=>!!(i()&&r()==="user")),l=oe(()=>{var f;return(f=i())==null?void 0:f.width}),u=oe(()=>{var f;return(f=i())==null?void 0:f.height}),c=oe(()=>{var f;return(f=i())==null?void 0:f.x}),d=oe(()=>{var f;return(f=i())==null?void 0:f.y});nu(e,{get isVisible(){return h(a)},get width(){return h(l)},get height(){return h(u)},get x(){return h(c)},get y(){return h(d)}}),ue()}var Cv=ge('<div class="selection-wrapper nopan svelte-5pxri" role="button" tabindex="-1"><!></div>');function Nv(e,t){le(t,!1);const n=Be(),i=()=>K(a,"$selectionRectMode",n),r=()=>K(u,"$nodeLookup",n),o=()=>K(l,"$nodes",n),s=He(),{selectionRectMode:a,nodes:l,nodeLookup:u}=s,c=Ar();let d=F(null);function f(b){const m=o().filter(C=>C.selected);c("selectioncontextmenu",{nodes:m,event:b})}function g(b){const m=o().filter(C=>C.selected);c("selectionclick",{nodes:m,event:b})}Q(()=>(i(),r(),o()),()=>{i()==="nodes"&&(Y(d,Hr(r(),{filter:b=>!!b.selected})),o())}),Qe(),de();var y=Fe(),p=pe(y);{var M=b=>{var m=Cv(),C=fe(m);nu(C,{width:"100%",height:"100%",x:0,y:0}),ot(m,(E,x)=>Nn==null?void 0:Nn(E,x),()=>({disabled:!1,store:s,onDrag:(E,x,k,S)=>{c("nodedrag",{event:E,targetNode:null,nodes:S})},onDragStart:(E,x,k,S)=>{c("nodedragstart",{event:E,targetNode:null,nodes:S})},onDragStop:(E,x,k,S)=>{c("nodedragstop",{event:E,targetNode:null,nodes:S})}})),ct(()=>Ee("contextmenu",m,f)),ct(()=>Ee("click",m,g)),ct(()=>Ee("keyup",m,()=>{})),Ce(()=>ne(m,"style",`width: ${h(d).width??""}px; height: ${h(d).height??""}px; transform: translate(${h(d).x??""}px, ${h(d).y??""}px)`)),q(b,m)};De(p,b=>{i()==="nodes"&&h(d)&&Rt(h(d).x)&&Rt(h(d).y)&&b(M)})}q(e,y),ue()}function ke(e,t){let{enabled:n=!0,trigger:i,type:r="keydown"}=t;function o(s){const a=Array.isArray(i)?i:[i],l={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const u of a){const c={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:d,key:f,callback:g,preventDefault:y,enabled:p}=c;if(p){if(d.length&&!(Array.isArray(d)?d:[d]).map(m=>typeof m=="string"?[m]:m).some(m=>m.every(C=>l[C])))continue;if(s.key===f){y&&s.preventDefault();const M={node:e,trigger:c,originalEvent:s};e.dispatchEvent(new CustomEvent("shortcut",{detail:M})),g==null||g(M)}}}}return n&&e.addEventListener(r,o),{update:s=>{const{enabled:a=!0,type:l="keydown"}=s;n&&(!a||r!==l)?e.removeEventListener(r,o):!n&&a&&e.addEventListener(l,o),n=a,r=l,i=s.trigger},destroy:()=>{e.removeEventListener(r,o)}}}function Mv(e,t){le(t,!1);let n=v(t,"selectionKey",8,"Shift"),i=v(t,"multiSelectionKey",24,()=>mr()?"Meta":"Control"),r=v(t,"deleteKey",8,"Backspace"),o=v(t,"panActivationKey",8," "),s=v(t,"zoomActivationKey",24,()=>mr()?"Meta":"Control");const{selectionKeyPressed:a,multiselectionKeyPressed:l,deleteKeyPressed:u,panActivationKeyPressed:c,zoomActivationKeyPressed:d,selectionRect:f}=He();function g(m){return m!==null&&typeof m=="object"}function y(m){return g(m)?m.modifier||[]:[]}function p(m){return m==null?"":g(m)?m.key:m}function M(m,C){return(Array.isArray(m)?m:[m]).map(x=>{const k=p(x);return{key:k,modifier:y(x),enabled:k!==null,callback:C}})}function b(){f.set(null),a.set(!1),l.set(!1),u.set(!1),c.set(!1),d.set(!1)}de(),Ee("blur",rt,b),Ee("contextmenu",rt,b),ot(rt,(m,C)=>ke==null?void 0:ke(m,C),()=>({trigger:M(n(),()=>a.set(!0)),type:"keydown"})),ot(rt,(m,C)=>ke==null?void 0:ke(m,C),()=>({trigger:M(n(),()=>a.set(!1)),type:"keyup"})),ot(rt,(m,C)=>ke==null?void 0:ke(m,C),()=>({trigger:M(i(),()=>l.set(!0)),type:"keydown"})),ot(rt,(m,C)=>ke==null?void 0:ke(m,C),()=>({trigger:M(i(),()=>l.set(!1)),type:"keyup"})),ot(rt,(m,C)=>ke==null?void 0:ke(m,C),()=>({trigger:M(r(),m=>{!(m.originalEvent.ctrlKey||m.originalEvent.metaKey||m.originalEvent.shiftKey)&&!Xg(m.originalEvent)&&u.set(!0)}),type:"keydown"})),ot(rt,(m,C)=>ke==null?void 0:ke(m,C),()=>({trigger:M(r(),()=>u.set(!1)),type:"keyup"})),ot(rt,(m,C)=>ke==null?void 0:ke(m,C),()=>({trigger:M(o(),()=>c.set(!0)),type:"keydown"})),ot(rt,(m,C)=>ke==null?void 0:ke(m,C),()=>({trigger:M(o(),()=>c.set(!1)),type:"keyup"})),ot(rt,(m,C)=>ke==null?void 0:ke(m,C),()=>({trigger:M(s(),()=>d.set(!0)),type:"keydown"})),ot(rt,(m,C)=>ke==null?void 0:ke(m,C),()=>({trigger:M(s(),()=>d.set(!1)),type:"keyup"})),ue()}var Pv=Ge('<path fill="none" class="svelte-flow__connection-path"></path>'),Av=Ge('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function Tv(e,t){le(t,!1);const n=Be(),i=()=>K(f,"$connection",n),r=()=>K(g,"$connectionLineType",n),o=()=>K(c,"$width",n),s=()=>K(d,"$height",n);let a=v(t,"containerStyle",8,""),l=v(t,"style",8,""),u=v(t,"isCustomComponent",8,!1);const{width:c,height:d,connection:f,connectionLineType:g}=He();let y=F(null);Q(()=>(i(),X(u()),r(),h(y),ko),()=>{if(i().inProgress&&!u()){const{from:m,to:C,fromPosition:E,toPosition:x}=i(),k={sourceX:m.x,sourceY:m.y,sourcePosition:E,targetX:C.x,targetY:C.y,targetPosition:x};switch(r()){case Cn.Bezier:(S=>Y(y,S[0]))(Xl(k));break;case Cn.Step:(S=>Y(y,S[0]))(yr({...k,borderRadius:0}));break;case Cn.SmoothStep:(S=>Y(y,S[0]))(yr(k));break;default:(S=>Y(y,S[0]))(ko(k))}}}),Qe(),de();var p=Fe(),M=pe(p);{var b=m=>{var C=Av(),E=fe(C);const x=oe(()=>It(lt(["svelte-flow__connection",Pg(i().isValid)])));var k=fe(E);Ve(k,t,"connectionLine",{});var S=ie(k);{var N=A=>{var I=Pv();Ce(()=>{ne(I,"d",h(y)),ne(I,"style",l())}),q(A,I)};De(S,A=>{u()||A(N)})}Ce(()=>{ne(C,"width",o()),ne(C,"height",s()),ne(C,"style",a()),Kn(E,h(x),"")}),q(m,C)};De(M,m=>{i().inProgress&&m(b)})}q(e,p),ue()}var zv=ge("<div><!></div>");function iu(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]),i=Pe(n,["position","style","class"]);le(t,!1);const r=Be(),o=()=>K(c,"$selectionRectMode",r),s=F();let a=v(t,"position",8,"top-right"),l=v(t,"style",8,void 0),u=v(t,"class",8,void 0);const{selectionRectMode:c}=He();Q(()=>X(a()),()=>{Y(s,`${a()}`.split("-"))}),Qe(),de();var d=zv();let f;var g=fe(d);Ve(g,t,"default",{}),Ce(()=>{f=oi(d,f,{class:lt(["svelte-flow__panel",u(),...h(s)]),style:l(),...i}),Le(d,"pointer-events",o()?"none":"")}),q(e,d),ue()}var Iv=ge('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function Ov(e,t){le(t,!1);let n=v(t,"proOptions",8,void 0),i=v(t,"position",8,"bottom-right");de();var r=Fe(),o=pe(r);{var s=a=>{iu(a,{get position(){return i()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(l,u)=>{var c=Iv();q(l,c)},$$slots:{default:!0}})};De(o,a=>{var l;(l=n())!=null&&l.hideAttribution||a(s)})}q(e,r),ue()}function fa(e,{nodeTypes:t,edgeTypes:n,minZoom:i,maxZoom:r,translateExtent:o,paneClickDistance:s}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),i!==void 0&&e.setMinZoom(i),r!==void 0&&e.setMaxZoom(r),o!==void 0&&e.setTranslateExtent(o),s!==void 0&&e.setPaneClickDistance(s)}const Dv=e=>Object.keys(e);function ha(e,t){Dv(t).forEach(n=>{const i=t[n];i!==void 0&&e[n].set(i)})}function Hv(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Rv(e="light"){return ft("light",n=>{if(e!=="system"){n(e);return}const i=Hv(),r=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",r),()=>{i==null||i.removeEventListener("change",r)}})}var Lv=ge('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),Vv=ge("<!> <!>",1),Xv=ge("<div><!> <!> <!> <!></div>");function Yv(e,t){const n=Vc(t),i=Pe(t,["children","$$slots","$$events","$$legacy"]),r=Pe(i,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);le(t,!1);const o=Be(),s=()=>K(m(),"$viewport",o),a=()=>K(cu,"$initialized",o),l=()=>K(h(u),"$colorModeClass",o),u=F();let c=v(t,"id",8,"1"),d=v(t,"nodes",8),f=v(t,"edges",8),g=v(t,"fitView",8,void 0),y=v(t,"fitViewOptions",8,void 0),p=v(t,"minZoom",8,void 0),M=v(t,"maxZoom",8,void 0),b=v(t,"initialViewport",8,void 0),m=v(t,"viewport",8,void 0),C=v(t,"nodeTypes",8,void 0),E=v(t,"edgeTypes",8,void 0),x=v(t,"selectionKey",8,void 0),k=v(t,"selectionMode",8,void 0),S=v(t,"panActivationKey",8,void 0),N=v(t,"multiSelectionKey",8,void 0),A=v(t,"zoomActivationKey",8,void 0),I=v(t,"nodesDraggable",8,void 0),H=v(t,"nodesConnectable",8,void 0),L=v(t,"nodeDragThreshold",8,void 0),D=v(t,"elementsSelectable",8,void 0),_=v(t,"snapGrid",8,void 0),O=v(t,"deleteKey",8,void 0),w=v(t,"connectionRadius",8,void 0),P=v(t,"connectionLineType",8,void 0),z=v(t,"connectionMode",24,()=>vn.Strict),T=v(t,"connectionLineStyle",8,""),V=v(t,"connectionLineContainerStyle",8,""),W=v(t,"onMoveStart",8,void 0),Z=v(t,"onMove",8,void 0),$=v(t,"onMoveEnd",8,void 0),B=v(t,"isValidConnection",8,void 0),J=v(t,"translateExtent",8,void 0),te=v(t,"nodeExtent",8,void 0),re=v(t,"onlyRenderVisibleElements",8,void 0),ae=v(t,"panOnScrollMode",24,()=>$t.Free),G=v(t,"preventScrolling",8,!0),U=v(t,"zoomOnScroll",8,!0),j=v(t,"zoomOnDoubleClick",8,!0),ce=v(t,"zoomOnPinch",8,!0),_e=v(t,"panOnScroll",8,!1),ve=v(t,"panOnDrag",8,!0),be=v(t,"selectionOnDrag",8,void 0),Se=v(t,"autoPanOnConnect",8,!0),We=v(t,"autoPanOnNodeDrag",8,!0),Ie=v(t,"onerror",8,void 0),Xe=v(t,"ondelete",8,void 0),Ne=v(t,"onedgecreate",8,void 0),we=v(t,"attributionPosition",8,void 0),Et=v(t,"proOptions",8,void 0),mt=v(t,"defaultEdgeOptions",8,void 0),Ae=v(t,"width",8,void 0),qe=v(t,"height",8,void 0),Re=v(t,"colorMode",8,"light"),Te=v(t,"onconnect",8,void 0),Li=v(t,"onconnectstart",8,void 0),Vi=v(t,"onconnectend",8,void 0),Ke=v(t,"onbeforedelete",8,void 0),tt=v(t,"oninit",8,void 0),Ye=v(t,"nodeOrigin",8,void 0),nt=v(t,"paneClickDistance",8,0),St=v(t,"nodeClickDistance",8,0),ls=v(t,"defaultMarkerColor",8,"#b1b1b7"),au=v(t,"style",8,void 0),lu=v(t,"class",8,void 0),Yr=F(),Fn=F(),Gn=F();const uu=s()||b(),$e=yc(rs)?He():tv({nodes:R(d()),edges:R(f()),width:Ae(),height:qe(),fitView:g(),nodeOrigin:Ye(),nodeExtent:te()});pn(()=>($e.width.set(h(Fn)),$e.height.set(h(Gn)),$e.domNode.set(h(Yr)),$e.syncNodeStores(d()),$e.syncEdgeStores(f()),$e.syncViewport(m()),g()!==void 0&&$e.fitViewOnInit.set(g()),y()&&$e.fitViewOptions.set(y()),fa($e,{nodeTypes:C(),edgeTypes:E(),minZoom:p(),maxZoom:M(),translateExtent:J(),paneClickDistance:nt()}),()=>{$e.reset()}));const{initialized:cu}=$e;let Br=F(!1);Q(()=>(h(Fn),h(Gn)),()=>{h(Fn)!==void 0&&h(Gn)!==void 0&&($e.width.set(h(Fn)),$e.height.set(h(Gn)))}),Q(()=>(h(Br),a(),X(tt())),()=>{var Ze;!h(Br)&&a()&&((Ze=tt())==null||Ze(),Y(Br,!0))}),Q(()=>(X(c()),X(P()),X(w()),X(k()),X(_()),X(ls()),X(I()),X(H()),X(D()),X(re()),X(B()),X(Se()),X(We()),X(Ie()),X(Xe()),X(Ne()),X(z()),X(L()),X(Te()),X(Li()),X(Vi()),X(Ke()),X(Ye()),ha),()=>{const Ze={flowId:c(),connectionLineType:P(),connectionRadius:w(),selectionMode:k(),snapGrid:_(),defaultMarkerColor:ls(),nodesDraggable:I(),nodesConnectable:H(),elementsSelectable:D(),onlyRenderVisibleElements:re(),isValidConnection:B(),autoPanOnConnect:Se(),autoPanOnNodeDrag:We(),onerror:Ie(),ondelete:Xe(),onedgecreate:Ne(),connectionMode:z(),nodeDragThreshold:L(),onconnect:Te(),onconnectstart:Li(),onconnectend:Vi(),onbeforedelete:Ke(),nodeOrigin:Ye()};ha($e,Ze)}),Q(()=>(X(C()),X(E()),X(p()),X(M()),X(J()),X(nt())),()=>{fa($e,{nodeTypes:C(),edgeTypes:E(),minZoom:p(),maxZoom:M(),translateExtent:J(),paneClickDistance:nt()})}),Q(()=>X(Re()),()=>{Kc(Y(u,Rv(Re())),"$colorModeClass",o)}),Qe(),de();var Wt=Xv();let us;var cs=fe(Wt);Mv(cs,{get selectionKey(){return x()},get deleteKey(){return O()},get panActivationKey(){return S()},get multiSelectionKey(){return N()},get zoomActivationKey(){return A()}});var ds=ie(cs,2),du=oe(()=>ae()===void 0?$t.Free:ae()),fu=oe(()=>G()===void 0?!0:G()),hu=oe(()=>U()===void 0?!0:U()),gu=oe(()=>j()===void 0?!0:j()),vu=oe(()=>ce()===void 0?!0:ce()),mu=oe(()=>_e()===void 0?!1:_e()),yu=oe(()=>ve()===void 0?!0:ve()),pu=oe(()=>nt()===void 0?0:nt());iv(ds,{initialViewport:uu,get onMoveStart(){return W()},get onMove(){return Z()},get onMoveEnd(){return $()},get panOnScrollMode(){return h(du)},get preventScrolling(){return h(fu)},get zoomOnScroll(){return h(hu)},get zoomOnDoubleClick(){return h(gu)},get zoomOnPinch(){return h(vu)},get panOnScroll(){return h(mu)},get panOnDrag(){return h(yu)},get paneClickDistance(){return h(pu)},children:(Ze,Bm)=>{var wu=oe(()=>ve()===void 0?!0:ve());ov(Ze,{get panOnDrag(){return h(wu)},get selectionOnDrag(){return be()},$$events:{paneclick(qn){ye.call(this,t,qn)},panecontextmenu(qn){ye.call(this,t,qn)}},children:(qn,Wm)=>{var hs=Vv(),gs=pe(hs);av(gs,{children:(bu,Km)=>{var vs=Lv(),ms=pe(vs);Ev(ms,{get defaultEdgeOptions(){return mt()},$$events:{edgeclick(me){ye.call(this,t,me)},edgecontextmenu(me){ye.call(this,t,me)},edgemouseenter(me){ye.call(this,t,me)},edgemouseleave(me){ye.call(this,t,me)}}});var ys=ie(ms,2);Tv(ys,{get containerStyle(){return V()},get style(){return T()},isCustomComponent:n.connectionLine,$$slots:{connectionLine:(me,Fm)=>{var _s=Fe(),Su=pe(_s);Ve(Su,t,"connectionLine",{}),q(me,_s)}}});var ps=ie(ys,6);fv(ps,{get nodeClickDistance(){return St()},$$events:{nodeclick(me){ye.call(this,t,me)},nodemouseenter(me){ye.call(this,t,me)},nodemousemove(me){ye.call(this,t,me)},nodemouseleave(me){ye.call(this,t,me)},nodedragstart(me){ye.call(this,t,me)},nodedrag(me){ye.call(this,t,me)},nodedragstop(me){ye.call(this,t,me)},nodecontextmenu(me){ye.call(this,t,me)}}});var Eu=ie(ps,2);Nv(Eu,{$$events:{selectionclick(me){ye.call(this,t,me)},selectioncontextmenu(me){ye.call(this,t,me)},nodedragstart(me){ye.call(this,t,me)},nodedrag(me){ye.call(this,t,me)},nodedragstop(me){ye.call(this,t,me)}}}),q(bu,vs)},$$slots:{default:!0}});var xu=ie(gs,2);kv(xu,{}),q(qn,hs)},$$slots:{default:!0}})},$$slots:{default:!0}});var fs=ie(ds,2);Ov(fs,{get proOptions(){return Et()},get position(){return we()}});var _u=ie(fs,2);Ve(_u,t,"default",{}),Tn(Wt,Ze=>Y(Yr,Ze),()=>h(Yr)),Ce(()=>us=oi(Wt,us,{style:au(),class:lt(["svelte-flow",lu(),l()]),"data-testid":"svelte-flow__wrapper",...r,role:"application"},"svelte-12wlba6")),or(Wt,"clientWidth",Ze=>Y(Fn,Ze)),or(Wt,"clientHeight",Ze=>Y(Gn,Ze)),Ee("dragover",Wt,function(Ze){ye.call(this,t,Ze)}),Ee("drop",Wt,function(Ze){ye.call(this,t,Ze)}),q(e,Wt),ue()}var Bv=ge("<button><!></button>");function Ui(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]),i=Pe(n,["class"]);le(t,!1);let r=v(t,"class",8,void 0),o,s,a,l,u;de();var c=Bv();let d;var f=fe(c);Ve(f,t,"default",{class:"button-svg"}),Ce(()=>{d=oi(c,d,{type:"button",class:lt(["svelte-flow__controls-button",r()]),...i}),Le(c,"--xy-controls-button-background-color-props",o),Le(c,"--xy-controls-button-background-color-hover-props",s),Le(c,"--xy-controls-button-color-props",a),Le(c,"--xy-controls-button-color-hover-props",l),Le(c,"--xy-controls-button-border-color-props",u)}),Ee("click",c,function(g){ye.call(this,t,g)}),q(e,c),ue()}var Wv=Ge('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function Kv(e){var t=Wv();q(e,t)}var Fv=Ge('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function Gv(e){var t=Fv();q(e,t)}var qv=Ge('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function Zv(e){var t=qv();q(e,t)}var Uv=Ge('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function Jv(e){var t=Uv();q(e,t)}var jv=Ge('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function Qv(e){var t=jv();q(e,t)}var $v=ge("<!> <!>",1),em=ge("<!> <!> <!> <!> <!> <!>",1);function tm(e,t){le(t,!1);const n=Be(),i=()=>K(P,"$nodesDraggable",n),r=()=>K(z,"$nodesConnectable",n),o=()=>K(T,"$elementsSelectable",n),s=()=>K(_,"$viewport",n),a=()=>K(O,"$minZoom",n),l=()=>K(w,"$maxZoom",n),u=F(),c=F(),d=F(),f=F();let g=v(t,"position",8,"bottom-left"),y=v(t,"showZoom",8,!0),p=v(t,"showFitView",8,!0),M=v(t,"showLock",8,!0),b=v(t,"buttonBgColor",8,void 0),m=v(t,"buttonBgColorHover",8,void 0),C=v(t,"buttonColor",8,void 0),E=v(t,"buttonColorHover",8,void 0),x=v(t,"buttonBorderColor",8,void 0),k=v(t,"ariaLabel",8,void 0),S=v(t,"style",8,void 0),N=v(t,"orientation",8,"vertical"),A=v(t,"fitViewOptions",8,void 0),I=v(t,"class",8,"");const{zoomIn:H,zoomOut:L,fitView:D,viewport:_,minZoom:O,maxZoom:w,nodesDraggable:P,nodesConnectable:z,elementsSelectable:T}=He(),V={bgColor:b(),bgColorHover:m(),color:C(),colorHover:E(),borderColor:x()},W=()=>{H()},Z=()=>{L()},$=()=>{D(A())},B=()=>{Y(u,!h(u)),P.set(h(u)),z.set(h(u)),T.set(h(u))};Q(()=>(i(),r(),o()),()=>{Y(u,i()||r()||o())}),Q(()=>(s(),a()),()=>{Y(c,s().zoom<=a())}),Q(()=>(s(),l()),()=>{Y(d,s().zoom>=l())}),Q(()=>X(N()),()=>{Y(f,N()==="horizontal"?"horizontal":"vertical")}),Qe(),de();var J=oe(()=>lt(["svelte-flow__controls",h(f),I()])),te=oe(()=>k()??"Svelte Flow controls");iu(e,{get class(){return h(J)},get position(){return g()},"data-testid":"svelte-flow__controls",get"aria-label"(){return h(te)},get style(){return S()},children:(re,ae)=>{var G=em(),U=pe(G);Ve(U,t,"before",{});var j=ie(U,2);{var ce=Xe=>{var Ne=$v(),we=pe(Ne);Ui(we,Nt({class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return h(d)}},V,{$$events:{click:W},children:(mt,Ae)=>{Kv(mt)},$$slots:{default:!0}}));var Et=ie(we,2);Ui(Et,Nt({class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return h(c)}},V,{$$events:{click:Z},children:(mt,Ae)=>{Gv(mt)},$$slots:{default:!0}})),q(Xe,Ne)};De(j,Xe=>{y()&&Xe(ce)})}var _e=ie(j,2);{var ve=Xe=>{Ui(Xe,Nt({class:"svelte-flow__controls-fitview",title:"fit view","aria-label":"fit view"},V,{$$events:{click:$},children:(Ne,we)=>{Zv(Ne)},$$slots:{default:!0}}))};De(_e,Xe=>{p()&&Xe(ve)})}var be=ie(_e,2);{var Se=Xe=>{Ui(Xe,Nt({class:"svelte-flow__controls-interactive",title:"toggle interactivity","aria-label":"toggle interactivity"},V,{$$events:{click:B},children:(Ne,we)=>{var Et=Fe(),mt=pe(Et);{var Ae=Re=>{Qv(Re)},qe=Re=>{Jv(Re)};De(mt,Re=>{h(u)?Re(Ae):Re(qe,!1)})}q(Ne,Et)},$$slots:{default:!0}}))};De(be,Xe=>{M()&&Xe(Se)})}var We=ie(be,2);Ve(We,t,"default",{});var Ie=ie(We,2);Ve(Ie,t,"after",{}),q(re,G)},$$slots:{default:!0}}),ue()}var Xt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Xt||(Xt={}));var nm=Ge("<circle></circle>");function im(e,t){le(t,!1);let n=v(t,"radius",8,5),i=v(t,"class",8,"");de();var r=nm();const o=oe(()=>It(lt(["svelte-flow__background-pattern","dots",i()])));Ce(()=>{ne(r,"cx",n()),ne(r,"cy",n()),ne(r,"r",n()),Kn(r,h(o),"")}),q(e,r),ue()}var rm=Ge("<path></path>");function om(e,t){le(t,!1);let n=v(t,"lineWidth",8,1),i=v(t,"dimensions",8),r=v(t,"variant",8,void 0),o=v(t,"class",8,"");de();var s=rm();const a=oe(()=>It(lt(["svelte-flow__background-pattern",r(),o()])));Ce(()=>{ne(s,"stroke-width",n()),ne(s,"d",`M${i()[0]/2} 0 V${i()[1]} M0 ${i()[1]/2} H${i()[0]}`),Kn(s,h(a),"")}),q(e,s),ue()}const sm={[Xt.Dots]:1,[Xt.Lines]:1,[Xt.Cross]:6};var am=Ge('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function lm(e,t){le(t,!1);const n=Be(),i=()=>K(E,"$flowId",n),r=()=>K(C,"$viewport",n),o=F(),s=F(),a=F(),l=F(),u=F();let c=v(t,"id",8,void 0),d=v(t,"variant",24,()=>Xt.Dots),f=v(t,"gap",8,20),g=v(t,"size",8,1),y=v(t,"lineWidth",8,1),p=v(t,"bgColor",8,void 0),M=v(t,"patternColor",8,void 0),b=v(t,"patternClass",8,void 0),m=v(t,"class",8,"");const{viewport:C,flowId:E}=He(),x=g()||sm[d()],k=d()===Xt.Dots,S=d()===Xt.Cross,N=Array.isArray(f())?f():[f(),f()];Q(()=>(i(),X(c())),()=>{Y(o,`background-pattern-${i()}-${c()?c():""}`)}),Q(()=>r(),()=>{Y(s,[N[0]*r().zoom||1,N[1]*r().zoom||1])}),Q(()=>r(),()=>{Y(a,x*r().zoom)}),Q(()=>(h(a),h(s)),()=>{Y(l,S?[h(a),h(a)]:h(s))}),Q(()=>(h(a),h(l)),()=>{Y(u,k?[h(a)/2,h(a)/2]:[h(l)[0]/2,h(l)[1]/2])}),Qe(),de();var A=am();const I=oe(()=>It(lt(["svelte-flow__background",m()])));var H=fe(A),L=fe(H);{var D=w=>{var P=oe(()=>h(a)/2);im(w,{get radius(){return h(P)},get class(){return b()}})},_=w=>{om(w,{get dimensions(){return h(l)},get variant(){return d()},get lineWidth(){return y()},get class(){return b()}})};De(L,w=>{k?w(D):w(_,!1)})}var O=ie(H);Ce(()=>{Kn(A,h(I),"svelte-1r7pe8d"),Le(A,"--xy-background-color-props",p()),Le(A,"--xy-background-pattern-color-props",M()),ne(H,"id",h(o)),ne(H,"x",r().x%h(s)[0]),ne(H,"y",r().y%h(s)[1]),ne(H,"width",h(s)[0]),ne(H,"height",h(s)[1]),ne(H,"patternTransform",`translate(-${h(u)[0]},-${h(u)[1]})`),ne(O,"fill",`url(#${h(o)})`)}),q(e,A),ue()}const ga=e=>Tg(e);function um(){const{zoomIn:e,zoomOut:t,fitView:n,onbeforedelete:i,snapGrid:r,viewport:o,width:s,height:a,minZoom:l,maxZoom:u,panZoom:c,nodes:d,edges:f,domNode:g,nodeLookup:y,nodeOrigin:p,edgeLookup:M,connectionLookup:b}=He(),m=x=>{var I,H;const k=R(y),S=ga(x)?x:k.get(x.id),N=S.parentId?Rg(S.position,S.measured,S.parentId,k,R(p)):S.position,A={...S,position:N,width:((I=S.measured)==null?void 0:I.width)??S.width,height:((H=S.measured)==null?void 0:H.height)??S.height};return Dn(A)},C=(x,k,S={replace:!1})=>{var I;const N=(I=R(y).get(x))==null?void 0:I.internals.userNode;if(!N)return;const A=typeof k=="function"?k(N):k;S.replace?d.update(H=>H.map(L=>L.id===x?ga(A)?A:{...L,...A}:L)):(Object.assign(N,A),d.update(H=>H))},E=x=>R(y).get(x);return{zoomIn:e,zoomOut:t,getInternalNode:E,getNode:x=>{var k;return(k=E(x))==null?void 0:k.internals.userNode},getNodes:x=>x===void 0?R(d):va(R(y),x),getEdge:x=>R(M).get(x),getEdges:x=>x===void 0?R(f):va(R(M),x),setZoom:(x,k)=>{const S=R(c);return S?S.scaleTo(x,{duration:k==null?void 0:k.duration}):Promise.resolve(!1)},getZoom:()=>R(o).zoom,setViewport:async(x,k)=>{const S=R(o),N=R(c);return N?(await N.setViewport({x:x.x??S.x,y:x.y??S.y,zoom:x.zoom??S.zoom},{duration:k==null?void 0:k.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>R(o),setCenter:async(x,k,S)=>{const N=typeof(S==null?void 0:S.zoom)<"u"?S.zoom:R(u),A=R(c);return A?(await A.setViewport({x:R(s)/2-x*N,y:R(a)/2-k*N,zoom:N},{duration:S==null?void 0:S.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(x,k)=>{const S=R(c);if(!S)return Promise.resolve(!1);const N=$o(x,R(s),R(a),R(l),R(u),(k==null?void 0:k.padding)??.1);return await S.setViewport(N,{duration:k==null?void 0:k.duration}),Promise.resolve(!0)},getIntersectingNodes:(x,k=!0,S)=>{const N=$s(x),A=N?x:m(x);return A?(S||R(d)).filter(I=>{const H=R(y).get(I.id);if(!H||!N&&I.id===x.id)return!1;const L=Dn(H),D=fi(L,A);return k&&D>0||D>=A.width*A.height}):[]},isNodeIntersecting:(x,k,S=!0)=>{const A=$s(x)?x:m(x);if(!A)return!1;const I=fi(A,k);return S&&I>0||I>=A.width*A.height},deleteElements:async({nodes:x=[],edges:k=[]})=>{const{nodes:S,edges:N}=await Dl({nodesToRemove:x,edgesToRemove:k,nodes:R(d),edges:R(f),onBeforeDelete:R(i)});return S&&d.update(A=>A.filter(I=>!S.some(({id:H})=>H===I.id))),N&&f.update(A=>A.filter(I=>!N.some(({id:H})=>H===I.id))),{deletedNodes:S,deletedEdges:N}},screenToFlowPosition:(x,k={snapToGrid:!0})=>{const S=R(g);if(!S)return x;const N=k.snapToGrid?R(r):!1,{x:A,y:I,zoom:H}=R(o),{x:L,y:D}=S.getBoundingClientRect(),_={x:x.x-L,y:x.y-D};return Hi(_,[A,I,H],N!==null,N||[1,1])},flowToScreenPosition:x=>{const k=R(g);if(!k)return x;const{x:S,y:N,zoom:A}=R(o),{x:I,y:H}=k.getBoundingClientRect(),L=Ll(x,[S,N,A]);return{x:L.x+I,y:L.y+H}},toObject:()=>({nodes:R(d).map(x=>({...x,position:{...x.position},data:{...x.data}})),edges:R(f).map(x=>({...x})),viewport:{...R(o)}}),updateNode:C,updateNodeData:(x,k,S)=>{var I;const N=(I=R(y).get(x))==null?void 0:I.internals.userNode;if(!N)return;const A=typeof k=="function"?k(N):k;N.data=S!=null&&S.replace?A:{...N.data,...A},d.update(H=>H)},getNodesBounds:x=>{const k=R(y),S=R(p);return zg(x,{nodeLookup:k,nodeOrigin:S})},getHandleConnections:({type:x,id:k,nodeId:S})=>{var N;return Array.from(((N=R(b).get(`${S}-${x}-${k??null}`))==null?void 0:N.values())??[])},viewport:o}}function va(e,t){var i;const n=[];for(const r of t){const o=e.get(r);if(o){const s="internals"in o?(i=o.internals)==null?void 0:i.userNode:o;n.push(s)}}return n}var cm=ge("<div><!></div>");function ma(e,t){le(t,!1);const n=Be(),i=()=>K(T,"$nodeLookup",n),r=()=>K(W,"$viewport",n),o=()=>K(V,"$snapGrid",n),s=()=>K($,"$nodeOrigin",n),a=()=>K(B,"$domNode",n),l=()=>K(Z,"$nodes",n),u=F(),c=F(),d=F(),f=F(),g=F(),y=F(),p=F(),M=F(),b=F(),m=F(),C=F();let E=v(t,"nodeId",8,void 0),x=v(t,"position",8,void 0),k=v(t,"variant",24,()=>Zt.Handle),S=v(t,"color",8,void 0),N=v(t,"minWidth",8,10),A=v(t,"minHeight",8,10),I=v(t,"maxWidth",24,()=>Number.MAX_VALUE),H=v(t,"maxHeight",24,()=>Number.MAX_VALUE),L=v(t,"keepAspectRatio",8,!1),D=v(t,"shouldResize",8,void 0),_=v(t,"onResizeStart",8,void 0),O=v(t,"onResize",8,void 0),w=v(t,"onResizeEnd",8,void 0),P=v(t,"style",8,""),z=v(t,"class",8,"");const{nodeLookup:T,snapGrid:V,viewport:W,nodes:Z,nodeOrigin:$,domNode:B}=He(),J=Yt("svelteflow__node_id");let te=F(),re=F(null);pn(()=>(h(te)&&Y(re,P0({domNode:h(te),nodeId:h(g),getStoreItems:()=>({nodeLookup:i(),transform:[r().x,r().y,r().zoom],snapGrid:o()??void 0,snapToGrid:!!o(),nodeOrigin:s(),paneDomNode:a()}),onChange:(j,ce)=>{var ve,be;const _e=(ve=i().get(h(g)))==null?void 0:ve.internals.userNode;if(_e){j.x!==void 0&&j.y!==void 0&&(_e.position={x:j.x,y:j.y}),j.width!==void 0&&j.height!==void 0&&(_e.width=j.width,_e.height=j.height);for(const Se of ce){const We=(be=i().get(Se.id))==null?void 0:be.internals.userNode;We&&(We.position=Se.position)}si(Z,l())}}})),()=>{var j;(j=h(re))==null||j.destroy()})),Q(()=>X(N()),()=>{Y(u,N()??10)}),Q(()=>X(A()),()=>{Y(c,A()??10)}),Q(()=>X(I()),()=>{Y(d,I()??Number.MAX_VALUE)}),Q(()=>X(H()),()=>{Y(f,H()??Number.MAX_VALUE)}),Q(()=>X(E()),()=>{Y(g,typeof E()=="string"?E():J)}),Q(()=>(X(k()),Zt),()=>{Y(y,k()===Zt.Line?"right":"bottom-right")}),Q(()=>(X(x()),h(y)),()=>{Y(p,x()??h(y))}),Q(()=>h(p),()=>{Y(M,h(p).split("-"))}),Q(()=>(X(k()),Zt),()=>{Y(b,k()===Zt.Line?"border-color":"background-color")}),Q(()=>X(P()),()=>{Y(m,P()??"")}),Q(()=>(X(S()),h(m),h(b)),()=>{Y(C,S()?`${h(m)} ${h(b)}: ${S()};`:h(m))}),Q(()=>(h(re),h(p),h(u),h(c),h(d),h(f),X(L()),X(_()),X(O()),X(w()),X(D())),()=>{var j;(j=h(re))==null||j.update({controlPosition:h(p),boundaries:{minWidth:h(u),minHeight:h(c),maxWidth:h(d),maxHeight:h(f)},keepAspectRatio:!!L(),onResizeStart:_(),onResize:O(),onResizeEnd:w(),shouldResize:D()})}),Qe(),de();var ae=cm();const G=oe(()=>It(lt(["svelte-flow__resize-control","nodrag",...h(M),k(),z()])));var U=fe(ae);Ve(U,t,"default",{}),Tn(ae,j=>Y(te,j),()=>h(te)),Ce(()=>{Wo(ae,h(G),""),ne(ae,"style",h(C))}),q(e,ae),ue()}var dm=ge("<!> <!>",1);function ru(e,t){le(t,!1);let n=v(t,"nodeId",8,void 0),i=v(t,"isVisible",8,!0),r=v(t,"handleClass",8,void 0),o=v(t,"handleStyle",8,void 0),s=v(t,"lineClass",8,void 0),a=v(t,"lineStyle",8,void 0),l=v(t,"color",8,void 0),u=v(t,"minWidth",8,10),c=v(t,"minHeight",8,10),d=v(t,"maxWidth",24,()=>Number.MAX_VALUE),f=v(t,"maxHeight",24,()=>Number.MAX_VALUE),g=v(t,"keepAspectRatio",8,!1),y=v(t,"shouldResize",8,void 0),p=v(t,"onResizeStart",8,void 0),M=v(t,"onResize",8,void 0),b=v(t,"onResizeEnd",8,void 0),m=u()||10,C=c()||10,E=d()||Number.MAX_VALUE,x=f()||Number.MAX_VALUE;de();var k=Fe(),S=pe(k);{var N=A=>{var I=dm(),H=pe(I);An(H,1,()=>b0,D=>D,(D,_)=>{ma(D,{get class(){return s()},get style(){return a()},get nodeId(){return n()},get position(){return h(_)},get variant(){return Zt.Line},get color(){return l()},minWidth:m,minHeight:C,maxWidth:E,maxHeight:x,get onResizeStart(){return p()},get keepAspectRatio(){return g()},get shouldResize(){return y()},get onResize(){return M()},get onResizeEnd(){return b()}})});var L=ie(H,2);An(L,1,()=>x0,D=>D,(D,_)=>{ma(D,{get class(){return r()},get style(){return o()},get nodeId(){return n()},get position(){return h(_)},get color(){return l()},minWidth:m,minHeight:C,maxWidth:E,maxHeight:x,get onResizeStart(){return p()},get keepAspectRatio(){return g()},get shouldResize(){return y()},get onResize(){return M()},get onResizeEnd(){return b()}})}),q(A,I)};De(S,A=>{i()&&A(N)})}q(e,k),ue()}const fm=[];function ou({type:e,nodeId:t,id:n=null}){const{edges:i,connectionLookup:r}=He(),o=Yt("svelteflow__node_id"),s=t??o;let a;return dn([i,r],([,l],u)=>{const c=l.get(`${s}-${e}-${n||null}`);Il(c,a)||(a=c,u(Array.from((a==null?void 0:a.values())||[])))},fm)}const ya=Symbol("graph");var wr,su;const os=class os{constructor(){Ue(this,wr);const t=an(this,wr,su).call(this);this.nodes=ee(t.nodes),this.edges=ee(t.edges)}static SetContext(){return hn(ya,new os)}static GetContext(){return Yt(ya)}LoadFromFile(t){this.nodes.set(t.nodes),this.edges.set(t.edges),this.Save()}AddNode(t){this.nodes.update(n=>(n.push(t),n)),this.Save()}AddEdge(t,n){this.edges.update(i=>(i.push({source:t,target:n,id:new Date().getTime().toString()}),i)),this.Save()}UpdateNode(t,n){this.nodes.update(i=>{const r=i.find(o=>o.id===t);return r.data={...r.data,...n},i}),this.Save()}Dump(){return{nodes:R(this.nodes),edges:R(this.edges)}}Save(){const t=this.Dump();localStorage.graph=JSON.stringify(t)}GetPrompt(t){const i=R(this.edges).find(a=>a.target===t);if(!i)return"";const o=R(this.nodes).find(a=>a.id===i.source);let s;switch(o.type){case"textInput":s={role:"user",text:`* ${o.data.value} *`};break;case"generate":s={role:"model",text:o.data.markdown};break}return[...this.GetPrompt(o.id),s]}};wr=new WeakSet,su=function(){return localStorage.graph?JSON.parse(localStorage.graph):{nodes:[{id:"1",type:"textInput",position:{x:-20,y:0},measured:{width:182,height:104},data:{value:"What is AGI?"},selected:!1,dragging:!1},{id:"2",type:"generate",position:{x:240,y:0},measured:{width:459,height:350},selected:!0,dragging:!1,width:459,height:350,data:{markdown:"",html:""}}],edges:[{source:"1",target:"2",selected:!1}]}};let sn=os;const pa=Symbol("context-menu");var yi,pi,_i,wi,xi,bi,Ei,cn,ei;const ss=class ss{constructor(){Ue(this,cn);Ue(this,yi,yt(!1));Ue(this,pi,yt(null));Ue(this,_i,yt(null));Ue(this,wi,yt(void 0));Ue(this,xi,yt(void 0));Ue(this,bi,yt(void 0));Ue(this,Ei,yt(void 0));Xi(this,"CanvasWidth",0);Xi(this,"CanvasHeight",0)}get IsVisible(){return h(ze(this,yi))}set IsVisible(t){Y(ze(this,yi),je(t))}get Node(){return h(ze(this,pi))}set Node(t){Y(ze(this,pi),je(t))}get Edge(){return h(ze(this,_i))}set Edge(t){Y(ze(this,_i),je(t))}get Top(){return h(ze(this,wi))}set Top(t){Y(ze(this,wi),je(t))}get Left(){return h(ze(this,xi))}set Left(t){Y(ze(this,xi),je(t))}get Right(){return h(ze(this,bi))}set Right(t){Y(ze(this,bi),je(t))}get Bottom(){return h(ze(this,Ei))}set Bottom(t){Y(ze(this,Ei),je(t))}static SetContext(){return hn(pa,new ss)}static GetContext(){return Yt(pa)}ShowPane(t){an(this,cn,ei).call(this,t)}ShowNode(t,n){an(this,cn,ei).call(this,t,n)}ShowEdge(t,n){an(this,cn,ei).call(this,t,null,n)}ShowConnect(t,n){an(this,cn,ei).call(this,t,null,null,n)}Hide(){this.IsVisible&&(this.Event=null,this.Node=null,this.Edge=null,this.IsVisible=!1)}};yi=new WeakMap,pi=new WeakMap,_i=new WeakMap,wi=new WeakMap,xi=new WeakMap,bi=new WeakMap,Ei=new WeakMap,cn=new WeakSet,ei=function(t,n,i,r){if(t.target.closest(".nomenu")||n||i){this.Hide();return}this.Event=t,this.Node=n,this.Edge=i,this.Connection=r,t.preventDefault(),this.Top=t.clientY<this.CanvasHeight-200?t.clientY+"px":void 0,this.Left=t.clientX<this.CanvasWidth-200?t.clientX+"px":void 0,this.Right=t.clientX>=this.CanvasWidth-200?this.CanvasWidth-t.clientX+"px":void 0,this.Bottom=t.clientY>=this.CanvasHeight-200?this.CanvasHeight-t.clientY+"px":void 0,this.IsVisible=!0};let gi=ss;var hm=ge('<button class="context-menu-item svelte-lx03e0">Duplicate node</button> <button class="context-menu-item svelte-lx03e0">Delete node</button>',1),gm=ge('<button class="context-menu-item svelte-lx03e0">Delete edge</button>'),vm=ge('<div class="context-menu-item svelte-lx03e0" style="padding: 0.5em;background: #ddd; color: #666;">Add node:</div> <button class="context-menu-item svelte-lx03e0">TextInput</button> <button class="context-menu-item svelte-lx03e0">Generate</button>',1),mm=ge('<div class="context-menu svelte-lx03e0"><!></div>');function ym(e,t){le(t,!1);const{screenToFlowPosition:n}=um(),i=sn.GetContext(),r=gi.GetContext();function o(y){y.id=new Date().getTime().toString(),y.origin=[0,0],y.position=n({x:r.Event.clientX,y:r.Event.clientY}),i.AddNode(y),r.Connection&&(r.Connection.fromHandle.type=="source"?i.AddEdge(r.Connection.fromNode.id,y.id):i.AddEdge(y.id,r.Connection.fromNode.id)),r.Hide()}function s(){o({type:"textInput",width:262,height:124,data:{value:""}})}function a(){o({type:"generate",width:430,height:250,data:{markdown:"",html:""}})}function l(){r.Hide()}function u(){r.Hide()}function c(){r.Hide()}de();var d=Fe(),f=pe(d);{var g=y=>{var p=mm(),M=fe(p);{var b=C=>{var E=hm(),x=pe(E),k=ie(x,2);Ee("click",x,l),Ee("click",k,u),q(C,E)},m=C=>{var E=Fe(),x=pe(E);{var k=N=>{var A=gm();Ee("click",A,c),q(N,A)},S=N=>{var A=vm(),I=ie(pe(A),2),H=ie(I,2);Ee("click",I,s),Ee("click",H,a),q(N,A)};De(x,N=>{r.Edge?N(k):N(S,!1)},!0)}q(C,E)};De(M,C=>{r.Node?C(b):C(m,!1)})}Ce(()=>{Le(p,"top",r.Top),Le(p,"left",r.Left),Le(p,"right",r.Right),Le(p,"bottom",r.Bottom)}),q(y,p)};De(f,y=>{r.IsVisible&&y(g)})}q(e,d),ue()}function pm(e,t,n,i){t.UpdateNode(n.id,{value:h(i)})}var _m=ge('<!> <!> <!> <node-content><node-header>Input</node-header> <node-body><textarea class="nodrag nozoom node-text"></textarea></node-body></node-content>',3);function wm(e,t){le(t,!0);const n=Be(),i=()=>K(s,"$connections",n);let r=yt(je(t.data.value));const o=sn.GetContext(),s=ou({nodeId:t.id,type:"target"}),a=tn(()=>i().length===0);var l=_m(),u=pe(l);ru(u,{minWidth:100,minHeight:30,onResizeEnd:()=>o.Save()});var c=ie(u,2);on(c,{class:"node-input",type:"target",get position(){return se.Left},get isConnectable(){return h(a)}});var d=ie(c,2);on(d,{class:"node-output",type:"source",get position(){return se.Right}});var f=ie(d,2),g=fe(f),y=ie(g,2);$a(y,"class","nomenu");var p=fe(y);p.__change=[pm,o,t,r],tl(p,()=>h(r),M=>Y(r,M)),q(e,l),ue()}Mr(["change"]);/**
 * @license lucide-svelte v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var bm=Ge("<svg><!><!></svg>");function Ri(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]),i=Pe(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);le(t,!1);let r=v(t,"name",8,void 0),o=v(t,"color",8,"currentColor"),s=v(t,"size",8,24),a=v(t,"strokeWidth",8,2),l=v(t,"absoluteStrokeWidth",8,!1),u=v(t,"iconNode",24,()=>[]);const c=(...p)=>p.filter((M,b,m)=>!!M&&m.indexOf(M)===b).join(" ");de();var d=bm();let f;var g=fe(d);An(g,1,u,Ic,(p,M)=>{let b=()=>h(M)[0],m=()=>h(M)[1];var C=Fe(),E=pe(C);Xc(E,b,!0,(x,k)=>{let S;Ce(()=>S=oi(x,S,{...m()},void 0,x.namespaceURI===Ma,x.nodeName.includes("-")))}),q(p,C)});var y=ie(g);Ve(y,t,"default",{}),Ce(()=>f=oi(d,f,{...xm,...i,width:s(),height:s(),stroke:o(),"stroke-width":l()?Number(a())*24/Number(s()):a(),class:c("lucide-icon","lucide",r()?`lucide-${r()}`:"",n.class)},void 0,!0)),q(e,d),ue()}function Em(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Ri(e,Nt({name:"clock"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:(r,o)=>{var s=Fe(),a=pe(s);Ve(a,t,"default",{}),q(r,s)},$$slots:{default:!0}}))}function Sm(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Ri(e,Nt({name:"download"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(r,o)=>{var s=Fe(),a=pe(s);Ve(a,t,"default",{}),q(r,s)},$$slots:{default:!0}}))}function km(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Ri(e,Nt({name:"play"},()=>n,{iconNode:[["polygon",{points:"6 3 20 12 6 21 6 3"}]],children:(r,o)=>{var s=Fe(),a=pe(s);Ve(a,t,"default",{}),q(r,s)},$$slots:{default:!0}}))}function Cm(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Ri(e,Nt({name:"settings"},()=>n,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(r,o)=>{var s=Fe(),a=pe(s);Ve(a,t,"default",{}),q(r,s)},$$slots:{default:!0}}))}function Nm(e,t){const n=Pe(t,["children","$$slots","$$events","$$legacy"]);Ri(e,Nt({name:"upload"},()=>n,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(r,o)=>{var s=Fe(),a=pe(s);Ve(a,t,"default",{}),q(r,s)},$$slots:{default:!0}}))}const _a=Symbol("settings");var Si,ki;const as=class as{constructor(){Ue(this,Si,yt(!1));Ue(this,ki,yt(""));if(localStorage.settings){const{geminiKey:t}=JSON.parse(localStorage.settings);this.geminiKey=t}}get IsVisible(){return h(ze(this,Si))}set IsVisible(t){Y(ze(this,Si),je(t))}get geminiKey(){return h(ze(this,ki))}set geminiKey(t){Y(ze(this,ki),je(t))}static SetContext(){return hn(_a,new as)}static GetContext(){return Yt(_a)}Save(){localStorage.settings=JSON.stringify({geminiKey:this.geminiKey}),console.log("localStorage.settings",localStorage.settings)}Show(){this.IsVisible=!0}Hide(){this.IsVisible=!1}};Si=new WeakMap,ki=new WeakMap;let vi=as;var Mm=ge('<button class="button" title="Call LLM" aria-label="Call LLM"><!></button>'),Pm=ge('<button class="button" title="In progress..." aria-label="In progress..." disabled><!></button>'),Am=ge("<!> <!> <!> <node-content><node-header>Generate <!></node-header> <node-body><!></node-body></node-content>",3);function Tm(e,t){le(t,!0);const n=Be(),i=()=>K(a,"$connections",n);let r=yt(!1);const o=sn.GetContext(),s=vi.GetContext(),a=ou({nodeId:t.id,type:"target"}),l=tn(()=>i().length===0);async function u(){Y(r,!0);const k=o.GetPrompt(t.id),S=[];for(var N=0;N<k.length;N++)S.push({role:k[N].role,parts:[{text:k[N].text}]});const{markdown:A,html:I}=await c(S);o.UpdateNode(t.id,{markdown:A,html:I}),Y(r,!1)}async function c(k){const S="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key="+s.geminiKey;try{const N=await fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:k,safetySettings:[{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_NONE"}]})});if(!N.ok)throw new Error(`API call failed with status ${N.status}: ${N.statusText}`);const I=(await N.json()).candidates[0].content.parts[0].text,H=marked.parse(I);return{markdown:I,html:H}}catch(N){throw console.error("Error calling Gemini AI API:",N),N}}var d=Am(),f=pe(d);ru(f,{minWidth:100,minHeight:30,onResizeEnd:()=>o.Save()});var g=ie(f,2);on(g,{class:"node-input",type:"target",get position(){return se.Left},get isConnectable(){return h(l)}});var y=ie(g,2);on(y,{class:"node-output",type:"source",get position(){return se.Right}});var p=ie(y,2),M=fe(p),b=ie(fe(M));{var m=k=>{var S=Mm();S.__click=u;var N=fe(S);km(N,{size:16}),q(k,S)},C=k=>{var S=Pm(),N=fe(S);Em(N,{size:16}),q(k,S)};De(b,k=>{h(r)?k(C,!1):k(m)})}var E=ie(M,2);$a(E,"class","nodrag nozoom nomenu node-text");var x=fe(E);Lc(x,()=>t.data.html),q(e,d),ue()}Mr(["click"]);var zm=ge("<!> <!> <!>",1),Im=ge("<div><!></div>");function Om(e,t){le(t,!1);const n={textInput:wm,generate:Tm},i=sn.GetContext(),r=F(gi.GetContext());async function o(l,u){u.isValid||(console.log(u),await new Promise(c=>setTimeout(c,100)),h(r).ShowConnect(l,u))}de();var s=Im();Le(s,"height","100%");var a=fe(s);Yv(a,{get nodes(){return i.nodes},get edges(){return i.edges},nodeTypes:n,fitView:!0,fitViewOptions:{maxZoom:1,minZoom:1},proOptions:{hideAttribution:!0},colorMode:"dark",snapGrid:[20,20],onconnect:()=>i.Save(),onconnectstart:()=>h(r).Hide(),onconnectend:o,ondelete:l=>i.Save(),$$events:{paneclick:()=>h(r).Hide(),nodeclick:()=>h(r).Hide(),edgeclick:()=>h(r).Hide(),nodedragstart:()=>h(r).Hide(),panecontextmenu:({detail:{event:l}})=>h(r).ShowPane(l),nodecontextmenu:({detail:{event:l,node:u}})=>h(r).ShowNode(l,u),edgecontextmenu:({detail:{event:l,edge:u}})=>h(r).ShowEdge(l,null,u),nodedragstop:()=>i.Save()},children:(l,u)=>{var c=zm(),d=pe(c);tm(d,{});var f=ie(d,2);ym(f,{});var g=ie(f,2);lm(g,{get variant(){return Xt.Dots},patternColor:"rgba(255,255,255,0.5)",gap:20}),q(l,c)},$$slots:{default:!0}}),or(s,"clientWidth",l=>io(r,h(r).CanvasWidth=l)),or(s,"clientHeight",l=>io(r,h(r).CanvasHeight=l)),q(e,s),ue()}var Dm=(e,t)=>h(t).click(),Hm=(e,t)=>h(t).showModal(),Rm=(e,t)=>h(t).Save(),Lm=ge('<input type="file" id="fileInput" style="display: none;" accept=".json"> <div class="svelte-flow__panel svelte-flow__controls left top"><button class="menu-button" type="button" title="Import" aria-label="Import"><!></button> <button class="menu-button" type="button" title="Export" aria-label="Export"><!></button> <button class="menu-button" type="button" title="Settings" aria-label="Settings"><!></button></div> <dialog class="modal" id="settingsDialog" style="background-color: rgba(0, 0, 0, 0.85);"><div class="modal-box"><h3 class="text-lg font-bold">Settings</h3> <label class="input input-bordered flex items-center gap-2">Gemini API Key: <input type="text" class="grow"></label> <div class="modal-action"><form method="dialog"><button class="btn">Close</button></form></div></div></dialog>',1);function Vm(e,t){le(t,!1);const n=sn.GetContext(),i=F(vi.GetContext());let r=F(),o=F();pn(()=>{var x;h(i).geminiKey||(x=h(o))==null||x.showModal()});function s(x){const k=x.target.files[0];if(!k||k.type!="application/json")throw"Invalid file";const S=new FileReader;S.onload=N=>{const A=JSON.parse(N.target.result.toString());if(!Array.isArray(A.nodes)||!Array.isArray(A.edges))throw"Invalid file";n.LoadFromFile(A)},S.readAsText(k)}function a(){const x=n.Dump(),k=JSON.stringify(x,null,2),S=new Blob([k],{type:"application/json"}),N=URL.createObjectURL(S),A=document.createElement("a");A.href=N,A.download="llm-graph.json",A.click(),URL.revokeObjectURL(N)}de();var l=Lm(),u=pe(l);u.__change=s,Tn(u,x=>Y(r,x),()=>h(r));var c=ie(u,2),d=fe(c);d.__click=[Dm,r];var f=fe(d);Nm(f,{size:16});var g=ie(d,2);g.__click=a;var y=fe(g);Sm(y,{size:16});var p=ie(g,2);p.__click=[Hm,o];var M=fe(p);Cm(M,{size:16});var b=ie(c,2),m=fe(b),C=ie(fe(m),2),E=ie(fe(C));E.__change=[Rm,i],Tn(b,x=>Y(o,x),()=>h(o)),tl(E,()=>h(i).geminiKey,x=>io(i,h(i).geminiKey=x)),q(e,l),ue()}Mr(["change","click"]);var Xm=ge("<!> <!>",1);function Ym(e,t){le(t,!1),vi.SetContext(),sn.SetContext(),gi.SetContext(),de();var n=Xm(),i=pe(n);Om(i,{});var r=ie(i,2);Vm(r,{}),q(e,n),ue()}Ac(Ym,{target:document.getElementById("app")});
//# sourceMappingURL=index-Dfm0mozB.js.map
